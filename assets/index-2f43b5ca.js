(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function $0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Tf={exports:{}},Go={},Rf={exports:{}},K={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ns=Symbol.for("react.element"),H0=Symbol.for("react.portal"),V0=Symbol.for("react.fragment"),G0=Symbol.for("react.strict_mode"),Q0=Symbol.for("react.profiler"),K0=Symbol.for("react.provider"),Y0=Symbol.for("react.context"),q0=Symbol.for("react.forward_ref"),X0=Symbol.for("react.suspense"),J0=Symbol.for("react.memo"),Z0=Symbol.for("react.lazy"),pd=Symbol.iterator;function ey(t){return t===null||typeof t!="object"?null:(t=pd&&t[pd]||t["@@iterator"],typeof t=="function"?t:null)}var Pf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Df=Object.assign,bf={};function Hr(t,e,n){this.props=t,this.context=e,this.refs=bf,this.updater=n||Pf}Hr.prototype.isReactComponent={};Hr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Hr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Af(){}Af.prototype=Hr.prototype;function Nu(t,e,n){this.props=t,this.context=e,this.refs=bf,this.updater=n||Pf}var ku=Nu.prototype=new Af;ku.constructor=Nu;Df(ku,Hr.prototype);ku.isPureReactComponent=!0;var md=Array.isArray,Mf=Object.prototype.hasOwnProperty,Iu={current:null},Of={key:!0,ref:!0,__self:!0,__source:!0};function Lf(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Mf.call(e,r)&&!Of.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:ns,type:t,key:s,ref:o,props:i,_owner:Iu.current}}function ty(t,e){return{$$typeof:ns,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Tu(t){return typeof t=="object"&&t!==null&&t.$$typeof===ns}function ny(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var gd=/\/+/g;function Il(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ny(""+t.key):e.toString(36)}function Hs(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ns:case H0:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Il(o,0):r,md(i)?(n="",t!=null&&(n=t.replace(gd,"$&/")+"/"),Hs(i,e,n,"",function(u){return u})):i!=null&&(Tu(i)&&(i=ty(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(gd,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",md(t))for(var l=0;l<t.length;l++){s=t[l];var a=r+Il(s,l);o+=Hs(s,e,n,a,i)}else if(a=ey(t),typeof a=="function")for(t=a.call(t),l=0;!(s=t.next()).done;)s=s.value,a=r+Il(s,l++),o+=Hs(s,e,n,a,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Es(t,e,n){if(t==null)return t;var r=[],i=0;return Hs(t,r,"","",function(s){return e.call(n,s,i++)}),r}function ry(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ve={current:null},Vs={transition:null},iy={ReactCurrentDispatcher:Ve,ReactCurrentBatchConfig:Vs,ReactCurrentOwner:Iu};K.Children={map:Es,forEach:function(t,e,n){Es(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Es(t,function(){e++}),e},toArray:function(t){return Es(t,function(e){return e})||[]},only:function(t){if(!Tu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};K.Component=Hr;K.Fragment=V0;K.Profiler=Q0;K.PureComponent=Nu;K.StrictMode=G0;K.Suspense=X0;K.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iy;K.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Df({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Iu.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)Mf.call(e,a)&&!Of.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:ns,type:t.type,key:i,ref:s,props:r,_owner:o}};K.createContext=function(t){return t={$$typeof:Y0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:K0,_context:t},t.Consumer=t};K.createElement=Lf;K.createFactory=function(t){var e=Lf.bind(null,t);return e.type=t,e};K.createRef=function(){return{current:null}};K.forwardRef=function(t){return{$$typeof:q0,render:t}};K.isValidElement=Tu;K.lazy=function(t){return{$$typeof:Z0,_payload:{_status:-1,_result:t},_init:ry}};K.memo=function(t,e){return{$$typeof:J0,type:t,compare:e===void 0?null:e}};K.startTransition=function(t){var e=Vs.transition;Vs.transition={};try{t()}finally{Vs.transition=e}};K.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};K.useCallback=function(t,e){return Ve.current.useCallback(t,e)};K.useContext=function(t){return Ve.current.useContext(t)};K.useDebugValue=function(){};K.useDeferredValue=function(t){return Ve.current.useDeferredValue(t)};K.useEffect=function(t,e){return Ve.current.useEffect(t,e)};K.useId=function(){return Ve.current.useId()};K.useImperativeHandle=function(t,e,n){return Ve.current.useImperativeHandle(t,e,n)};K.useInsertionEffect=function(t,e){return Ve.current.useInsertionEffect(t,e)};K.useLayoutEffect=function(t,e){return Ve.current.useLayoutEffect(t,e)};K.useMemo=function(t,e){return Ve.current.useMemo(t,e)};K.useReducer=function(t,e,n){return Ve.current.useReducer(t,e,n)};K.useRef=function(t){return Ve.current.useRef(t)};K.useState=function(t){return Ve.current.useState(t)};K.useSyncExternalStore=function(t,e,n){return Ve.current.useSyncExternalStore(t,e,n)};K.useTransition=function(){return Ve.current.useTransition()};K.version="18.2.0";Rf.exports=K;var F=Rf.exports;const sy=$0(F);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oy=F,ly=Symbol.for("react.element"),ay=Symbol.for("react.fragment"),uy=Object.prototype.hasOwnProperty,cy=oy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,dy={key:!0,ref:!0,__self:!0,__source:!0};function Ff(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)uy.call(e,r)&&!dy.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:ly,type:t,key:s,ref:o,props:i,_owner:cy.current}}Go.Fragment=ay;Go.jsx=Ff;Go.jsxs=Ff;Tf.exports=Go;var Ru=Tf.exports;const Ns=Ru.Fragment,p=Ru.jsx,y=Ru.jsxs;var da={},zf={exports:{}},at={},jf={exports:{}},Uf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(I,z){var B=I.length;I.push(z);e:for(;0<B;){var ee=B-1>>>1,pe=I[ee];if(0<i(pe,z))I[ee]=z,I[B]=pe,B=ee;else break e}}function n(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var z=I[0],B=I.pop();if(B!==z){I[0]=B;e:for(var ee=0,pe=I.length,At=pe>>>1;ee<At;){var Ke=2*(ee+1)-1,un=I[Ke],Se=Ke+1,Mt=I[Se];if(0>i(un,B))Se<pe&&0>i(Mt,un)?(I[ee]=Mt,I[Se]=B,ee=Se):(I[ee]=un,I[Ke]=B,ee=Ke);else if(Se<pe&&0>i(Mt,B))I[ee]=Mt,I[Se]=B,ee=Se;else break e}}return z}function i(I,z){var B=I.sortIndex-z.sortIndex;return B!==0?B:I.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],u=[],h=1,d=null,c=3,_=!1,v=!1,C=!1,O=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(I){for(var z=n(u);z!==null;){if(z.callback===null)r(u);else if(z.startTime<=I)r(u),z.sortIndex=z.expirationTime,e(a,z);else break;z=n(u)}}function x(I){if(C=!1,m(I),!v)if(n(a)!==null)v=!0,yt(T);else{var z=n(u);z!==null&&bt(x,z.startTime-I)}}function T(I,z){v=!1,C&&(C=!1,g(D),D=-1),_=!0;var B=c;try{for(m(z),d=n(a);d!==null&&(!(d.expirationTime>z)||I&&!Qe());){var ee=d.callback;if(typeof ee=="function"){d.callback=null,c=d.priorityLevel;var pe=ee(d.expirationTime<=z);z=t.unstable_now(),typeof pe=="function"?d.callback=pe:d===n(a)&&r(a),m(z)}else r(a);d=n(a)}if(d!==null)var At=!0;else{var Ke=n(u);Ke!==null&&bt(x,Ke.startTime-z),At=!1}return At}finally{d=null,c=B,_=!1}}var b=!1,P=null,D=-1,ue=5,$=-1;function Qe(){return!(t.unstable_now()-$<ue)}function On(){if(P!==null){var I=t.unstable_now();$=I;var z=!0;try{z=P(!0,I)}finally{z?gt():(b=!1,P=null)}}else b=!1}var gt;if(typeof f=="function")gt=function(){f(On)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,$t=xe.port2;xe.port1.onmessage=On,gt=function(){$t.postMessage(null)}}else gt=function(){O(On,0)};function yt(I){P=I,b||(b=!0,gt())}function bt(I,z){D=O(function(){I(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(I){I.callback=null},t.unstable_continueExecution=function(){v||_||(v=!0,yt(T))},t.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ue=0<I?Math.floor(1e3/I):5},t.unstable_getCurrentPriorityLevel=function(){return c},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(I){switch(c){case 1:case 2:case 3:var z=3;break;default:z=c}var B=c;c=z;try{return I()}finally{c=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(I,z){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var B=c;c=I;try{return z()}finally{c=B}},t.unstable_scheduleCallback=function(I,z,B){var ee=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?ee+B:ee):B=ee,I){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=B+pe,I={id:h++,callback:z,priorityLevel:I,startTime:B,expirationTime:pe,sortIndex:-1},B>ee?(I.sortIndex=B,e(u,I),n(a)===null&&I===n(u)&&(C?(g(D),D=-1):C=!0,bt(x,B-ee))):(I.sortIndex=pe,e(a,I),v||_||(v=!0,yt(T))),I},t.unstable_shouldYield=Qe,t.unstable_wrapCallback=function(I){var z=c;return function(){var B=c;c=z;try{return I.apply(this,arguments)}finally{c=B}}}})(Uf);jf.exports=Uf;var hy=jf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bf=F,lt=hy;function S(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Wf=new Set,Ri={};function ir(t,e){Ar(t,e),Ar(t+"Capture",e)}function Ar(t,e){for(Ri[t]=e,t=0;t<e.length;t++)Wf.add(e[t])}var Jt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ha=Object.prototype.hasOwnProperty,fy=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yd={},_d={};function py(t){return ha.call(_d,t)?!0:ha.call(yd,t)?!1:fy.test(t)?_d[t]=!0:(yd[t]=!0,!1)}function my(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function gy(t,e,n,r){if(e===null||typeof e>"u"||my(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ge(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Le={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Le[t]=new Ge(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Le[e]=new Ge(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Le[t]=new Ge(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Le[t]=new Ge(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Le[t]=new Ge(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Le[t]=new Ge(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Le[t]=new Ge(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Le[t]=new Ge(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Le[t]=new Ge(t,5,!1,t.toLowerCase(),null,!1,!1)});var Pu=/[\-:]([a-z])/g;function Du(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Pu,Du);Le[e]=new Ge(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Pu,Du);Le[e]=new Ge(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Pu,Du);Le[e]=new Ge(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Le[t]=new Ge(t,1,!1,t.toLowerCase(),null,!1,!1)});Le.xlinkHref=new Ge("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Le[t]=new Ge(t,1,!1,t.toLowerCase(),null,!0,!0)});function bu(t,e,n,r){var i=Le.hasOwnProperty(e)?Le[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(gy(e,n,i,r)&&(n=null),r||i===null?py(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var on=Bf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ks=Symbol.for("react.element"),ur=Symbol.for("react.portal"),cr=Symbol.for("react.fragment"),Au=Symbol.for("react.strict_mode"),fa=Symbol.for("react.profiler"),$f=Symbol.for("react.provider"),Hf=Symbol.for("react.context"),Mu=Symbol.for("react.forward_ref"),pa=Symbol.for("react.suspense"),ma=Symbol.for("react.suspense_list"),Ou=Symbol.for("react.memo"),dn=Symbol.for("react.lazy"),Vf=Symbol.for("react.offscreen"),vd=Symbol.iterator;function Jr(t){return t===null||typeof t!="object"?null:(t=vd&&t[vd]||t["@@iterator"],typeof t=="function"?t:null)}var fe=Object.assign,Tl;function ci(t){if(Tl===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Tl=e&&e[1]||""}return`
`+Tl+t}var Rl=!1;function Pl(t,e){if(!t||Rl)return"";Rl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var a=`
`+i[o].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=o&&0<=l);break}}}finally{Rl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ci(t):""}function yy(t){switch(t.tag){case 5:return ci(t.type);case 16:return ci("Lazy");case 13:return ci("Suspense");case 19:return ci("SuspenseList");case 0:case 2:case 15:return t=Pl(t.type,!1),t;case 11:return t=Pl(t.type.render,!1),t;case 1:return t=Pl(t.type,!0),t;default:return""}}function ga(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case cr:return"Fragment";case ur:return"Portal";case fa:return"Profiler";case Au:return"StrictMode";case pa:return"Suspense";case ma:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Hf:return(t.displayName||"Context")+".Consumer";case $f:return(t._context.displayName||"Context")+".Provider";case Mu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ou:return e=t.displayName||null,e!==null?e:ga(t.type)||"Memo";case dn:e=t._payload,t=t._init;try{return ga(t(e))}catch{}}return null}function _y(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ga(e);case 8:return e===Au?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Tn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Gf(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function vy(t){var e=Gf(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Is(t){t._valueTracker||(t._valueTracker=vy(t))}function Qf(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Gf(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ro(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ya(t,e){var n=e.checked;return fe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function wd(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Tn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Kf(t,e){e=e.checked,e!=null&&bu(t,"checked",e,!1)}function _a(t,e){Kf(t,e);var n=Tn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?va(t,e.type,n):e.hasOwnProperty("defaultValue")&&va(t,e.type,Tn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function xd(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function va(t,e,n){(e!=="number"||ro(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var di=Array.isArray;function Cr(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Tn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function wa(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(S(91));return fe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Cd(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(S(92));if(di(n)){if(1<n.length)throw Error(S(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Tn(n)}}function Yf(t,e){var n=Tn(e.value),r=Tn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Sd(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function qf(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xa(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?qf(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ts,Xf=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ts=Ts||document.createElement("div"),Ts.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ts.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Pi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var mi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wy=["Webkit","ms","Moz","O"];Object.keys(mi).forEach(function(t){wy.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),mi[e]=mi[t]})});function Jf(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||mi.hasOwnProperty(t)&&mi[t]?(""+e).trim():e+"px"}function Zf(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Jf(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var xy=fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ca(t,e){if(e){if(xy[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(S(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(S(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(S(61))}if(e.style!=null&&typeof e.style!="object")throw Error(S(62))}}function Sa(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ea=null;function Lu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Na=null,Sr=null,Er=null;function Ed(t){if(t=ss(t)){if(typeof Na!="function")throw Error(S(280));var e=t.stateNode;e&&(e=Xo(e),Na(t.stateNode,t.type,e))}}function ep(t){Sr?Er?Er.push(t):Er=[t]:Sr=t}function tp(){if(Sr){var t=Sr,e=Er;if(Er=Sr=null,Ed(t),e)for(t=0;t<e.length;t++)Ed(e[t])}}function np(t,e){return t(e)}function rp(){}var Dl=!1;function ip(t,e,n){if(Dl)return t(e,n);Dl=!0;try{return np(t,e,n)}finally{Dl=!1,(Sr!==null||Er!==null)&&(rp(),tp())}}function Di(t,e){var n=t.stateNode;if(n===null)return null;var r=Xo(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(S(231,e,typeof n));return n}var ka=!1;if(Jt)try{var Zr={};Object.defineProperty(Zr,"passive",{get:function(){ka=!0}}),window.addEventListener("test",Zr,Zr),window.removeEventListener("test",Zr,Zr)}catch{ka=!1}function Cy(t,e,n,r,i,s,o,l,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var gi=!1,io=null,so=!1,Ia=null,Sy={onError:function(t){gi=!0,io=t}};function Ey(t,e,n,r,i,s,o,l,a){gi=!1,io=null,Cy.apply(Sy,arguments)}function Ny(t,e,n,r,i,s,o,l,a){if(Ey.apply(this,arguments),gi){if(gi){var u=io;gi=!1,io=null}else throw Error(S(198));so||(so=!0,Ia=u)}}function sr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function sp(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Nd(t){if(sr(t)!==t)throw Error(S(188))}function ky(t){var e=t.alternate;if(!e){if(e=sr(t),e===null)throw Error(S(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Nd(i),t;if(s===r)return Nd(i),e;s=s.sibling}throw Error(S(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(S(189))}}if(n.alternate!==r)throw Error(S(190))}if(n.tag!==3)throw Error(S(188));return n.stateNode.current===n?t:e}function op(t){return t=ky(t),t!==null?lp(t):null}function lp(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=lp(t);if(e!==null)return e;t=t.sibling}return null}var ap=lt.unstable_scheduleCallback,kd=lt.unstable_cancelCallback,Iy=lt.unstable_shouldYield,Ty=lt.unstable_requestPaint,we=lt.unstable_now,Ry=lt.unstable_getCurrentPriorityLevel,Fu=lt.unstable_ImmediatePriority,up=lt.unstable_UserBlockingPriority,oo=lt.unstable_NormalPriority,Py=lt.unstable_LowPriority,cp=lt.unstable_IdlePriority,Qo=null,Bt=null;function Dy(t){if(Bt&&typeof Bt.onCommitFiberRoot=="function")try{Bt.onCommitFiberRoot(Qo,t,void 0,(t.current.flags&128)===128)}catch{}}var Tt=Math.clz32?Math.clz32:My,by=Math.log,Ay=Math.LN2;function My(t){return t>>>=0,t===0?32:31-(by(t)/Ay|0)|0}var Rs=64,Ps=4194304;function hi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function lo(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=hi(l):(s&=o,s!==0&&(r=hi(s)))}else o=n&~i,o!==0?r=hi(o):s!==0&&(r=hi(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Tt(e),i=1<<n,r|=t[n],e&=~i;return r}function Oy(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ly(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Tt(s),l=1<<o,a=i[o];a===-1?(!(l&n)||l&r)&&(i[o]=Oy(l,e)):a<=e&&(t.expiredLanes|=l),s&=~l}}function Ta(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function dp(){var t=Rs;return Rs<<=1,!(Rs&4194240)&&(Rs=64),t}function bl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function rs(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Tt(e),t[e]=n}function Fy(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Tt(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function zu(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Tt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Z=0;function hp(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var fp,ju,pp,mp,gp,Ra=!1,Ds=[],yn=null,_n=null,vn=null,bi=new Map,Ai=new Map,fn=[],zy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Id(t,e){switch(t){case"focusin":case"focusout":yn=null;break;case"dragenter":case"dragleave":_n=null;break;case"mouseover":case"mouseout":vn=null;break;case"pointerover":case"pointerout":bi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ai.delete(e.pointerId)}}function ei(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=ss(e),e!==null&&ju(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function jy(t,e,n,r,i){switch(e){case"focusin":return yn=ei(yn,t,e,n,r,i),!0;case"dragenter":return _n=ei(_n,t,e,n,r,i),!0;case"mouseover":return vn=ei(vn,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return bi.set(s,ei(bi.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ai.set(s,ei(Ai.get(s)||null,t,e,n,r,i)),!0}return!1}function yp(t){var e=Bn(t.target);if(e!==null){var n=sr(e);if(n!==null){if(e=n.tag,e===13){if(e=sp(n),e!==null){t.blockedOn=e,gp(t.priority,function(){pp(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Gs(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Pa(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ea=r,n.target.dispatchEvent(r),Ea=null}else return e=ss(n),e!==null&&ju(e),t.blockedOn=n,!1;e.shift()}return!0}function Td(t,e,n){Gs(t)&&n.delete(e)}function Uy(){Ra=!1,yn!==null&&Gs(yn)&&(yn=null),_n!==null&&Gs(_n)&&(_n=null),vn!==null&&Gs(vn)&&(vn=null),bi.forEach(Td),Ai.forEach(Td)}function ti(t,e){t.blockedOn===e&&(t.blockedOn=null,Ra||(Ra=!0,lt.unstable_scheduleCallback(lt.unstable_NormalPriority,Uy)))}function Mi(t){function e(i){return ti(i,t)}if(0<Ds.length){ti(Ds[0],t);for(var n=1;n<Ds.length;n++){var r=Ds[n];r.blockedOn===t&&(r.blockedOn=null)}}for(yn!==null&&ti(yn,t),_n!==null&&ti(_n,t),vn!==null&&ti(vn,t),bi.forEach(e),Ai.forEach(e),n=0;n<fn.length;n++)r=fn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<fn.length&&(n=fn[0],n.blockedOn===null);)yp(n),n.blockedOn===null&&fn.shift()}var Nr=on.ReactCurrentBatchConfig,ao=!0;function By(t,e,n,r){var i=Z,s=Nr.transition;Nr.transition=null;try{Z=1,Uu(t,e,n,r)}finally{Z=i,Nr.transition=s}}function Wy(t,e,n,r){var i=Z,s=Nr.transition;Nr.transition=null;try{Z=4,Uu(t,e,n,r)}finally{Z=i,Nr.transition=s}}function Uu(t,e,n,r){if(ao){var i=Pa(t,e,n,r);if(i===null)Wl(t,e,r,uo,n),Id(t,r);else if(jy(i,t,e,n,r))r.stopPropagation();else if(Id(t,r),e&4&&-1<zy.indexOf(t)){for(;i!==null;){var s=ss(i);if(s!==null&&fp(s),s=Pa(t,e,n,r),s===null&&Wl(t,e,r,uo,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Wl(t,e,r,null,n)}}var uo=null;function Pa(t,e,n,r){if(uo=null,t=Lu(r),t=Bn(t),t!==null)if(e=sr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=sp(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return uo=t,null}function _p(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ry()){case Fu:return 1;case up:return 4;case oo:case Py:return 16;case cp:return 536870912;default:return 16}default:return 16}}var mn=null,Bu=null,Qs=null;function vp(){if(Qs)return Qs;var t,e=Bu,n=e.length,r,i="value"in mn?mn.value:mn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Qs=i.slice(t,1<r?1-r:void 0)}function Ks(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function bs(){return!0}function Rd(){return!1}function ut(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?bs:Rd,this.isPropagationStopped=Rd,this}return fe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=bs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=bs)},persist:function(){},isPersistent:bs}),e}var Vr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wu=ut(Vr),is=fe({},Vr,{view:0,detail:0}),$y=ut(is),Al,Ml,ni,Ko=fe({},is,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$u,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ni&&(ni&&t.type==="mousemove"?(Al=t.screenX-ni.screenX,Ml=t.screenY-ni.screenY):Ml=Al=0,ni=t),Al)},movementY:function(t){return"movementY"in t?t.movementY:Ml}}),Pd=ut(Ko),Hy=fe({},Ko,{dataTransfer:0}),Vy=ut(Hy),Gy=fe({},is,{relatedTarget:0}),Ol=ut(Gy),Qy=fe({},Vr,{animationName:0,elapsedTime:0,pseudoElement:0}),Ky=ut(Qy),Yy=fe({},Vr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),qy=ut(Yy),Xy=fe({},Vr,{data:0}),Dd=ut(Xy),Jy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},e_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function t_(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=e_[t])?!!e[t]:!1}function $u(){return t_}var n_=fe({},is,{key:function(t){if(t.key){var e=Jy[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ks(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Zy[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$u,charCode:function(t){return t.type==="keypress"?Ks(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ks(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),r_=ut(n_),i_=fe({},Ko,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bd=ut(i_),s_=fe({},is,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$u}),o_=ut(s_),l_=fe({},Vr,{propertyName:0,elapsedTime:0,pseudoElement:0}),a_=ut(l_),u_=fe({},Ko,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),c_=ut(u_),d_=[9,13,27,32],Hu=Jt&&"CompositionEvent"in window,yi=null;Jt&&"documentMode"in document&&(yi=document.documentMode);var h_=Jt&&"TextEvent"in window&&!yi,wp=Jt&&(!Hu||yi&&8<yi&&11>=yi),Ad=String.fromCharCode(32),Md=!1;function xp(t,e){switch(t){case"keyup":return d_.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cp(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var dr=!1;function f_(t,e){switch(t){case"compositionend":return Cp(e);case"keypress":return e.which!==32?null:(Md=!0,Ad);case"textInput":return t=e.data,t===Ad&&Md?null:t;default:return null}}function p_(t,e){if(dr)return t==="compositionend"||!Hu&&xp(t,e)?(t=vp(),Qs=Bu=mn=null,dr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return wp&&e.locale!=="ko"?null:e.data;default:return null}}var m_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Od(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!m_[t.type]:e==="textarea"}function Sp(t,e,n,r){ep(r),e=co(e,"onChange"),0<e.length&&(n=new Wu("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var _i=null,Oi=null;function g_(t){Mp(t,0)}function Yo(t){var e=pr(t);if(Qf(e))return t}function y_(t,e){if(t==="change")return e}var Ep=!1;if(Jt){var Ll;if(Jt){var Fl="oninput"in document;if(!Fl){var Ld=document.createElement("div");Ld.setAttribute("oninput","return;"),Fl=typeof Ld.oninput=="function"}Ll=Fl}else Ll=!1;Ep=Ll&&(!document.documentMode||9<document.documentMode)}function Fd(){_i&&(_i.detachEvent("onpropertychange",Np),Oi=_i=null)}function Np(t){if(t.propertyName==="value"&&Yo(Oi)){var e=[];Sp(e,Oi,t,Lu(t)),ip(g_,e)}}function __(t,e,n){t==="focusin"?(Fd(),_i=e,Oi=n,_i.attachEvent("onpropertychange",Np)):t==="focusout"&&Fd()}function v_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Yo(Oi)}function w_(t,e){if(t==="click")return Yo(e)}function x_(t,e){if(t==="input"||t==="change")return Yo(e)}function C_(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Dt=typeof Object.is=="function"?Object.is:C_;function Li(t,e){if(Dt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ha.call(e,i)||!Dt(t[i],e[i]))return!1}return!0}function zd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function jd(t,e){var n=zd(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=zd(n)}}function kp(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?kp(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ip(){for(var t=window,e=ro();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ro(t.document)}return e}function Vu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function S_(t){var e=Ip(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&kp(n.ownerDocument.documentElement,n)){if(r!==null&&Vu(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=jd(n,s);var o=jd(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var E_=Jt&&"documentMode"in document&&11>=document.documentMode,hr=null,Da=null,vi=null,ba=!1;function Ud(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ba||hr==null||hr!==ro(r)||(r=hr,"selectionStart"in r&&Vu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),vi&&Li(vi,r)||(vi=r,r=co(Da,"onSelect"),0<r.length&&(e=new Wu("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=hr)))}function As(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var fr={animationend:As("Animation","AnimationEnd"),animationiteration:As("Animation","AnimationIteration"),animationstart:As("Animation","AnimationStart"),transitionend:As("Transition","TransitionEnd")},zl={},Tp={};Jt&&(Tp=document.createElement("div").style,"AnimationEvent"in window||(delete fr.animationend.animation,delete fr.animationiteration.animation,delete fr.animationstart.animation),"TransitionEvent"in window||delete fr.transitionend.transition);function qo(t){if(zl[t])return zl[t];if(!fr[t])return t;var e=fr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Tp)return zl[t]=e[n];return t}var Rp=qo("animationend"),Pp=qo("animationiteration"),Dp=qo("animationstart"),bp=qo("transitionend"),Ap=new Map,Bd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bn(t,e){Ap.set(t,e),ir(e,[t])}for(var jl=0;jl<Bd.length;jl++){var Ul=Bd[jl],N_=Ul.toLowerCase(),k_=Ul[0].toUpperCase()+Ul.slice(1);bn(N_,"on"+k_)}bn(Rp,"onAnimationEnd");bn(Pp,"onAnimationIteration");bn(Dp,"onAnimationStart");bn("dblclick","onDoubleClick");bn("focusin","onFocus");bn("focusout","onBlur");bn(bp,"onTransitionEnd");Ar("onMouseEnter",["mouseout","mouseover"]);Ar("onMouseLeave",["mouseout","mouseover"]);Ar("onPointerEnter",["pointerout","pointerover"]);Ar("onPointerLeave",["pointerout","pointerover"]);ir("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ir("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ir("onBeforeInput",["compositionend","keypress","textInput","paste"]);ir("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ir("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ir("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),I_=new Set("cancel close invalid load scroll toggle".split(" ").concat(fi));function Wd(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Ny(r,e,void 0,t),t.currentTarget=null}function Mp(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==s&&i.isPropagationStopped())break e;Wd(i,l,u),s=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,u=l.currentTarget,l=l.listener,a!==s&&i.isPropagationStopped())break e;Wd(i,l,u),s=a}}}if(so)throw t=Ia,so=!1,Ia=null,t}function oe(t,e){var n=e[Fa];n===void 0&&(n=e[Fa]=new Set);var r=t+"__bubble";n.has(r)||(Op(e,t,2,!1),n.add(r))}function Bl(t,e,n){var r=0;e&&(r|=4),Op(n,t,r,e)}var Ms="_reactListening"+Math.random().toString(36).slice(2);function Fi(t){if(!t[Ms]){t[Ms]=!0,Wf.forEach(function(n){n!=="selectionchange"&&(I_.has(n)||Bl(n,!1,t),Bl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ms]||(e[Ms]=!0,Bl("selectionchange",!1,e))}}function Op(t,e,n,r){switch(_p(e)){case 1:var i=By;break;case 4:i=Wy;break;default:i=Uu}n=i.bind(null,e,n,t),i=void 0,!ka||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Wl(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Bn(l),o===null)return;if(a=o.tag,a===5||a===6){r=s=o;continue e}l=l.parentNode}}r=r.return}ip(function(){var u=s,h=Lu(n),d=[];e:{var c=Ap.get(t);if(c!==void 0){var _=Wu,v=t;switch(t){case"keypress":if(Ks(n)===0)break e;case"keydown":case"keyup":_=r_;break;case"focusin":v="focus",_=Ol;break;case"focusout":v="blur",_=Ol;break;case"beforeblur":case"afterblur":_=Ol;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=Pd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=Vy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=o_;break;case Rp:case Pp:case Dp:_=Ky;break;case bp:_=a_;break;case"scroll":_=$y;break;case"wheel":_=c_;break;case"copy":case"cut":case"paste":_=qy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=bd}var C=(e&4)!==0,O=!C&&t==="scroll",g=C?c!==null?c+"Capture":null:c;C=[];for(var f=u,m;f!==null;){m=f;var x=m.stateNode;if(m.tag===5&&x!==null&&(m=x,g!==null&&(x=Di(f,g),x!=null&&C.push(zi(f,x,m)))),O)break;f=f.return}0<C.length&&(c=new _(c,v,null,n,h),d.push({event:c,listeners:C}))}}if(!(e&7)){e:{if(c=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",c&&n!==Ea&&(v=n.relatedTarget||n.fromElement)&&(Bn(v)||v[Zt]))break e;if((_||c)&&(c=h.window===h?h:(c=h.ownerDocument)?c.defaultView||c.parentWindow:window,_?(v=n.relatedTarget||n.toElement,_=u,v=v?Bn(v):null,v!==null&&(O=sr(v),v!==O||v.tag!==5&&v.tag!==6)&&(v=null)):(_=null,v=u),_!==v)){if(C=Pd,x="onMouseLeave",g="onMouseEnter",f="mouse",(t==="pointerout"||t==="pointerover")&&(C=bd,x="onPointerLeave",g="onPointerEnter",f="pointer"),O=_==null?c:pr(_),m=v==null?c:pr(v),c=new C(x,f+"leave",_,n,h),c.target=O,c.relatedTarget=m,x=null,Bn(h)===u&&(C=new C(g,f+"enter",v,n,h),C.target=m,C.relatedTarget=O,x=C),O=x,_&&v)t:{for(C=_,g=v,f=0,m=C;m;m=lr(m))f++;for(m=0,x=g;x;x=lr(x))m++;for(;0<f-m;)C=lr(C),f--;for(;0<m-f;)g=lr(g),m--;for(;f--;){if(C===g||g!==null&&C===g.alternate)break t;C=lr(C),g=lr(g)}C=null}else C=null;_!==null&&$d(d,c,_,C,!1),v!==null&&O!==null&&$d(d,O,v,C,!0)}}e:{if(c=u?pr(u):window,_=c.nodeName&&c.nodeName.toLowerCase(),_==="select"||_==="input"&&c.type==="file")var T=y_;else if(Od(c))if(Ep)T=x_;else{T=v_;var b=__}else(_=c.nodeName)&&_.toLowerCase()==="input"&&(c.type==="checkbox"||c.type==="radio")&&(T=w_);if(T&&(T=T(t,u))){Sp(d,T,n,h);break e}b&&b(t,c,u),t==="focusout"&&(b=c._wrapperState)&&b.controlled&&c.type==="number"&&va(c,"number",c.value)}switch(b=u?pr(u):window,t){case"focusin":(Od(b)||b.contentEditable==="true")&&(hr=b,Da=u,vi=null);break;case"focusout":vi=Da=hr=null;break;case"mousedown":ba=!0;break;case"contextmenu":case"mouseup":case"dragend":ba=!1,Ud(d,n,h);break;case"selectionchange":if(E_)break;case"keydown":case"keyup":Ud(d,n,h)}var P;if(Hu)e:{switch(t){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else dr?xp(t,n)&&(D="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(D="onCompositionStart");D&&(wp&&n.locale!=="ko"&&(dr||D!=="onCompositionStart"?D==="onCompositionEnd"&&dr&&(P=vp()):(mn=h,Bu="value"in mn?mn.value:mn.textContent,dr=!0)),b=co(u,D),0<b.length&&(D=new Dd(D,t,null,n,h),d.push({event:D,listeners:b}),P?D.data=P:(P=Cp(n),P!==null&&(D.data=P)))),(P=h_?f_(t,n):p_(t,n))&&(u=co(u,"onBeforeInput"),0<u.length&&(h=new Dd("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:u}),h.data=P))}Mp(d,e)})}function zi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function co(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Di(t,n),s!=null&&r.unshift(zi(t,s,i)),s=Di(t,e),s!=null&&r.push(zi(t,s,i))),t=t.return}return r}function lr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function $d(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&u!==null&&(l=u,i?(a=Di(n,s),a!=null&&o.unshift(zi(n,a,l))):i||(a=Di(n,s),a!=null&&o.push(zi(n,a,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var T_=/\r\n?/g,R_=/\u0000|\uFFFD/g;function Hd(t){return(typeof t=="string"?t:""+t).replace(T_,`
`).replace(R_,"")}function Os(t,e,n){if(e=Hd(e),Hd(t)!==e&&n)throw Error(S(425))}function ho(){}var Aa=null,Ma=null;function Oa(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var La=typeof setTimeout=="function"?setTimeout:void 0,P_=typeof clearTimeout=="function"?clearTimeout:void 0,Vd=typeof Promise=="function"?Promise:void 0,D_=typeof queueMicrotask=="function"?queueMicrotask:typeof Vd<"u"?function(t){return Vd.resolve(null).then(t).catch(b_)}:La;function b_(t){setTimeout(function(){throw t})}function $l(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Mi(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Mi(e)}function wn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Gd(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Gr=Math.random().toString(36).slice(2),Ut="__reactFiber$"+Gr,ji="__reactProps$"+Gr,Zt="__reactContainer$"+Gr,Fa="__reactEvents$"+Gr,A_="__reactListeners$"+Gr,M_="__reactHandles$"+Gr;function Bn(t){var e=t[Ut];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Zt]||n[Ut]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Gd(t);t!==null;){if(n=t[Ut])return n;t=Gd(t)}return e}t=n,n=t.parentNode}return null}function ss(t){return t=t[Ut]||t[Zt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function pr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(S(33))}function Xo(t){return t[ji]||null}var za=[],mr=-1;function An(t){return{current:t}}function ae(t){0>mr||(t.current=za[mr],za[mr]=null,mr--)}function se(t,e){mr++,za[mr]=t.current,t.current=e}var Rn={},Be=An(Rn),Ze=An(!1),Yn=Rn;function Mr(t,e){var n=t.type.contextTypes;if(!n)return Rn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function et(t){return t=t.childContextTypes,t!=null}function fo(){ae(Ze),ae(Be)}function Qd(t,e,n){if(Be.current!==Rn)throw Error(S(168));se(Be,e),se(Ze,n)}function Lp(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(S(108,_y(t)||"Unknown",i));return fe({},n,r)}function po(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Rn,Yn=Be.current,se(Be,t),se(Ze,Ze.current),!0}function Kd(t,e,n){var r=t.stateNode;if(!r)throw Error(S(169));n?(t=Lp(t,e,Yn),r.__reactInternalMemoizedMergedChildContext=t,ae(Ze),ae(Be),se(Be,t)):ae(Ze),se(Ze,n)}var Gt=null,Jo=!1,Hl=!1;function Fp(t){Gt===null?Gt=[t]:Gt.push(t)}function O_(t){Jo=!0,Fp(t)}function Mn(){if(!Hl&&Gt!==null){Hl=!0;var t=0,e=Z;try{var n=Gt;for(Z=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Gt=null,Jo=!1}catch(i){throw Gt!==null&&(Gt=Gt.slice(t+1)),ap(Fu,Mn),i}finally{Z=e,Hl=!1}}return null}var gr=[],yr=0,mo=null,go=0,ct=[],dt=0,qn=null,Qt=1,Kt="";function Fn(t,e){gr[yr++]=go,gr[yr++]=mo,mo=t,go=e}function zp(t,e,n){ct[dt++]=Qt,ct[dt++]=Kt,ct[dt++]=qn,qn=t;var r=Qt;t=Kt;var i=32-Tt(r)-1;r&=~(1<<i),n+=1;var s=32-Tt(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Qt=1<<32-Tt(e)+i|n<<i|r,Kt=s+t}else Qt=1<<s|n<<i|r,Kt=t}function Gu(t){t.return!==null&&(Fn(t,1),zp(t,1,0))}function Qu(t){for(;t===mo;)mo=gr[--yr],gr[yr]=null,go=gr[--yr],gr[yr]=null;for(;t===qn;)qn=ct[--dt],ct[dt]=null,Kt=ct[--dt],ct[dt]=null,Qt=ct[--dt],ct[dt]=null}var ot=null,st=null,ce=!1,Et=null;function jp(t,e){var n=ht(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Yd(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ot=t,st=wn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ot=t,st=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=qn!==null?{id:Qt,overflow:Kt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ht(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ot=t,st=null,!0):!1;default:return!1}}function ja(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ua(t){if(ce){var e=st;if(e){var n=e;if(!Yd(t,e)){if(ja(t))throw Error(S(418));e=wn(n.nextSibling);var r=ot;e&&Yd(t,e)?jp(r,n):(t.flags=t.flags&-4097|2,ce=!1,ot=t)}}else{if(ja(t))throw Error(S(418));t.flags=t.flags&-4097|2,ce=!1,ot=t}}}function qd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ot=t}function Ls(t){if(t!==ot)return!1;if(!ce)return qd(t),ce=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Oa(t.type,t.memoizedProps)),e&&(e=st)){if(ja(t))throw Up(),Error(S(418));for(;e;)jp(t,e),e=wn(e.nextSibling)}if(qd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(S(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){st=wn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}st=null}}else st=ot?wn(t.stateNode.nextSibling):null;return!0}function Up(){for(var t=st;t;)t=wn(t.nextSibling)}function Or(){st=ot=null,ce=!1}function Ku(t){Et===null?Et=[t]:Et.push(t)}var L_=on.ReactCurrentBatchConfig;function Ct(t,e){if(t&&t.defaultProps){e=fe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var yo=An(null),_o=null,_r=null,Yu=null;function qu(){Yu=_r=_o=null}function Xu(t){var e=yo.current;ae(yo),t._currentValue=e}function Ba(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function kr(t,e){_o=t,Yu=_r=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(qe=!0),t.firstContext=null)}function pt(t){var e=t._currentValue;if(Yu!==t)if(t={context:t,memoizedValue:e,next:null},_r===null){if(_o===null)throw Error(S(308));_r=t,_o.dependencies={lanes:0,firstContext:t}}else _r=_r.next=t;return e}var Wn=null;function Ju(t){Wn===null?Wn=[t]:Wn.push(t)}function Bp(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Ju(e)):(n.next=i.next,i.next=n),e.interleaved=n,en(t,r)}function en(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var hn=!1;function Zu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Wp(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function qt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function xn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,q&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,en(t,n)}return i=r.interleaved,i===null?(e.next=e,Ju(r)):(e.next=i.next,i.next=e),r.interleaved=e,en(t,n)}function Ys(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,zu(t,n)}}function Xd(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function vo(t,e,n,r){var i=t.updateQueue;hn=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,u=a.next;a.next=null,o===null?s=u:o.next=u,o=a;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=a))}if(s!==null){var d=i.baseState;o=0,h=u=a=null,l=s;do{var c=l.lane,_=l.eventTime;if((r&c)===c){h!==null&&(h=h.next={eventTime:_,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=t,C=l;switch(c=e,_=n,C.tag){case 1:if(v=C.payload,typeof v=="function"){d=v.call(_,d,c);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=C.payload,c=typeof v=="function"?v.call(_,d,c):v,c==null)break e;d=fe({},d,c);break e;case 2:hn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,c=i.effects,c===null?i.effects=[l]:c.push(l))}else _={eventTime:_,lane:c,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=_,a=d):h=h.next=_,o|=c;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;c=l,l=c.next,c.next=null,i.lastBaseUpdate=c,i.shared.pending=null}}while(1);if(h===null&&(a=d),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Jn|=o,t.lanes=o,t.memoizedState=d}}function Jd(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(S(191,i));i.call(r)}}}var $p=new Bf.Component().refs;function Wa(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:fe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Zo={isMounted:function(t){return(t=t._reactInternals)?sr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=He(),i=Sn(t),s=qt(r,i);s.payload=e,n!=null&&(s.callback=n),e=xn(t,s,i),e!==null&&(Rt(e,t,i,r),Ys(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=He(),i=Sn(t),s=qt(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=xn(t,s,i),e!==null&&(Rt(e,t,i,r),Ys(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=He(),r=Sn(t),i=qt(n,r);i.tag=2,e!=null&&(i.callback=e),e=xn(t,i,r),e!==null&&(Rt(e,t,r,n),Ys(e,t,r))}};function Zd(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Li(n,r)||!Li(i,s):!0}function Hp(t,e,n){var r=!1,i=Rn,s=e.contextType;return typeof s=="object"&&s!==null?s=pt(s):(i=et(e)?Yn:Be.current,r=e.contextTypes,s=(r=r!=null)?Mr(t,i):Rn),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Zo,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function eh(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Zo.enqueueReplaceState(e,e.state,null)}function $a(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=$p,Zu(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=pt(s):(s=et(e)?Yn:Be.current,i.context=Mr(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Wa(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Zo.enqueueReplaceState(i,i.state,null),vo(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ri(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(S(309));var r=n.stateNode}if(!r)throw Error(S(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;l===$p&&(l=i.refs={}),o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(S(284));if(!n._owner)throw Error(S(290,t))}return t}function Fs(t,e){throw t=Object.prototype.toString.call(e),Error(S(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function th(t){var e=t._init;return e(t._payload)}function Vp(t){function e(g,f){if(t){var m=g.deletions;m===null?(g.deletions=[f],g.flags|=16):m.push(f)}}function n(g,f){if(!t)return null;for(;f!==null;)e(g,f),f=f.sibling;return null}function r(g,f){for(g=new Map;f!==null;)f.key!==null?g.set(f.key,f):g.set(f.index,f),f=f.sibling;return g}function i(g,f){return g=En(g,f),g.index=0,g.sibling=null,g}function s(g,f,m){return g.index=m,t?(m=g.alternate,m!==null?(m=m.index,m<f?(g.flags|=2,f):m):(g.flags|=2,f)):(g.flags|=1048576,f)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function l(g,f,m,x){return f===null||f.tag!==6?(f=Xl(m,g.mode,x),f.return=g,f):(f=i(f,m),f.return=g,f)}function a(g,f,m,x){var T=m.type;return T===cr?h(g,f,m.props.children,x,m.key):f!==null&&(f.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===dn&&th(T)===f.type)?(x=i(f,m.props),x.ref=ri(g,f,m),x.return=g,x):(x=to(m.type,m.key,m.props,null,g.mode,x),x.ref=ri(g,f,m),x.return=g,x)}function u(g,f,m,x){return f===null||f.tag!==4||f.stateNode.containerInfo!==m.containerInfo||f.stateNode.implementation!==m.implementation?(f=Jl(m,g.mode,x),f.return=g,f):(f=i(f,m.children||[]),f.return=g,f)}function h(g,f,m,x,T){return f===null||f.tag!==7?(f=Qn(m,g.mode,x,T),f.return=g,f):(f=i(f,m),f.return=g,f)}function d(g,f,m){if(typeof f=="string"&&f!==""||typeof f=="number")return f=Xl(""+f,g.mode,m),f.return=g,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case ks:return m=to(f.type,f.key,f.props,null,g.mode,m),m.ref=ri(g,null,f),m.return=g,m;case ur:return f=Jl(f,g.mode,m),f.return=g,f;case dn:var x=f._init;return d(g,x(f._payload),m)}if(di(f)||Jr(f))return f=Qn(f,g.mode,m,null),f.return=g,f;Fs(g,f)}return null}function c(g,f,m,x){var T=f!==null?f.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return T!==null?null:l(g,f,""+m,x);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case ks:return m.key===T?a(g,f,m,x):null;case ur:return m.key===T?u(g,f,m,x):null;case dn:return T=m._init,c(g,f,T(m._payload),x)}if(di(m)||Jr(m))return T!==null?null:h(g,f,m,x,null);Fs(g,m)}return null}function _(g,f,m,x,T){if(typeof x=="string"&&x!==""||typeof x=="number")return g=g.get(m)||null,l(f,g,""+x,T);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ks:return g=g.get(x.key===null?m:x.key)||null,a(f,g,x,T);case ur:return g=g.get(x.key===null?m:x.key)||null,u(f,g,x,T);case dn:var b=x._init;return _(g,f,m,b(x._payload),T)}if(di(x)||Jr(x))return g=g.get(m)||null,h(f,g,x,T,null);Fs(f,x)}return null}function v(g,f,m,x){for(var T=null,b=null,P=f,D=f=0,ue=null;P!==null&&D<m.length;D++){P.index>D?(ue=P,P=null):ue=P.sibling;var $=c(g,P,m[D],x);if($===null){P===null&&(P=ue);break}t&&P&&$.alternate===null&&e(g,P),f=s($,f,D),b===null?T=$:b.sibling=$,b=$,P=ue}if(D===m.length)return n(g,P),ce&&Fn(g,D),T;if(P===null){for(;D<m.length;D++)P=d(g,m[D],x),P!==null&&(f=s(P,f,D),b===null?T=P:b.sibling=P,b=P);return ce&&Fn(g,D),T}for(P=r(g,P);D<m.length;D++)ue=_(P,g,D,m[D],x),ue!==null&&(t&&ue.alternate!==null&&P.delete(ue.key===null?D:ue.key),f=s(ue,f,D),b===null?T=ue:b.sibling=ue,b=ue);return t&&P.forEach(function(Qe){return e(g,Qe)}),ce&&Fn(g,D),T}function C(g,f,m,x){var T=Jr(m);if(typeof T!="function")throw Error(S(150));if(m=T.call(m),m==null)throw Error(S(151));for(var b=T=null,P=f,D=f=0,ue=null,$=m.next();P!==null&&!$.done;D++,$=m.next()){P.index>D?(ue=P,P=null):ue=P.sibling;var Qe=c(g,P,$.value,x);if(Qe===null){P===null&&(P=ue);break}t&&P&&Qe.alternate===null&&e(g,P),f=s(Qe,f,D),b===null?T=Qe:b.sibling=Qe,b=Qe,P=ue}if($.done)return n(g,P),ce&&Fn(g,D),T;if(P===null){for(;!$.done;D++,$=m.next())$=d(g,$.value,x),$!==null&&(f=s($,f,D),b===null?T=$:b.sibling=$,b=$);return ce&&Fn(g,D),T}for(P=r(g,P);!$.done;D++,$=m.next())$=_(P,g,D,$.value,x),$!==null&&(t&&$.alternate!==null&&P.delete($.key===null?D:$.key),f=s($,f,D),b===null?T=$:b.sibling=$,b=$);return t&&P.forEach(function(On){return e(g,On)}),ce&&Fn(g,D),T}function O(g,f,m,x){if(typeof m=="object"&&m!==null&&m.type===cr&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case ks:e:{for(var T=m.key,b=f;b!==null;){if(b.key===T){if(T=m.type,T===cr){if(b.tag===7){n(g,b.sibling),f=i(b,m.props.children),f.return=g,g=f;break e}}else if(b.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===dn&&th(T)===b.type){n(g,b.sibling),f=i(b,m.props),f.ref=ri(g,b,m),f.return=g,g=f;break e}n(g,b);break}else e(g,b);b=b.sibling}m.type===cr?(f=Qn(m.props.children,g.mode,x,m.key),f.return=g,g=f):(x=to(m.type,m.key,m.props,null,g.mode,x),x.ref=ri(g,f,m),x.return=g,g=x)}return o(g);case ur:e:{for(b=m.key;f!==null;){if(f.key===b)if(f.tag===4&&f.stateNode.containerInfo===m.containerInfo&&f.stateNode.implementation===m.implementation){n(g,f.sibling),f=i(f,m.children||[]),f.return=g,g=f;break e}else{n(g,f);break}else e(g,f);f=f.sibling}f=Jl(m,g.mode,x),f.return=g,g=f}return o(g);case dn:return b=m._init,O(g,f,b(m._payload),x)}if(di(m))return v(g,f,m,x);if(Jr(m))return C(g,f,m,x);Fs(g,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,f!==null&&f.tag===6?(n(g,f.sibling),f=i(f,m),f.return=g,g=f):(n(g,f),f=Xl(m,g.mode,x),f.return=g,g=f),o(g)):n(g,f)}return O}var Lr=Vp(!0),Gp=Vp(!1),os={},Wt=An(os),Ui=An(os),Bi=An(os);function $n(t){if(t===os)throw Error(S(174));return t}function ec(t,e){switch(se(Bi,e),se(Ui,t),se(Wt,os),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:xa(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=xa(e,t)}ae(Wt),se(Wt,e)}function Fr(){ae(Wt),ae(Ui),ae(Bi)}function Qp(t){$n(Bi.current);var e=$n(Wt.current),n=xa(e,t.type);e!==n&&(se(Ui,t),se(Wt,n))}function tc(t){Ui.current===t&&(ae(Wt),ae(Ui))}var de=An(0);function wo(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Vl=[];function nc(){for(var t=0;t<Vl.length;t++)Vl[t]._workInProgressVersionPrimary=null;Vl.length=0}var qs=on.ReactCurrentDispatcher,Gl=on.ReactCurrentBatchConfig,Xn=0,he=null,Ee=null,Te=null,xo=!1,wi=!1,Wi=0,F_=0;function Fe(){throw Error(S(321))}function rc(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Dt(t[n],e[n]))return!1;return!0}function ic(t,e,n,r,i,s){if(Xn=s,he=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,qs.current=t===null||t.memoizedState===null?B_:W_,t=n(r,i),wi){s=0;do{if(wi=!1,Wi=0,25<=s)throw Error(S(301));s+=1,Te=Ee=null,e.updateQueue=null,qs.current=$_,t=n(r,i)}while(wi)}if(qs.current=Co,e=Ee!==null&&Ee.next!==null,Xn=0,Te=Ee=he=null,xo=!1,e)throw Error(S(300));return t}function sc(){var t=Wi!==0;return Wi=0,t}function jt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Te===null?he.memoizedState=Te=t:Te=Te.next=t,Te}function mt(){if(Ee===null){var t=he.alternate;t=t!==null?t.memoizedState:null}else t=Ee.next;var e=Te===null?he.memoizedState:Te.next;if(e!==null)Te=e,Ee=t;else{if(t===null)throw Error(S(310));Ee=t,t={memoizedState:Ee.memoizedState,baseState:Ee.baseState,baseQueue:Ee.baseQueue,queue:Ee.queue,next:null},Te===null?he.memoizedState=Te=t:Te=Te.next=t}return Te}function $i(t,e){return typeof e=="function"?e(t):e}function Ql(t){var e=mt(),n=e.queue;if(n===null)throw Error(S(311));n.lastRenderedReducer=t;var r=Ee,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,a=null,u=s;do{var h=u.lane;if((Xn&h)===h)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=d,o=r):a=a.next=d,he.lanes|=h,Jn|=h}u=u.next}while(u!==null&&u!==s);a===null?o=r:a.next=l,Dt(r,e.memoizedState)||(qe=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,he.lanes|=s,Jn|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Kl(t){var e=mt(),n=e.queue;if(n===null)throw Error(S(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Dt(s,e.memoizedState)||(qe=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Kp(){}function Yp(t,e){var n=he,r=mt(),i=e(),s=!Dt(r.memoizedState,i);if(s&&(r.memoizedState=i,qe=!0),r=r.queue,oc(Jp.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Te!==null&&Te.memoizedState.tag&1){if(n.flags|=2048,Hi(9,Xp.bind(null,n,r,i,e),void 0,null),De===null)throw Error(S(349));Xn&30||qp(n,e,i)}return i}function qp(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=he.updateQueue,e===null?(e={lastEffect:null,stores:null},he.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Xp(t,e,n,r){e.value=n,e.getSnapshot=r,Zp(e)&&em(t)}function Jp(t,e,n){return n(function(){Zp(e)&&em(t)})}function Zp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Dt(t,n)}catch{return!0}}function em(t){var e=en(t,1);e!==null&&Rt(e,t,1,-1)}function nh(t){var e=jt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:t},e.queue=t,t=t.dispatch=U_.bind(null,he,t),[e.memoizedState,t]}function Hi(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=he.updateQueue,e===null?(e={lastEffect:null,stores:null},he.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function tm(){return mt().memoizedState}function Xs(t,e,n,r){var i=jt();he.flags|=t,i.memoizedState=Hi(1|e,n,void 0,r===void 0?null:r)}function el(t,e,n,r){var i=mt();r=r===void 0?null:r;var s=void 0;if(Ee!==null){var o=Ee.memoizedState;if(s=o.destroy,r!==null&&rc(r,o.deps)){i.memoizedState=Hi(e,n,s,r);return}}he.flags|=t,i.memoizedState=Hi(1|e,n,s,r)}function rh(t,e){return Xs(8390656,8,t,e)}function oc(t,e){return el(2048,8,t,e)}function nm(t,e){return el(4,2,t,e)}function rm(t,e){return el(4,4,t,e)}function im(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function sm(t,e,n){return n=n!=null?n.concat([t]):null,el(4,4,im.bind(null,e,t),n)}function lc(){}function om(t,e){var n=mt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&rc(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function lm(t,e){var n=mt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&rc(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function am(t,e,n){return Xn&21?(Dt(n,e)||(n=dp(),he.lanes|=n,Jn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,qe=!0),t.memoizedState=n)}function z_(t,e){var n=Z;Z=n!==0&&4>n?n:4,t(!0);var r=Gl.transition;Gl.transition={};try{t(!1),e()}finally{Z=n,Gl.transition=r}}function um(){return mt().memoizedState}function j_(t,e,n){var r=Sn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},cm(t))dm(e,n);else if(n=Bp(t,e,n,r),n!==null){var i=He();Rt(n,t,r,i),hm(n,e,r)}}function U_(t,e,n){var r=Sn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(cm(t))dm(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,Dt(l,o)){var a=e.interleaved;a===null?(i.next=i,Ju(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=Bp(t,e,i,r),n!==null&&(i=He(),Rt(n,t,r,i),hm(n,e,r))}}function cm(t){var e=t.alternate;return t===he||e!==null&&e===he}function dm(t,e){wi=xo=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function hm(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,zu(t,n)}}var Co={readContext:pt,useCallback:Fe,useContext:Fe,useEffect:Fe,useImperativeHandle:Fe,useInsertionEffect:Fe,useLayoutEffect:Fe,useMemo:Fe,useReducer:Fe,useRef:Fe,useState:Fe,useDebugValue:Fe,useDeferredValue:Fe,useTransition:Fe,useMutableSource:Fe,useSyncExternalStore:Fe,useId:Fe,unstable_isNewReconciler:!1},B_={readContext:pt,useCallback:function(t,e){return jt().memoizedState=[t,e===void 0?null:e],t},useContext:pt,useEffect:rh,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Xs(4194308,4,im.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Xs(4194308,4,t,e)},useInsertionEffect:function(t,e){return Xs(4,2,t,e)},useMemo:function(t,e){var n=jt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=jt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=j_.bind(null,he,t),[r.memoizedState,t]},useRef:function(t){var e=jt();return t={current:t},e.memoizedState=t},useState:nh,useDebugValue:lc,useDeferredValue:function(t){return jt().memoizedState=t},useTransition:function(){var t=nh(!1),e=t[0];return t=z_.bind(null,t[1]),jt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=he,i=jt();if(ce){if(n===void 0)throw Error(S(407));n=n()}else{if(n=e(),De===null)throw Error(S(349));Xn&30||qp(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,rh(Jp.bind(null,r,s,t),[t]),r.flags|=2048,Hi(9,Xp.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=jt(),e=De.identifierPrefix;if(ce){var n=Kt,r=Qt;n=(r&~(1<<32-Tt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Wi++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=F_++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},W_={readContext:pt,useCallback:om,useContext:pt,useEffect:oc,useImperativeHandle:sm,useInsertionEffect:nm,useLayoutEffect:rm,useMemo:lm,useReducer:Ql,useRef:tm,useState:function(){return Ql($i)},useDebugValue:lc,useDeferredValue:function(t){var e=mt();return am(e,Ee.memoizedState,t)},useTransition:function(){var t=Ql($i)[0],e=mt().memoizedState;return[t,e]},useMutableSource:Kp,useSyncExternalStore:Yp,useId:um,unstable_isNewReconciler:!1},$_={readContext:pt,useCallback:om,useContext:pt,useEffect:oc,useImperativeHandle:sm,useInsertionEffect:nm,useLayoutEffect:rm,useMemo:lm,useReducer:Kl,useRef:tm,useState:function(){return Kl($i)},useDebugValue:lc,useDeferredValue:function(t){var e=mt();return Ee===null?e.memoizedState=t:am(e,Ee.memoizedState,t)},useTransition:function(){var t=Kl($i)[0],e=mt().memoizedState;return[t,e]},useMutableSource:Kp,useSyncExternalStore:Yp,useId:um,unstable_isNewReconciler:!1};function zr(t,e){try{var n="",r=e;do n+=yy(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Yl(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ha(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var H_=typeof WeakMap=="function"?WeakMap:Map;function fm(t,e,n){n=qt(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Eo||(Eo=!0,eu=r),Ha(t,e)},n}function pm(t,e,n){n=qt(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Ha(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Ha(t,e),typeof r!="function"&&(Cn===null?Cn=new Set([this]):Cn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function ih(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new H_;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=iv.bind(null,t,e,n),e.then(t,t))}function sh(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function oh(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=qt(-1,1),e.tag=2,xn(n,e,1))),n.lanes|=1),t)}var V_=on.ReactCurrentOwner,qe=!1;function $e(t,e,n,r){e.child=t===null?Gp(e,null,n,r):Lr(e,t.child,n,r)}function lh(t,e,n,r,i){n=n.render;var s=e.ref;return kr(e,i),r=ic(t,e,n,r,s,i),n=sc(),t!==null&&!qe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,tn(t,e,i)):(ce&&n&&Gu(e),e.flags|=1,$e(t,e,r,i),e.child)}function ah(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!mc(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,mm(t,e,s,r,i)):(t=to(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Li,n(o,r)&&t.ref===e.ref)return tn(t,e,i)}return e.flags|=1,t=En(s,r),t.ref=e.ref,t.return=e,e.child=t}function mm(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Li(s,r)&&t.ref===e.ref)if(qe=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(qe=!0);else return e.lanes=t.lanes,tn(t,e,i)}return Va(t,e,n,r,i)}function gm(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},se(wr,it),it|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,se(wr,it),it|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,se(wr,it),it|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,se(wr,it),it|=r;return $e(t,e,i,n),e.child}function ym(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Va(t,e,n,r,i){var s=et(n)?Yn:Be.current;return s=Mr(e,s),kr(e,i),n=ic(t,e,n,r,s,i),r=sc(),t!==null&&!qe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,tn(t,e,i)):(ce&&r&&Gu(e),e.flags|=1,$e(t,e,n,i),e.child)}function uh(t,e,n,r,i){if(et(n)){var s=!0;po(e)}else s=!1;if(kr(e,i),e.stateNode===null)Js(t,e),Hp(e,n,r),$a(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var a=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=pt(u):(u=et(n)?Yn:Be.current,u=Mr(e,u));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==u)&&eh(e,o,r,u),hn=!1;var c=e.memoizedState;o.state=c,vo(e,r,o,i),a=e.memoizedState,l!==r||c!==a||Ze.current||hn?(typeof h=="function"&&(Wa(e,n,h,r),a=e.memoizedState),(l=hn||Zd(e,n,l,r,c,a,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),o.props=r,o.state=a,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Wp(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Ct(e.type,l),o.props=u,d=e.pendingProps,c=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=pt(a):(a=et(n)?Yn:Be.current,a=Mr(e,a));var _=n.getDerivedStateFromProps;(h=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||c!==a)&&eh(e,o,r,a),hn=!1,c=e.memoizedState,o.state=c,vo(e,r,o,i);var v=e.memoizedState;l!==d||c!==v||Ze.current||hn?(typeof _=="function"&&(Wa(e,n,_,r),v=e.memoizedState),(u=hn||Zd(e,n,u,r,c,v,a)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,a)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&c===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&c===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=a,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&c===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&c===t.memoizedState||(e.flags|=1024),r=!1)}return Ga(t,e,n,r,s,i)}function Ga(t,e,n,r,i,s){ym(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Kd(e,n,!1),tn(t,e,s);r=e.stateNode,V_.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Lr(e,t.child,null,s),e.child=Lr(e,null,l,s)):$e(t,e,l,s),e.memoizedState=r.state,i&&Kd(e,n,!0),e.child}function _m(t){var e=t.stateNode;e.pendingContext?Qd(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Qd(t,e.context,!1),ec(t,e.containerInfo)}function ch(t,e,n,r,i){return Or(),Ku(i),e.flags|=256,$e(t,e,n,r),e.child}var Qa={dehydrated:null,treeContext:null,retryLane:0};function Ka(t){return{baseLanes:t,cachePool:null,transitions:null}}function vm(t,e,n){var r=e.pendingProps,i=de.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),se(de,i&1),t===null)return Ua(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=rl(o,r,0,null),t=Qn(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Ka(n),e.memoizedState=Qa,t):ac(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return G_(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=En(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=En(l,s):(s=Qn(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Ka(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Qa,r}return s=t.child,t=s.sibling,r=En(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function ac(t,e){return e=rl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function zs(t,e,n,r){return r!==null&&Ku(r),Lr(e,t.child,null,n),t=ac(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function G_(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Yl(Error(S(422))),zs(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=rl({mode:"visible",children:r.children},i,0,null),s=Qn(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Lr(e,t.child,null,o),e.child.memoizedState=Ka(o),e.memoizedState=Qa,s);if(!(e.mode&1))return zs(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(S(419)),r=Yl(s,r,void 0),zs(t,e,o,r)}if(l=(o&t.childLanes)!==0,qe||l){if(r=De,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,en(t,i),Rt(r,t,i,-1))}return pc(),r=Yl(Error(S(421))),zs(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=sv.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,st=wn(i.nextSibling),ot=e,ce=!0,Et=null,t!==null&&(ct[dt++]=Qt,ct[dt++]=Kt,ct[dt++]=qn,Qt=t.id,Kt=t.overflow,qn=e),e=ac(e,r.children),e.flags|=4096,e)}function dh(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ba(t.return,e,n)}function ql(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function wm(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if($e(t,e,r.children,n),r=de.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&dh(t,n,e);else if(t.tag===19)dh(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(se(de,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&wo(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ql(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&wo(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}ql(e,!0,n,null,s);break;case"together":ql(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Js(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function tn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Jn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(S(153));if(e.child!==null){for(t=e.child,n=En(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=En(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Q_(t,e,n){switch(e.tag){case 3:_m(e),Or();break;case 5:Qp(e);break;case 1:et(e.type)&&po(e);break;case 4:ec(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;se(yo,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(se(de,de.current&1),e.flags|=128,null):n&e.child.childLanes?vm(t,e,n):(se(de,de.current&1),t=tn(t,e,n),t!==null?t.sibling:null);se(de,de.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return wm(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),se(de,de.current),r)break;return null;case 22:case 23:return e.lanes=0,gm(t,e,n)}return tn(t,e,n)}var xm,Ya,Cm,Sm;xm=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ya=function(){};Cm=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,$n(Wt.current);var s=null;switch(n){case"input":i=ya(t,i),r=ya(t,r),s=[];break;case"select":i=fe({},i,{value:void 0}),r=fe({},r,{value:void 0}),s=[];break;case"textarea":i=wa(t,i),r=wa(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ho)}Ca(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ri.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var a=r[u];if(l=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(s||(s=[]),s.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ri.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&oe("scroll",t),s||l===a||(s=[])):(s=s||[]).push(u,a))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};Sm=function(t,e,n,r){n!==r&&(e.flags|=4)};function ii(t,e){if(!ce)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ze(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function K_(t,e,n){var r=e.pendingProps;switch(Qu(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ze(e),null;case 1:return et(e.type)&&fo(),ze(e),null;case 3:return r=e.stateNode,Fr(),ae(Ze),ae(Be),nc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ls(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Et!==null&&(ru(Et),Et=null))),Ya(t,e),ze(e),null;case 5:tc(e);var i=$n(Bi.current);if(n=e.type,t!==null&&e.stateNode!=null)Cm(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(S(166));return ze(e),null}if(t=$n(Wt.current),Ls(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Ut]=e,r[ji]=s,t=(e.mode&1)!==0,n){case"dialog":oe("cancel",r),oe("close",r);break;case"iframe":case"object":case"embed":oe("load",r);break;case"video":case"audio":for(i=0;i<fi.length;i++)oe(fi[i],r);break;case"source":oe("error",r);break;case"img":case"image":case"link":oe("error",r),oe("load",r);break;case"details":oe("toggle",r);break;case"input":wd(r,s),oe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},oe("invalid",r);break;case"textarea":Cd(r,s),oe("invalid",r)}Ca(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Os(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Os(r.textContent,l,t),i=["children",""+l]):Ri.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&oe("scroll",r)}switch(n){case"input":Is(r),xd(r,s,!0);break;case"textarea":Is(r),Sd(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ho)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=qf(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Ut]=e,t[ji]=r,xm(t,e,!1,!1),e.stateNode=t;e:{switch(o=Sa(n,r),n){case"dialog":oe("cancel",t),oe("close",t),i=r;break;case"iframe":case"object":case"embed":oe("load",t),i=r;break;case"video":case"audio":for(i=0;i<fi.length;i++)oe(fi[i],t);i=r;break;case"source":oe("error",t),i=r;break;case"img":case"image":case"link":oe("error",t),oe("load",t),i=r;break;case"details":oe("toggle",t),i=r;break;case"input":wd(t,r),i=ya(t,r),oe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=fe({},r,{value:void 0}),oe("invalid",t);break;case"textarea":Cd(t,r),i=wa(t,r),oe("invalid",t);break;default:i=r}Ca(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?Zf(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&Xf(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&Pi(t,a):typeof a=="number"&&Pi(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ri.hasOwnProperty(s)?a!=null&&s==="onScroll"&&oe("scroll",t):a!=null&&bu(t,s,a,o))}switch(n){case"input":Is(t),xd(t,r,!1);break;case"textarea":Is(t),Sd(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Tn(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Cr(t,!!r.multiple,s,!1):r.defaultValue!=null&&Cr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ho)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ze(e),null;case 6:if(t&&e.stateNode!=null)Sm(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(S(166));if(n=$n(Bi.current),$n(Wt.current),Ls(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ut]=e,(s=r.nodeValue!==n)&&(t=ot,t!==null))switch(t.tag){case 3:Os(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Os(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ut]=e,e.stateNode=r}return ze(e),null;case 13:if(ae(de),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ce&&st!==null&&e.mode&1&&!(e.flags&128))Up(),Or(),e.flags|=98560,s=!1;else if(s=Ls(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(S(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(S(317));s[Ut]=e}else Or(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ze(e),s=!1}else Et!==null&&(ru(Et),Et=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||de.current&1?ke===0&&(ke=3):pc())),e.updateQueue!==null&&(e.flags|=4),ze(e),null);case 4:return Fr(),Ya(t,e),t===null&&Fi(e.stateNode.containerInfo),ze(e),null;case 10:return Xu(e.type._context),ze(e),null;case 17:return et(e.type)&&fo(),ze(e),null;case 19:if(ae(de),s=e.memoizedState,s===null)return ze(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ii(s,!1);else{if(ke!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=wo(t),o!==null){for(e.flags|=128,ii(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return se(de,de.current&1|2),e.child}t=t.sibling}s.tail!==null&&we()>jr&&(e.flags|=128,r=!0,ii(s,!1),e.lanes=4194304)}else{if(!r)if(t=wo(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ii(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ce)return ze(e),null}else 2*we()-s.renderingStartTime>jr&&n!==1073741824&&(e.flags|=128,r=!0,ii(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=we(),e.sibling=null,n=de.current,se(de,r?n&1|2:n&1),e):(ze(e),null);case 22:case 23:return fc(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?it&1073741824&&(ze(e),e.subtreeFlags&6&&(e.flags|=8192)):ze(e),null;case 24:return null;case 25:return null}throw Error(S(156,e.tag))}function Y_(t,e){switch(Qu(e),e.tag){case 1:return et(e.type)&&fo(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Fr(),ae(Ze),ae(Be),nc(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return tc(e),null;case 13:if(ae(de),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(S(340));Or()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ae(de),null;case 4:return Fr(),null;case 10:return Xu(e.type._context),null;case 22:case 23:return fc(),null;case 24:return null;default:return null}}var js=!1,je=!1,q_=typeof WeakSet=="function"?WeakSet:Set,R=null;function vr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ge(t,e,r)}else n.current=null}function qa(t,e,n){try{n()}catch(r){ge(t,e,r)}}var hh=!1;function X_(t,e){if(Aa=ao,t=Ip(),Vu(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,u=0,h=0,d=t,c=null;t:for(;;){for(var _;d!==n||i!==0&&d.nodeType!==3||(l=o+i),d!==s||r!==0&&d.nodeType!==3||(a=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(_=d.firstChild)!==null;)c=d,d=_;for(;;){if(d===t)break t;if(c===n&&++u===i&&(l=o),c===s&&++h===r&&(a=o),(_=d.nextSibling)!==null)break;d=c,c=d.parentNode}d=_}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ma={focusedElem:t,selectionRange:n},ao=!1,R=e;R!==null;)if(e=R,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,R=t;else for(;R!==null;){e=R;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var C=v.memoizedProps,O=v.memoizedState,g=e.stateNode,f=g.getSnapshotBeforeUpdate(e.elementType===e.type?C:Ct(e.type,C),O);g.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var m=e.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(S(163))}}catch(x){ge(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,R=t;break}R=e.return}return v=hh,hh=!1,v}function xi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&qa(e,n,s)}i=i.next}while(i!==r)}}function tl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Xa(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Em(t){var e=t.alternate;e!==null&&(t.alternate=null,Em(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ut],delete e[ji],delete e[Fa],delete e[A_],delete e[M_])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Nm(t){return t.tag===5||t.tag===3||t.tag===4}function fh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Nm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ja(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ho));else if(r!==4&&(t=t.child,t!==null))for(Ja(t,e,n),t=t.sibling;t!==null;)Ja(t,e,n),t=t.sibling}function Za(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Za(t,e,n),t=t.sibling;t!==null;)Za(t,e,n),t=t.sibling}var Ae=null,St=!1;function cn(t,e,n){for(n=n.child;n!==null;)km(t,e,n),n=n.sibling}function km(t,e,n){if(Bt&&typeof Bt.onCommitFiberUnmount=="function")try{Bt.onCommitFiberUnmount(Qo,n)}catch{}switch(n.tag){case 5:je||vr(n,e);case 6:var r=Ae,i=St;Ae=null,cn(t,e,n),Ae=r,St=i,Ae!==null&&(St?(t=Ae,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ae.removeChild(n.stateNode));break;case 18:Ae!==null&&(St?(t=Ae,n=n.stateNode,t.nodeType===8?$l(t.parentNode,n):t.nodeType===1&&$l(t,n),Mi(t)):$l(Ae,n.stateNode));break;case 4:r=Ae,i=St,Ae=n.stateNode.containerInfo,St=!0,cn(t,e,n),Ae=r,St=i;break;case 0:case 11:case 14:case 15:if(!je&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&qa(n,e,o),i=i.next}while(i!==r)}cn(t,e,n);break;case 1:if(!je&&(vr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ge(n,e,l)}cn(t,e,n);break;case 21:cn(t,e,n);break;case 22:n.mode&1?(je=(r=je)||n.memoizedState!==null,cn(t,e,n),je=r):cn(t,e,n);break;default:cn(t,e,n)}}function ph(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new q_),e.forEach(function(r){var i=ov.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function xt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ae=l.stateNode,St=!1;break e;case 3:Ae=l.stateNode.containerInfo,St=!0;break e;case 4:Ae=l.stateNode.containerInfo,St=!0;break e}l=l.return}if(Ae===null)throw Error(S(160));km(s,o,i),Ae=null,St=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){ge(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Im(e,t),e=e.sibling}function Im(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(xt(e,t),zt(t),r&4){try{xi(3,t,t.return),tl(3,t)}catch(C){ge(t,t.return,C)}try{xi(5,t,t.return)}catch(C){ge(t,t.return,C)}}break;case 1:xt(e,t),zt(t),r&512&&n!==null&&vr(n,n.return);break;case 5:if(xt(e,t),zt(t),r&512&&n!==null&&vr(n,n.return),t.flags&32){var i=t.stateNode;try{Pi(i,"")}catch(C){ge(t,t.return,C)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Kf(i,s),Sa(l,o);var u=Sa(l,s);for(o=0;o<a.length;o+=2){var h=a[o],d=a[o+1];h==="style"?Zf(i,d):h==="dangerouslySetInnerHTML"?Xf(i,d):h==="children"?Pi(i,d):bu(i,h,d,u)}switch(l){case"input":_a(i,s);break;case"textarea":Yf(i,s);break;case"select":var c=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var _=s.value;_!=null?Cr(i,!!s.multiple,_,!1):c!==!!s.multiple&&(s.defaultValue!=null?Cr(i,!!s.multiple,s.defaultValue,!0):Cr(i,!!s.multiple,s.multiple?[]:"",!1))}i[ji]=s}catch(C){ge(t,t.return,C)}}break;case 6:if(xt(e,t),zt(t),r&4){if(t.stateNode===null)throw Error(S(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(C){ge(t,t.return,C)}}break;case 3:if(xt(e,t),zt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Mi(e.containerInfo)}catch(C){ge(t,t.return,C)}break;case 4:xt(e,t),zt(t);break;case 13:xt(e,t),zt(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(dc=we())),r&4&&ph(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(je=(u=je)||h,xt(e,t),je=u):xt(e,t),zt(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(R=t,h=t.child;h!==null;){for(d=R=h;R!==null;){switch(c=R,_=c.child,c.tag){case 0:case 11:case 14:case 15:xi(4,c,c.return);break;case 1:vr(c,c.return);var v=c.stateNode;if(typeof v.componentWillUnmount=="function"){r=c,n=c.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(C){ge(r,n,C)}}break;case 5:vr(c,c.return);break;case 22:if(c.memoizedState!==null){gh(d);continue}}_!==null?(_.return=c,R=_):gh(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=d.stateNode,a=d.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=Jf("display",o))}catch(C){ge(t,t.return,C)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(C){ge(t,t.return,C)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:xt(e,t),zt(t),r&4&&ph(t);break;case 21:break;default:xt(e,t),zt(t)}}function zt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Nm(n)){var r=n;break e}n=n.return}throw Error(S(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Pi(i,""),r.flags&=-33);var s=fh(t);Za(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=fh(t);Ja(t,l,o);break;default:throw Error(S(161))}}catch(a){ge(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function J_(t,e,n){R=t,Tm(t)}function Tm(t,e,n){for(var r=(t.mode&1)!==0;R!==null;){var i=R,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||js;if(!o){var l=i.alternate,a=l!==null&&l.memoizedState!==null||je;l=js;var u=je;if(js=o,(je=a)&&!u)for(R=i;R!==null;)o=R,a=o.child,o.tag===22&&o.memoizedState!==null?yh(i):a!==null?(a.return=o,R=a):yh(i);for(;s!==null;)R=s,Tm(s),s=s.sibling;R=i,js=l,je=u}mh(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,R=s):mh(t)}}function mh(t){for(;R!==null;){var e=R;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:je||tl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!je)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Ct(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Jd(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Jd(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Mi(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(S(163))}je||e.flags&512&&Xa(e)}catch(c){ge(e,e.return,c)}}if(e===t){R=null;break}if(n=e.sibling,n!==null){n.return=e.return,R=n;break}R=e.return}}function gh(t){for(;R!==null;){var e=R;if(e===t){R=null;break}var n=e.sibling;if(n!==null){n.return=e.return,R=n;break}R=e.return}}function yh(t){for(;R!==null;){var e=R;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{tl(4,e)}catch(a){ge(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){ge(e,i,a)}}var s=e.return;try{Xa(e)}catch(a){ge(e,s,a)}break;case 5:var o=e.return;try{Xa(e)}catch(a){ge(e,o,a)}}}catch(a){ge(e,e.return,a)}if(e===t){R=null;break}var l=e.sibling;if(l!==null){l.return=e.return,R=l;break}R=e.return}}var Z_=Math.ceil,So=on.ReactCurrentDispatcher,uc=on.ReactCurrentOwner,ft=on.ReactCurrentBatchConfig,q=0,De=null,Ce=null,Oe=0,it=0,wr=An(0),ke=0,Vi=null,Jn=0,nl=0,cc=0,Ci=null,Ye=null,dc=0,jr=1/0,Vt=null,Eo=!1,eu=null,Cn=null,Us=!1,gn=null,No=0,Si=0,tu=null,Zs=-1,eo=0;function He(){return q&6?we():Zs!==-1?Zs:Zs=we()}function Sn(t){return t.mode&1?q&2&&Oe!==0?Oe&-Oe:L_.transition!==null?(eo===0&&(eo=dp()),eo):(t=Z,t!==0||(t=window.event,t=t===void 0?16:_p(t.type)),t):1}function Rt(t,e,n,r){if(50<Si)throw Si=0,tu=null,Error(S(185));rs(t,n,r),(!(q&2)||t!==De)&&(t===De&&(!(q&2)&&(nl|=n),ke===4&&pn(t,Oe)),tt(t,r),n===1&&q===0&&!(e.mode&1)&&(jr=we()+500,Jo&&Mn()))}function tt(t,e){var n=t.callbackNode;Ly(t,e);var r=lo(t,t===De?Oe:0);if(r===0)n!==null&&kd(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&kd(n),e===1)t.tag===0?O_(_h.bind(null,t)):Fp(_h.bind(null,t)),D_(function(){!(q&6)&&Mn()}),n=null;else{switch(hp(r)){case 1:n=Fu;break;case 4:n=up;break;case 16:n=oo;break;case 536870912:n=cp;break;default:n=oo}n=Lm(n,Rm.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Rm(t,e){if(Zs=-1,eo=0,q&6)throw Error(S(327));var n=t.callbackNode;if(Ir()&&t.callbackNode!==n)return null;var r=lo(t,t===De?Oe:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ko(t,r);else{e=r;var i=q;q|=2;var s=Dm();(De!==t||Oe!==e)&&(Vt=null,jr=we()+500,Gn(t,e));do try{nv();break}catch(l){Pm(t,l)}while(1);qu(),So.current=s,q=i,Ce!==null?e=0:(De=null,Oe=0,e=ke)}if(e!==0){if(e===2&&(i=Ta(t),i!==0&&(r=i,e=nu(t,i))),e===1)throw n=Vi,Gn(t,0),pn(t,r),tt(t,we()),n;if(e===6)pn(t,r);else{if(i=t.current.alternate,!(r&30)&&!ev(i)&&(e=ko(t,r),e===2&&(s=Ta(t),s!==0&&(r=s,e=nu(t,s))),e===1))throw n=Vi,Gn(t,0),pn(t,r),tt(t,we()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(S(345));case 2:zn(t,Ye,Vt);break;case 3:if(pn(t,r),(r&130023424)===r&&(e=dc+500-we(),10<e)){if(lo(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){He(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=La(zn.bind(null,t,Ye,Vt),e);break}zn(t,Ye,Vt);break;case 4:if(pn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Tt(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=we()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Z_(r/1960))-r,10<r){t.timeoutHandle=La(zn.bind(null,t,Ye,Vt),r);break}zn(t,Ye,Vt);break;case 5:zn(t,Ye,Vt);break;default:throw Error(S(329))}}}return tt(t,we()),t.callbackNode===n?Rm.bind(null,t):null}function nu(t,e){var n=Ci;return t.current.memoizedState.isDehydrated&&(Gn(t,e).flags|=256),t=ko(t,e),t!==2&&(e=Ye,Ye=n,e!==null&&ru(e)),t}function ru(t){Ye===null?Ye=t:Ye.push.apply(Ye,t)}function ev(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Dt(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function pn(t,e){for(e&=~cc,e&=~nl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Tt(e),r=1<<n;t[n]=-1,e&=~r}}function _h(t){if(q&6)throw Error(S(327));Ir();var e=lo(t,0);if(!(e&1))return tt(t,we()),null;var n=ko(t,e);if(t.tag!==0&&n===2){var r=Ta(t);r!==0&&(e=r,n=nu(t,r))}if(n===1)throw n=Vi,Gn(t,0),pn(t,e),tt(t,we()),n;if(n===6)throw Error(S(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,zn(t,Ye,Vt),tt(t,we()),null}function hc(t,e){var n=q;q|=1;try{return t(e)}finally{q=n,q===0&&(jr=we()+500,Jo&&Mn())}}function Zn(t){gn!==null&&gn.tag===0&&!(q&6)&&Ir();var e=q;q|=1;var n=ft.transition,r=Z;try{if(ft.transition=null,Z=1,t)return t()}finally{Z=r,ft.transition=n,q=e,!(q&6)&&Mn()}}function fc(){it=wr.current,ae(wr)}function Gn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,P_(n)),Ce!==null)for(n=Ce.return;n!==null;){var r=n;switch(Qu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&fo();break;case 3:Fr(),ae(Ze),ae(Be),nc();break;case 5:tc(r);break;case 4:Fr();break;case 13:ae(de);break;case 19:ae(de);break;case 10:Xu(r.type._context);break;case 22:case 23:fc()}n=n.return}if(De=t,Ce=t=En(t.current,null),Oe=it=e,ke=0,Vi=null,cc=nl=Jn=0,Ye=Ci=null,Wn!==null){for(e=0;e<Wn.length;e++)if(n=Wn[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Wn=null}return t}function Pm(t,e){do{var n=Ce;try{if(qu(),qs.current=Co,xo){for(var r=he.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}xo=!1}if(Xn=0,Te=Ee=he=null,wi=!1,Wi=0,uc.current=null,n===null||n.return===null){ke=1,Vi=e,Ce=null;break}e:{var s=t,o=n.return,l=n,a=e;if(e=Oe,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,h=l,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var c=h.alternate;c?(h.updateQueue=c.updateQueue,h.memoizedState=c.memoizedState,h.lanes=c.lanes):(h.updateQueue=null,h.memoizedState=null)}var _=sh(o);if(_!==null){_.flags&=-257,oh(_,o,l,s,e),_.mode&1&&ih(s,u,e),e=_,a=u;var v=e.updateQueue;if(v===null){var C=new Set;C.add(a),e.updateQueue=C}else v.add(a);break e}else{if(!(e&1)){ih(s,u,e),pc();break e}a=Error(S(426))}}else if(ce&&l.mode&1){var O=sh(o);if(O!==null){!(O.flags&65536)&&(O.flags|=256),oh(O,o,l,s,e),Ku(zr(a,l));break e}}s=a=zr(a,l),ke!==4&&(ke=2),Ci===null?Ci=[s]:Ci.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=fm(s,a,e);Xd(s,g);break e;case 1:l=a;var f=s.type,m=s.stateNode;if(!(s.flags&128)&&(typeof f.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Cn===null||!Cn.has(m)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=pm(s,l,e);Xd(s,x);break e}}s=s.return}while(s!==null)}Am(n)}catch(T){e=T,Ce===n&&n!==null&&(Ce=n=n.return);continue}break}while(1)}function Dm(){var t=So.current;return So.current=Co,t===null?Co:t}function pc(){(ke===0||ke===3||ke===2)&&(ke=4),De===null||!(Jn&268435455)&&!(nl&268435455)||pn(De,Oe)}function ko(t,e){var n=q;q|=2;var r=Dm();(De!==t||Oe!==e)&&(Vt=null,Gn(t,e));do try{tv();break}catch(i){Pm(t,i)}while(1);if(qu(),q=n,So.current=r,Ce!==null)throw Error(S(261));return De=null,Oe=0,ke}function tv(){for(;Ce!==null;)bm(Ce)}function nv(){for(;Ce!==null&&!Iy();)bm(Ce)}function bm(t){var e=Om(t.alternate,t,it);t.memoizedProps=t.pendingProps,e===null?Am(t):Ce=e,uc.current=null}function Am(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Y_(n,e),n!==null){n.flags&=32767,Ce=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ke=6,Ce=null;return}}else if(n=K_(n,e,it),n!==null){Ce=n;return}if(e=e.sibling,e!==null){Ce=e;return}Ce=e=t}while(e!==null);ke===0&&(ke=5)}function zn(t,e,n){var r=Z,i=ft.transition;try{ft.transition=null,Z=1,rv(t,e,n,r)}finally{ft.transition=i,Z=r}return null}function rv(t,e,n,r){do Ir();while(gn!==null);if(q&6)throw Error(S(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(S(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Fy(t,s),t===De&&(Ce=De=null,Oe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Us||(Us=!0,Lm(oo,function(){return Ir(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=ft.transition,ft.transition=null;var o=Z;Z=1;var l=q;q|=4,uc.current=null,X_(t,n),Im(n,t),S_(Ma),ao=!!Aa,Ma=Aa=null,t.current=n,J_(n),Ty(),q=l,Z=o,ft.transition=s}else t.current=n;if(Us&&(Us=!1,gn=t,No=i),s=t.pendingLanes,s===0&&(Cn=null),Dy(n.stateNode),tt(t,we()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Eo)throw Eo=!1,t=eu,eu=null,t;return No&1&&t.tag!==0&&Ir(),s=t.pendingLanes,s&1?t===tu?Si++:(Si=0,tu=t):Si=0,Mn(),null}function Ir(){if(gn!==null){var t=hp(No),e=ft.transition,n=Z;try{if(ft.transition=null,Z=16>t?16:t,gn===null)var r=!1;else{if(t=gn,gn=null,No=0,q&6)throw Error(S(331));var i=q;for(q|=4,R=t.current;R!==null;){var s=R,o=s.child;if(R.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(R=u;R!==null;){var h=R;switch(h.tag){case 0:case 11:case 15:xi(8,h,s)}var d=h.child;if(d!==null)d.return=h,R=d;else for(;R!==null;){h=R;var c=h.sibling,_=h.return;if(Em(h),h===u){R=null;break}if(c!==null){c.return=_,R=c;break}R=_}}}var v=s.alternate;if(v!==null){var C=v.child;if(C!==null){v.child=null;do{var O=C.sibling;C.sibling=null,C=O}while(C!==null)}}R=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,R=o;else e:for(;R!==null;){if(s=R,s.flags&2048)switch(s.tag){case 0:case 11:case 15:xi(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,R=g;break e}R=s.return}}var f=t.current;for(R=f;R!==null;){o=R;var m=o.child;if(o.subtreeFlags&2064&&m!==null)m.return=o,R=m;else e:for(o=f;R!==null;){if(l=R,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:tl(9,l)}}catch(T){ge(l,l.return,T)}if(l===o){R=null;break e}var x=l.sibling;if(x!==null){x.return=l.return,R=x;break e}R=l.return}}if(q=i,Mn(),Bt&&typeof Bt.onPostCommitFiberRoot=="function")try{Bt.onPostCommitFiberRoot(Qo,t)}catch{}r=!0}return r}finally{Z=n,ft.transition=e}}return!1}function vh(t,e,n){e=zr(n,e),e=fm(t,e,1),t=xn(t,e,1),e=He(),t!==null&&(rs(t,1,e),tt(t,e))}function ge(t,e,n){if(t.tag===3)vh(t,t,n);else for(;e!==null;){if(e.tag===3){vh(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Cn===null||!Cn.has(r))){t=zr(n,t),t=pm(e,t,1),e=xn(e,t,1),t=He(),e!==null&&(rs(e,1,t),tt(e,t));break}}e=e.return}}function iv(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=He(),t.pingedLanes|=t.suspendedLanes&n,De===t&&(Oe&n)===n&&(ke===4||ke===3&&(Oe&130023424)===Oe&&500>we()-dc?Gn(t,0):cc|=n),tt(t,e)}function Mm(t,e){e===0&&(t.mode&1?(e=Ps,Ps<<=1,!(Ps&130023424)&&(Ps=4194304)):e=1);var n=He();t=en(t,e),t!==null&&(rs(t,e,n),tt(t,n))}function sv(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Mm(t,n)}function ov(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(S(314))}r!==null&&r.delete(e),Mm(t,n)}var Om;Om=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ze.current)qe=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return qe=!1,Q_(t,e,n);qe=!!(t.flags&131072)}else qe=!1,ce&&e.flags&1048576&&zp(e,go,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Js(t,e),t=e.pendingProps;var i=Mr(e,Be.current);kr(e,n),i=ic(null,e,r,t,i,n);var s=sc();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,et(r)?(s=!0,po(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Zu(e),i.updater=Zo,e.stateNode=i,i._reactInternals=e,$a(e,r,t,n),e=Ga(null,e,r,!0,s,n)):(e.tag=0,ce&&s&&Gu(e),$e(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Js(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=av(r),t=Ct(r,t),i){case 0:e=Va(null,e,r,t,n);break e;case 1:e=uh(null,e,r,t,n);break e;case 11:e=lh(null,e,r,t,n);break e;case 14:e=ah(null,e,r,Ct(r.type,t),n);break e}throw Error(S(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ct(r,i),Va(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ct(r,i),uh(t,e,r,i,n);case 3:e:{if(_m(e),t===null)throw Error(S(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Wp(t,e),vo(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=zr(Error(S(423)),e),e=ch(t,e,r,n,i);break e}else if(r!==i){i=zr(Error(S(424)),e),e=ch(t,e,r,n,i);break e}else for(st=wn(e.stateNode.containerInfo.firstChild),ot=e,ce=!0,Et=null,n=Gp(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Or(),r===i){e=tn(t,e,n);break e}$e(t,e,r,n)}e=e.child}return e;case 5:return Qp(e),t===null&&Ua(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Oa(r,i)?o=null:s!==null&&Oa(r,s)&&(e.flags|=32),ym(t,e),$e(t,e,o,n),e.child;case 6:return t===null&&Ua(e),null;case 13:return vm(t,e,n);case 4:return ec(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Lr(e,null,r,n):$e(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ct(r,i),lh(t,e,r,i,n);case 7:return $e(t,e,e.pendingProps,n),e.child;case 8:return $e(t,e,e.pendingProps.children,n),e.child;case 12:return $e(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,se(yo,r._currentValue),r._currentValue=o,s!==null)if(Dt(s.value,o)){if(s.children===i.children&&!Ze.current){e=tn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=qt(-1,n&-n),a.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?a.next=a:(a.next=h.next,h.next=a),u.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Ba(s.return,n,e),l.lanes|=n;break}a=a.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(S(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Ba(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}$e(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,kr(e,n),i=pt(i),r=r(i),e.flags|=1,$e(t,e,r,n),e.child;case 14:return r=e.type,i=Ct(r,e.pendingProps),i=Ct(r.type,i),ah(t,e,r,i,n);case 15:return mm(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ct(r,i),Js(t,e),e.tag=1,et(r)?(t=!0,po(e)):t=!1,kr(e,n),Hp(e,r,i),$a(e,r,i,n),Ga(null,e,r,!0,t,n);case 19:return wm(t,e,n);case 22:return gm(t,e,n)}throw Error(S(156,e.tag))};function Lm(t,e){return ap(t,e)}function lv(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ht(t,e,n,r){return new lv(t,e,n,r)}function mc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function av(t){if(typeof t=="function")return mc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Mu)return 11;if(t===Ou)return 14}return 2}function En(t,e){var n=t.alternate;return n===null?(n=ht(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function to(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")mc(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case cr:return Qn(n.children,i,s,e);case Au:o=8,i|=8;break;case fa:return t=ht(12,n,e,i|2),t.elementType=fa,t.lanes=s,t;case pa:return t=ht(13,n,e,i),t.elementType=pa,t.lanes=s,t;case ma:return t=ht(19,n,e,i),t.elementType=ma,t.lanes=s,t;case Vf:return rl(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case $f:o=10;break e;case Hf:o=9;break e;case Mu:o=11;break e;case Ou:o=14;break e;case dn:o=16,r=null;break e}throw Error(S(130,t==null?t:typeof t,""))}return e=ht(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Qn(t,e,n,r){return t=ht(7,t,r,e),t.lanes=n,t}function rl(t,e,n,r){return t=ht(22,t,r,e),t.elementType=Vf,t.lanes=n,t.stateNode={isHidden:!1},t}function Xl(t,e,n){return t=ht(6,t,null,e),t.lanes=n,t}function Jl(t,e,n){return e=ht(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function uv(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bl(0),this.expirationTimes=bl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bl(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function gc(t,e,n,r,i,s,o,l,a){return t=new uv(t,e,n,l,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ht(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zu(s),t}function cv(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ur,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Fm(t){if(!t)return Rn;t=t._reactInternals;e:{if(sr(t)!==t||t.tag!==1)throw Error(S(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(et(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(S(171))}if(t.tag===1){var n=t.type;if(et(n))return Lp(t,n,e)}return e}function zm(t,e,n,r,i,s,o,l,a){return t=gc(n,r,!0,t,i,s,o,l,a),t.context=Fm(null),n=t.current,r=He(),i=Sn(n),s=qt(r,i),s.callback=e??null,xn(n,s,i),t.current.lanes=i,rs(t,i,r),tt(t,r),t}function il(t,e,n,r){var i=e.current,s=He(),o=Sn(i);return n=Fm(n),e.context===null?e.context=n:e.pendingContext=n,e=qt(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=xn(i,e,o),t!==null&&(Rt(t,i,o,s),Ys(t,i,o)),o}function Io(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function wh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function yc(t,e){wh(t,e),(t=t.alternate)&&wh(t,e)}function dv(){return null}var jm=typeof reportError=="function"?reportError:function(t){console.error(t)};function _c(t){this._internalRoot=t}sl.prototype.render=_c.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(S(409));il(t,e,null,null)};sl.prototype.unmount=_c.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Zn(function(){il(null,t,null,null)}),e[Zt]=null}};function sl(t){this._internalRoot=t}sl.prototype.unstable_scheduleHydration=function(t){if(t){var e=mp();t={blockedOn:null,target:t,priority:e};for(var n=0;n<fn.length&&e!==0&&e<fn[n].priority;n++);fn.splice(n,0,t),n===0&&yp(t)}};function vc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ol(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function xh(){}function hv(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Io(o);s.call(u)}}var o=zm(e,r,t,0,null,!1,!1,"",xh);return t._reactRootContainer=o,t[Zt]=o.current,Fi(t.nodeType===8?t.parentNode:t),Zn(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var u=Io(a);l.call(u)}}var a=gc(t,0,!1,null,null,!1,!1,"",xh);return t._reactRootContainer=a,t[Zt]=a.current,Fi(t.nodeType===8?t.parentNode:t),Zn(function(){il(e,a,n,r)}),a}function ll(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var a=Io(o);l.call(a)}}il(e,o,t,i)}else o=hv(n,e,t,i,r);return Io(o)}fp=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=hi(e.pendingLanes);n!==0&&(zu(e,n|1),tt(e,we()),!(q&6)&&(jr=we()+500,Mn()))}break;case 13:Zn(function(){var r=en(t,1);if(r!==null){var i=He();Rt(r,t,1,i)}}),yc(t,1)}};ju=function(t){if(t.tag===13){var e=en(t,134217728);if(e!==null){var n=He();Rt(e,t,134217728,n)}yc(t,134217728)}};pp=function(t){if(t.tag===13){var e=Sn(t),n=en(t,e);if(n!==null){var r=He();Rt(n,t,e,r)}yc(t,e)}};mp=function(){return Z};gp=function(t,e){var n=Z;try{return Z=t,e()}finally{Z=n}};Na=function(t,e,n){switch(e){case"input":if(_a(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Xo(r);if(!i)throw Error(S(90));Qf(r),_a(r,i)}}}break;case"textarea":Yf(t,n);break;case"select":e=n.value,e!=null&&Cr(t,!!n.multiple,e,!1)}};np=hc;rp=Zn;var fv={usingClientEntryPoint:!1,Events:[ss,pr,Xo,ep,tp,hc]},si={findFiberByHostInstance:Bn,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},pv={bundleType:si.bundleType,version:si.version,rendererPackageName:si.rendererPackageName,rendererConfig:si.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:on.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=op(t),t===null?null:t.stateNode},findFiberByHostInstance:si.findFiberByHostInstance||dv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bs.isDisabled&&Bs.supportsFiber)try{Qo=Bs.inject(pv),Bt=Bs}catch{}}at.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fv;at.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vc(e))throw Error(S(200));return cv(t,e,null,n)};at.createRoot=function(t,e){if(!vc(t))throw Error(S(299));var n=!1,r="",i=jm;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=gc(t,1,!1,null,null,n,!1,r,i),t[Zt]=e.current,Fi(t.nodeType===8?t.parentNode:t),new _c(e)};at.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(S(188)):(t=Object.keys(t).join(","),Error(S(268,t)));return t=op(e),t=t===null?null:t.stateNode,t};at.flushSync=function(t){return Zn(t)};at.hydrate=function(t,e,n){if(!ol(e))throw Error(S(200));return ll(null,t,e,!0,n)};at.hydrateRoot=function(t,e,n){if(!vc(t))throw Error(S(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=jm;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=zm(e,null,t,1,n??null,i,!1,s,o),t[Zt]=e.current,Fi(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new sl(e)};at.render=function(t,e,n){if(!ol(e))throw Error(S(200));return ll(null,t,e,!1,n)};at.unmountComponentAtNode=function(t){if(!ol(t))throw Error(S(40));return t._reactRootContainer?(Zn(function(){ll(null,null,t,!1,function(){t._reactRootContainer=null,t[Zt]=null})}),!0):!1};at.unstable_batchedUpdates=hc;at.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ol(n))throw Error(S(200));if(t==null||t._reactInternals===void 0)throw Error(S(38));return ll(t,e,n,!1,r)};at.version="18.2.0-next-9e3b772b8-20220608";function Um(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Um)}catch(t){console.error(t)}}Um(),zf.exports=at;var mv=zf.exports,Ch=mv;da.createRoot=Ch.createRoot,da.hydrateRoot=Ch.hydrateRoot;/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gv=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),yv=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),Sh=t=>{const e=yv(t);return e.charAt(0).toUpperCase()+e.slice(1)},Bm=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),_v=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var vv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wv=F.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...l},a)=>F.createElement("svg",{ref:a,...vv,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:Bm("lucide",i),...!s&&!_v(l)&&{"aria-hidden":"true"},...l},[...o.map(([u,h])=>F.createElement(u,h)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=(t,e)=>{const n=F.forwardRef(({className:r,...i},s)=>F.createElement(wv,{ref:s,iconNode:e,className:Bm(`lucide-${gv(Sh(t))}`,`lucide-${t}`,r),...i}));return n.displayName=Sh(t),n};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Cv=We("calendar",xv);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Zl=We("circle-check-big",Sv);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ev=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Eh=We("crown",Ev);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nv=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Nh=We("dollar-sign",Nv);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kv=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Iv=We("eye-off",kv);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tv=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Rv=We("eye",Tv);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pv=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],kh=We("file-text",Pv);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dv=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],Ih=We("hand",Dv);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bv=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],iu=We("plus",bv);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Av=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Mv=We("save",Av);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ov=[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]],Th=We("scissors",Ov);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lv=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Fv=We("share-2",Lv);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zv=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],Rh=We("shuffle",zv);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jv=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],no=We("trophy",jv);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uv=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ph=We("users",Uv);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bv=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],pi=We("x",Bv),Wv=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wm={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N=function(t,e){if(!t)throw Qr(e)},Qr=function(t){return new Error("Firebase Database ("+Wm.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},$v=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],a=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(a&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},wc={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,a=i+2<t.length,u=a?t[i+2]:0,h=s>>2,d=(s&3)<<4|l>>4;let c=(l&15)<<2|u>>6,_=u&63;a||(_=64,o||(c=64)),r.push(n[h],n[d],n[c],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray($m(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):$v(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||u==null||d==null)throw new Hv;const c=s<<2|l>>4;if(r.push(c),u!==64){const _=l<<4&240|u>>2;if(r.push(_),d!==64){const v=u<<6&192|d;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Hv extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Hm=function(t){const e=$m(t);return wc.encodeByteArray(e,!0)},To=function(t){return Hm(t).replace(/\./g,"")},su=function(t){try{return wc.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vv(t){return Vm(void 0,t)}function Vm(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Gv(n)||(t[n]=Vm(t[n],e[n]));return t}function Gv(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv=()=>Qv().__FIREBASE_DEFAULTS__,Yv=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},qv=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&su(t[1]);return e&&JSON.parse(e)},Gm=()=>{try{return Wv()||Kv()||Yv()||qv()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Xv=t=>{var e,n;return(n=(e=Gm())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},Jv=t=>{const e=Xv(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Qm=()=>{var t;return(t=Gm())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Zv(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t},l="";return[To(JSON.stringify(n)),To(JSON.stringify(o)),l].join(".")}const Ei={};function t1(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ei))Ei[e]?t.emulator.push(e):t.prod.push(e);return t}function n1(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Dh=!1;function r1(t,e){if(typeof window>"u"||typeof document>"u"||!xc(window.location.host)||Ei[t]===e||Ei[t]||Dh)return;Ei[t]=e;function n(c){return`__firebase__banner__${c}`}const r="__firebase__banner",s=t1().prod.length>0;function o(){const c=document.getElementById(r);c&&c.remove()}function l(c){c.style.display="flex",c.style.background="#7faaf0",c.style.position="fixed",c.style.bottom="5px",c.style.left="5px",c.style.padding=".5em",c.style.borderRadius="5px",c.style.alignItems="center"}function a(c,_){c.setAttribute("width","24"),c.setAttribute("id",_),c.setAttribute("height","24"),c.setAttribute("viewBox","0 0 24 24"),c.setAttribute("fill","none"),c.style.marginLeft="-6px"}function u(){const c=document.createElement("span");return c.style.cursor="pointer",c.style.marginLeft="16px",c.style.fontSize="24px",c.innerHTML=" &times;",c.onclick=()=>{Dh=!0,o()},c}function h(c,_){c.setAttribute("id",_),c.innerText="Learn more",c.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",c.setAttribute("target","__blank"),c.style.paddingLeft="5px",c.style.textDecoration="underline"}function d(){const c=n1(r),_=n("text"),v=document.getElementById(_)||document.createElement("span"),C=n("learnmore"),O=document.getElementById(C)||document.createElement("a"),g=n("preprendIcon"),f=document.getElementById(g)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(c.created){const m=c.element;l(m),h(O,C);const x=u();a(f,g),m.append(f,v,O,x),document.body.appendChild(m)}s?(v.innerText="Preview backend disconnected.",f.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(f.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i1(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Km(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(i1())}function s1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ym(){return Wm.NODE_ADMIN===!0}function o1(){try{return typeof indexedDB=="object"}catch{return!1}}function l1(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1="FirebaseError";class ls extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=a1,Object.setPrototypeOf(this,ls.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qm.prototype.create)}}class qm{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?u1(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new ls(i,l,r)}}function u1(t,e){return t.replace(c1,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const c1=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gi(t){return JSON.parse(t)}function Pe(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xm=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=Gi(su(s[0])||""),n=Gi(su(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},d1=function(t){const e=Xm(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},h1=function(t){const e=Xm(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ur(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function bh(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ro(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Po(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Ah(s)&&Ah(o)){if(!Po(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Ah(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f1(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const c=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(c<<1|c>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],l=this.chain_[3],a=this.chain_[4],u,h;for(let d=0;d<80;d++){d<40?d<20?(u=l^s&(o^l),h=1518500249):(u=s^o^l,h=1859775393):d<60?(u=s&o|l&(s|o),h=2400959708):(u=s^o^l,h=3395469782);const c=(i<<5|i>>>27)+u+a+h+r[d]&4294967295;a=l,l=o,o=(s<<30|s>>>2)&4294967295,s=i,i=c}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+a&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function Cc(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,N(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},ul=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function as(t){return t&&t._delegate?t._delegate:t}class Qi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new al;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_1(e))try{this.getOrInitializeService({instanceIdentifier:jn})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=jn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=jn){return this.instances.has(e)}getOptions(e=jn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:y1(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=jn){return this.component?this.component.multipleInstances?e:jn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function y1(t){return t===jn?void 0:t}function _1(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new g1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var re;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(re||(re={}));const w1={debug:re.DEBUG,verbose:re.VERBOSE,info:re.INFO,warn:re.WARN,error:re.ERROR,silent:re.SILENT},x1=re.INFO,C1={[re.DEBUG]:"log",[re.VERBOSE]:"log",[re.INFO]:"info",[re.WARN]:"warn",[re.ERROR]:"error"},S1=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=C1[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Jm{constructor(e){this.name=e,this._logLevel=x1,this._logHandler=S1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?w1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,re.DEBUG,...e),this._logHandler(this,re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,re.VERBOSE,...e),this._logHandler(this,re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,re.INFO,...e),this._logHandler(this,re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,re.WARN,...e),this._logHandler(this,re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,re.ERROR,...e),this._logHandler(this,re.ERROR,...e)}}const E1=(t,e)=>e.some(n=>t instanceof n);let Mh,Oh;function N1(){return Mh||(Mh=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function k1(){return Oh||(Oh=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Zm=new WeakMap,ou=new WeakMap,eg=new WeakMap,ea=new WeakMap,Sc=new WeakMap;function I1(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Nn(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Zm.set(n,t)}).catch(()=>{}),Sc.set(e,t),e}function T1(t){if(ou.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});ou.set(t,e)}let lu={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ou.get(t);if(e==="objectStoreNames")return t.objectStoreNames||eg.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Nn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function R1(t){lu=t(lu)}function P1(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ta(this),e,...n);return eg.set(r,e.sort?e.sort():[e]),Nn(r)}:k1().includes(t)?function(...e){return t.apply(ta(this),e),Nn(Zm.get(this))}:function(...e){return Nn(t.apply(ta(this),e))}}function D1(t){return typeof t=="function"?P1(t):(t instanceof IDBTransaction&&T1(t),E1(t,N1())?new Proxy(t,lu):t)}function Nn(t){if(t instanceof IDBRequest)return I1(t);if(ea.has(t))return ea.get(t);const e=D1(t);return e!==t&&(ea.set(t,e),Sc.set(e,t)),e}const ta=t=>Sc.get(t);function b1(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=Nn(o);return r&&o.addEventListener("upgradeneeded",a=>{r(Nn(o.result),a.oldVersion,a.newVersion,Nn(o.transaction),a)}),n&&o.addEventListener("blocked",a=>n(a.oldVersion,a.newVersion,a)),l.then(a=>{s&&a.addEventListener("close",()=>s()),i&&a.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const A1=["get","getKey","getAll","getAllKeys","count"],M1=["put","add","delete","clear"],na=new Map;function Lh(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(na.get(e))return na.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=M1.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||A1.includes(n)))return;const s=async function(o,...l){const a=this.transaction(o,i?"readwrite":"readonly");let u=a.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),i&&a.done]))[0]};return na.set(e,s),s}R1(t=>({...t,get:(e,n,r)=>Lh(e,n)||t.get(e,n,r),has:(e,n)=>!!Lh(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(L1(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function L1(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const au="@firebase/app",Fh="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn=new Jm("@firebase/app"),F1="@firebase/app-compat",z1="@firebase/analytics-compat",j1="@firebase/analytics",U1="@firebase/app-check-compat",B1="@firebase/app-check",W1="@firebase/auth",$1="@firebase/auth-compat",H1="@firebase/database",V1="@firebase/data-connect",G1="@firebase/database-compat",Q1="@firebase/functions",K1="@firebase/functions-compat",Y1="@firebase/installations",q1="@firebase/installations-compat",X1="@firebase/messaging",J1="@firebase/messaging-compat",Z1="@firebase/performance",ew="@firebase/performance-compat",tw="@firebase/remote-config",nw="@firebase/remote-config-compat",rw="@firebase/storage",iw="@firebase/storage-compat",sw="@firebase/firestore",ow="@firebase/ai",lw="@firebase/firestore-compat",aw="firebase",uw="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uu="[DEFAULT]",cw={[au]:"fire-core",[F1]:"fire-core-compat",[j1]:"fire-analytics",[z1]:"fire-analytics-compat",[B1]:"fire-app-check",[U1]:"fire-app-check-compat",[W1]:"fire-auth",[$1]:"fire-auth-compat",[H1]:"fire-rtdb",[V1]:"fire-data-connect",[G1]:"fire-rtdb-compat",[Q1]:"fire-fn",[K1]:"fire-fn-compat",[Y1]:"fire-iid",[q1]:"fire-iid-compat",[X1]:"fire-fcm",[J1]:"fire-fcm-compat",[Z1]:"fire-perf",[ew]:"fire-perf-compat",[tw]:"fire-rc",[nw]:"fire-rc-compat",[rw]:"fire-gcs",[iw]:"fire-gcs-compat",[sw]:"fire-fst",[lw]:"fire-fst-compat",[ow]:"fire-vertex","fire-js":"fire-js",[aw]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Do=new Map,dw=new Map,cu=new Map;function zh(t,e){try{t.container.addComponent(e)}catch(n){nn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function bo(t){const e=t.name;if(cu.has(e))return nn.debug(`There were multiple attempts to register component ${e}.`),!1;cu.set(e,t);for(const n of Do.values())zh(n,t);for(const n of dw.values())zh(n,t);return!0}function hw(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function fw(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},kn=new qm("app","Firebase",pw);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Qi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw kn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gw=uw;function tg(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:uu,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw kn.create("bad-app-name",{appName:String(i)});if(n||(n=Qm()),!n)throw kn.create("no-options");const s=Do.get(i);if(s){if(Po(n,s.options)&&Po(r,s.config))return s;throw kn.create("duplicate-app",{appName:i})}const o=new v1(i);for(const a of cu.values())o.addComponent(a);const l=new mw(n,r,o);return Do.set(i,l),l}function yw(t=uu){const e=Do.get(t);if(!e&&t===uu&&Qm())return tg();if(!e)throw kn.create("no-app",{appName:t});return e}function Tr(t,e,n){let r=cw[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),nn.warn(o.join(" "));return}bo(new Qi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w="firebase-heartbeat-database",vw=1,Ki="firebase-heartbeat-store";let ra=null;function ng(){return ra||(ra=b1(_w,vw,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ki)}catch(n){console.warn(n)}}}}).catch(t=>{throw kn.create("idb-open",{originalErrorMessage:t.message})})),ra}async function ww(t){try{const n=(await ng()).transaction(Ki),r=await n.objectStore(Ki).get(rg(t));return await n.done,r}catch(e){if(e instanceof ls)nn.warn(e.message);else{const n=kn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});nn.warn(n.message)}}}async function jh(t,e){try{const r=(await ng()).transaction(Ki,"readwrite");await r.objectStore(Ki).put(e,rg(t)),await r.done}catch(n){if(n instanceof ls)nn.warn(n.message);else{const r=kn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});nn.warn(r.message)}}}function rg(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw=1024,Cw=30;class Sw{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Nw(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Uh();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>Cw){const o=kw(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){nn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Uh(),{heartbeatsToSend:r,unsentEntries:i}=Ew(this._heartbeatsCache.heartbeats),s=To(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return nn.warn(n),""}}}function Uh(){return new Date().toISOString().substring(0,10)}function Ew(t,e=xw){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Bh(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Bh(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Nw{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return o1()?l1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ww(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return jh(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return jh(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Bh(t){return To(JSON.stringify({version:2,heartbeats:t})).length}function kw(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iw(t){bo(new Qi("platform-logger",e=>new O1(e),"PRIVATE")),bo(new Qi("heartbeat",e=>new Sw(e),"PRIVATE")),Tr(au,Fh,t),Tr(au,Fh,"esm2020"),Tr("fire-js","")}Iw("");const Wh="@firebase/database",$h="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ig="";function Tw(t){ig=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Pe(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Gi(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return ln(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sg=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Rw(e)}}catch{}return new Pw},Hn=sg("localStorage"),du=sg("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rr=new Jm("@firebase/database"),Dw=function(){let t=1;return function(){return t++}}(),og=function(t){const e=m1(t),n=new p1;n.update(e);const r=n.digest();return wc.encodeByteArray(r)},us=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=us.apply(null,r):typeof r=="object"?e+=Pe(r):e+=r,e+=" "}return e};let Kn=null,Hh=!0;const bw=function(t,e){N(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Rr.logLevel=re.VERBOSE,Kn=Rr.log.bind(Rr),e&&du.set("logging_enabled",!0)):typeof t=="function"?Kn=t:(Kn=null,du.remove("logging_enabled"))},Ue=function(...t){if(Hh===!0&&(Hh=!1,Kn===null&&du.get("logging_enabled")===!0&&bw(!0)),Kn){const e=us.apply(null,t);Kn(e)}},cs=function(t){return function(...e){Ue(t,...e)}},hu=function(...t){const e="FIREBASE INTERNAL ERROR: "+us(...t);Rr.error(e)},rn=function(...t){const e=`FIREBASE FATAL ERROR: ${us(...t)}`;throw Rr.error(e),new Error(e)},nt=function(...t){const e="FIREBASE WARNING: "+us(...t);Rr.warn(e)},Aw=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&nt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},lg=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Mw=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Br="[MIN_NAME]",er="[MAX_NAME]",Kr=function(t,e){if(t===e)return 0;if(t===Br||e===er)return-1;if(e===Br||t===er)return 1;{const n=Vh(t),r=Vh(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},Ow=function(t,e){return t===e?0:t<e?-1:1},oi=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Pe(e))},Ec=function(t){if(typeof t!="object"||t===null)return Pe(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Pe(e[r]),n+=":",n+=Ec(t[e[r]]);return n+="}",n},ag=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function rt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const ug=function(t){N(!lg(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,l,a;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(l=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=l+r,o=Math.round(t*Math.pow(2,n-l)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(a=n;a;a-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(a=e;a;a-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();const h=u.join("");let d="";for(a=0;a<64;a+=8){let c=parseInt(h.substr(a,8),2).toString(16);c.length===1&&(c="0"+c),d=d+c}return d.toLowerCase()},Lw=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Fw=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function zw(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const jw=new RegExp("^-?(0*)\\d{1,10}$"),Uw=-2147483648,Bw=2147483647,Vh=function(t){if(jw.test(t)){const e=Number(t);if(e>=Uw&&e<=Bw)return e}return null},Yr=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw nt("Exception was thrown by user callback.",n),e},Math.floor(0))}},Ww=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ni=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,fw(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)==null||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){nt(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Ue("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',nt(e)}}class Pr{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Pr.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nc="5",cg="v",dg="s",hg="r",fg="f",pg=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,mg="ls",gg="p",fu="ac",yg="websocket",_g="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e,n,r,i,s=!1,o="",l=!1,a=!1,u=null){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=a,this.emulatorOptions=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Hn.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Hn.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function Vw(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function wg(t,e,n){N(typeof e=="string","typeof type must == string"),N(typeof n=="object","typeof params must == object");let r;if(e===yg)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===_g)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Vw(t)&&(n.ns=t.namespace);const i=[];return rt(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(){this.counters_={}}incrementCounter(e,n=1){ln(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Vv(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia={},sa={};function kc(t){const e=t.toString();return ia[e]||(ia[e]=new Gw),ia[e]}function Qw(t,e){const n=t.toString();return sa[n]||(sa[n]=e()),sa[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Yr(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gh="start",Yw="close",qw="pLPCommand",Xw="pRTLPCB",xg="id",Cg="pw",Sg="ser",Jw="cb",Zw="seg",ex="ts",tx="d",nx="dframe",Eg=1870,Ng=30,rx=Eg-Ng,ix=25e3,sx=3e4;class xr{constructor(e,n,r,i,s,o,l){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=cs(e),this.stats_=kc(n),this.urlFn=a=>(this.appCheckToken&&(a[fu]=this.appCheckToken),wg(n,_g,a))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Kw(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(sx)),Mw(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ic((...s)=>{const[o,l,a,u,h]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Gh)this.id=l,this.password=a;else if(o===Yw)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,l]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,l)},()=>{this.onClosed_()},this.urlFn);const r={};r[Gh]="t",r[Sg]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[Jw]=this.scriptTagHolder.uniqueCallbackIdentifier),r[cg]=Nc,this.transportSessionId&&(r[dg]=this.transportSessionId),this.lastSessionId&&(r[mg]=this.lastSessionId),this.applicationId&&(r[gg]=this.applicationId),this.appCheckToken&&(r[fu]=this.appCheckToken),typeof location<"u"&&location.hostname&&pg.test(location.hostname)&&(r[hg]=fg);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){xr.forceAllow_=!0}static forceDisallow(){xr.forceDisallow_=!0}static isAvailable(){return xr.forceAllow_?!0:!xr.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Lw()&&!Fw()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Pe(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Hm(n),i=ag(r,rx);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[nx]="t",r[xg]=e,r[Cg]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Pe(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Ic{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Dw(),window[qw+this.uniqueCallbackIdentifier]=e,window[Xw+this.uniqueCallbackIdentifier]=n,this.myIFrame=Ic.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(l){Ue("frame writing exception"),l.stack&&Ue(l.stack),Ue(l)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ue("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[xg]=this.myID,e[Cg]=this.myPW,e[Sg]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Ng+r.length<=Eg;){const o=this.pendingSegs.shift();r=r+"&"+Zw+i+"="+o.seg+"&"+ex+i+"="+o.ts+"&"+tx+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(ix)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Ue("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox=16384,lx=45e3;let Ao=null;typeof MozWebSocket<"u"?Ao=MozWebSocket:typeof WebSocket<"u"&&(Ao=WebSocket);class Nt{constructor(e,n,r,i,s,o,l){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=cs(this.connId),this.stats_=kc(n),this.connURL=Nt.connectionURL_(n,o,l,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[cg]=Nc,typeof location<"u"&&location.hostname&&pg.test(location.hostname)&&(o[hg]=fg),n&&(o[dg]=n),r&&(o[mg]=r),i&&(o[fu]=i),s&&(o[gg]=s),wg(e,yg,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Hn.set("previous_websocket_failure",!0);try{let r;Ym(),this.mySock=new Ao(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){Nt.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Ao!==null&&!Nt.forceDisallow_}static previouslyFailed(){return Hn.isInMemoryStorage||Hn.get("previous_websocket_failure")===!0}markConnectionHealthy(){Hn.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Gi(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(N(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Pe(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=ag(n,ox);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(lx))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Nt.responsesRequiredToBeHealthy=2;Nt.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{static get ALL_TRANSPORTS(){return[xr,Nt]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=Nt&&Nt.isAvailable();let r=n&&!Nt.previouslyFailed();if(e.webSocketOnly&&(n||nt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Nt];else{const i=this.transports_=[];for(const s of Yi.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);Yi.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Yi.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax=6e4,ux=5e3,cx=10*1024,dx=100*1024,oa="t",Qh="d",hx="s",Kh="r",fx="e",Yh="o",qh="a",Xh="n",Jh="p",px="h";class mx{constructor(e,n,r,i,s,o,l,a,u,h){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=l,this.onDisconnect_=a,this.onKill_=u,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=cs("c:"+this.id+":"),this.transportManager_=new Yi(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Ni(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>dx?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>cx?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(oa in e){const n=e[oa];n===qh?this.upgradeIfSecondaryHealthy_():n===Kh?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Yh&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=oi("t",e),r=oi("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Jh,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:qh,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Xh,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=oi("t",e),r=oi("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=oi(oa,e);if(Qh in e){const r=e[Qh];if(n===px){const i={...r};this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===Xh){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===hx?this.onConnectionShutdown_(r):n===Kh?this.onReset_(r):n===fx?hu("Server Error: "+r):n===Yh?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):hu("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Nc!==r&&nt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Ni(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(ax))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ni(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(ux))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Jh,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Hn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(e){this.allowedEvents_=e,this.listeners_={},N(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){N(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo extends Ig{static getInstance(){return new Mo}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Km()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return N(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zh=32,ef=768;class ne{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function X(){return new ne("")}function H(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Pn(t){return t.pieces_.length-t.pieceNum_}function ie(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ne(t.pieces_,e)}function Tg(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function gx(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Rg(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Pg(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ne(e,0)}function Ne(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof ne)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new ne(n,0)}function Q(t){return t.pieceNum_>=t.pieces_.length}function Xe(t,e){const n=H(t),r=H(e);if(n===null)return e;if(n===r)return Xe(ie(t),ie(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Tc(t,e){if(Pn(t)!==Pn(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function kt(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Pn(t)>Pn(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class yx{constructor(e,n){this.errorPrefix_=n,this.parts_=Rg(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=ul(this.parts_[r]);Dg(this)}}function _x(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=ul(e),Dg(t)}function vx(t){const e=t.parts_.pop();t.byteLength_-=ul(e),t.parts_.length>0&&(t.byteLength_-=1)}function Dg(t){if(t.byteLength_>ef)throw new Error(t.errorPrefix_+"has a key path longer than "+ef+" bytes ("+t.byteLength_+").");if(t.parts_.length>Zh)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Zh+") or object contains a cycle "+Un(t))}function Un(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc extends Ig{static getInstance(){return new Rc}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return N(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const li=1e3,wx=60*5*1e3,tf=30*1e3,xx=1.3,Cx=3e4,Sx="server_kill",nf=3;class Xt extends kg{constructor(e,n,r,i,s,o,l,a){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=l,this.authOverride_=a,this.id=Xt.nextPersistentConnectionId_++,this.log_=cs("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=li,this.maxReconnectDelay_=wx,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!Ym())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Rc.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Mo.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(Pe(s)),N(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new al,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const l=o.d;o.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),N(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),N(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const l={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,l),this.connected_&&this.sendListen_(l)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,l=>{const a=l.d,u=l.s;Xt.warnOnListenWarnings_(a,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",l),u!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(u,a))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&ln(e,"w")){const r=Ur(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();nt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||h1(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=tf)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=d1(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),N(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Pe(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):hu("Unrecognized action received from server: "+Pe(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){N(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=li,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=li,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Cx&&(this.reconnectDelay_=li),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*xx)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Xt.nextConnectionId_++,s=this.lastSessionId;let o=!1,l=null;const a=function(){l?l.close():(o=!0,r())},u=function(d){N(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(d)};this.realtime_={close:a,sendRequest:u};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,c]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);o?Ue("getToken() completed but was canceled"):(Ue("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=c&&c.token,l=new mx(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,_=>{nt(_+" ("+this.repoInfo_.toString()+")"),this.interrupt(Sx)},s))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&nt(d),a())}}}interrupt(e){Ue("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Ue("Resuming connection for reason: "+e),delete this.interruptReasons_[e],bh(this.interruptReasons_)&&(this.reconnectDelay_=li,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>Ec(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new ne(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){Ue("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=nf&&(this.reconnectDelay_=tf,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Ue("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=nf&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+ig.replace(/\./g,"-")]=1,Km()?e["framework.cordova"]=1:s1()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Mo.getInstance().currentlyOnline();return bh(this.interruptReasons_)&&e}}Xt.nextPersistentConnectionId_=0;Xt.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new V(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new V(Br,e),i=new V(Br,n);return this.compare(r,i)!==0}minPost(){return V.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ws;class bg extends cl{static get __EMPTY_NODE(){return Ws}static set __EMPTY_NODE(e){Ws=e}compare(e,n){return Kr(e.name,n.name)}isDefinedOn(e){throw Qr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return V.MIN}maxPost(){return new V(er,Ws)}makePost(e,n){return N(typeof e=="string","KeyIndex indexValue must always be a string."),new V(e,Ws)}toString(){return".key"}}const Dr=new bg;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Re{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Re.RED,this.left=i??Je.EMPTY_NODE,this.right=s??Je.EMPTY_NODE}copy(e,n,r,i,s){return new Re(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Je.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Je.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Re.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Re.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Re.RED=!0;Re.BLACK=!1;class Ex{copy(e,n,r,i,s){return this}insert(e,n,r){return new Re(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Je{constructor(e,n=Je.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Je(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Re.BLACK,null,null))}remove(e){return new Je(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Re.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new $s(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new $s(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new $s(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new $s(this.root_,null,this.comparator_,!0,e)}}Je.EMPTY_NODE=new Ex;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nx(t,e){return Kr(t.name,e.name)}function Pc(t,e){return Kr(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pu;function kx(t){pu=t}const Ag=function(t){return typeof t=="number"?"number:"+ug(t):"string:"+t},Mg=function(t){if(t.isLeafNode()){const e=t.val();N(typeof e=="string"||typeof e=="number"||typeof e=="object"&&ln(e,".sv"),"Priority must be a string or number.")}else N(t===pu||t.isEmpty(),"priority of unexpected type.");N(t===pu||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rf;class Ie{static set __childrenNodeConstructor(e){rf=e}static get __childrenNodeConstructor(){return rf}constructor(e,n=Ie.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,N(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Mg(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Ie(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Ie.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Q(e)?this:H(e)===".priority"?this.priorityNode_:Ie.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Ie.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=H(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(N(r!==".priority"||Pn(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Ie.__childrenNodeConstructor.EMPTY_NODE.updateChild(ie(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Ag(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=ug(this.value_):e+=this.value_,this.lazyHash_=og(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Ie.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Ie.__childrenNodeConstructor?-1:(N(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=Ie.VALUE_TYPE_ORDER.indexOf(n),s=Ie.VALUE_TYPE_ORDER.indexOf(r);return N(i>=0,"Unknown leaf type: "+n),N(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Ie.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Og,Lg;function Ix(t){Og=t}function Tx(t){Lg=t}class Rx extends cl{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Kr(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return V.MIN}maxPost(){return new V(er,new Ie("[PRIORITY-POST]",Lg))}makePost(e,n){const r=Og(e);return new V(n,new Ie("[PRIORITY-POST]",r))}toString(){return".priority"}}const ye=new Rx;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px=Math.log(2);class Dx{constructor(e){const n=s=>parseInt(Math.log(s)/Px,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Oo=function(t,e,n,r){t.sort(e);const i=function(a,u){const h=u-a;let d,c;if(h===0)return null;if(h===1)return d=t[a],c=n?n(d):d,new Re(c,d.node,Re.BLACK,null,null);{const _=parseInt(h/2,10)+a,v=i(a,_),C=i(_+1,u);return d=t[_],c=n?n(d):d,new Re(c,d.node,Re.BLACK,v,C)}},s=function(a){let u=null,h=null,d=t.length;const c=function(v,C){const O=d-v,g=d;d-=v;const f=i(O+1,g),m=t[O],x=n?n(m):m;_(new Re(x,m.node,C,null,f))},_=function(v){u?(u.left=v,u=v):(h=v,u=v)};for(let v=0;v<a.count;++v){const C=a.nextBitIsOne(),O=Math.pow(2,a.count-(v+1));C?c(O,Re.BLACK):(c(O,Re.BLACK),c(O,Re.RED))}return h},o=new Dx(t.length),l=s(o);return new Je(r||e,l)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let la;const ar={};class Yt{static get Default(){return N(ar&&ye,"ChildrenNode.ts has not been loaded"),la=la||new Yt({".priority":ar},{".priority":ye}),la}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=Ur(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Je?n:null}hasIndex(e){return ln(this.indexSet_,e.toString())}addIndex(e,n){N(e!==Dr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(V.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let l;i?l=Oo(r,e.getCompare()):l=ar;const a=e.toString(),u={...this.indexSet_};u[a]=e;const h={...this.indexes_};return h[a]=l,new Yt(h,u)}addToIndexes(e,n){const r=Ro(this.indexes_,(i,s)=>{const o=Ur(this.indexSet_,s);if(N(o,"Missing index implementation for "+s),i===ar)if(o.isDefinedOn(e.node)){const l=[],a=n.getIterator(V.Wrap);let u=a.getNext();for(;u;)u.name!==e.name&&l.push(u),u=a.getNext();return l.push(e),Oo(l,o.getCompare())}else return ar;else{const l=n.get(e.name);let a=i;return l&&(a=a.remove(new V(e.name,l))),a.insert(e,e.node)}});return new Yt(r,this.indexSet_)}removeFromIndexes(e,n){const r=Ro(this.indexes_,i=>{if(i===ar)return i;{const s=n.get(e.name);return s?i.remove(new V(e.name,s)):i}});return new Yt(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ai;class j{static get EMPTY_NODE(){return ai||(ai=new j(new Je(Pc),null,Yt.Default))}constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Mg(this.priorityNode_),this.children_.isEmpty()&&N(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ai}updatePriority(e){return this.children_.isEmpty()?this:new j(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?ai:n}}getChild(e){const n=H(e);return n===null?this:this.getImmediateChild(n).getChild(ie(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(N(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new V(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?ai:this.priorityNode_;return new j(i,o,s)}}updateChild(e,n){const r=H(e);if(r===null)return n;{N(H(e)!==".priority"||Pn(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(ie(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(ye,(o,l)=>{n[o]=l.val(e),r++,s&&j.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const l in n)o[l]=n[l];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Ag(this.getPriority().val())+":"),this.forEachChild(ye,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":og(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new V(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new V(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new V(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,V.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,V.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ds?-1:0}withIndex(e){if(e===Dr||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new j(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Dr||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(ye),i=n.getIterator(ye);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Dr?null:this.indexMap_.get(e.toString())}}j.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class bx extends j{constructor(){super(new Je(Pc),j.EMPTY_NODE,Yt.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return j.EMPTY_NODE}isEmpty(){return!1}}const ds=new bx;Object.defineProperties(V,{MIN:{value:new V(Br,j.EMPTY_NODE)},MAX:{value:new V(er,ds)}});bg.__EMPTY_NODE=j.EMPTY_NODE;Ie.__childrenNodeConstructor=j;kx(ds);Tx(ds);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax=!0;function Me(t,e=null){if(t===null)return j.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),N(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Ie(n,Me(e))}if(!(t instanceof Array)&&Ax){const n=[];let r=!1;if(rt(t,(o,l)=>{if(o.substring(0,1)!=="."){const a=Me(l);a.isEmpty()||(r=r||!a.getPriority().isEmpty(),n.push(new V(o,a)))}}),n.length===0)return j.EMPTY_NODE;const s=Oo(n,Nx,o=>o.name,Pc);if(r){const o=Oo(n,ye.getCompare());return new j(s,Me(e),new Yt({".priority":o},{".priority":ye}))}else return new j(s,Me(e),Yt.Default)}else{let n=j.EMPTY_NODE;return rt(t,(r,i)=>{if(ln(t,r)&&r.substring(0,1)!=="."){const s=Me(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Me(e))}}Ix(Me);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx extends cl{constructor(e){super(),this.indexPath_=e,N(!Q(e)&&H(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Kr(e.name,n.name):s}makePost(e,n){const r=Me(e),i=j.EMPTY_NODE.updateChild(this.indexPath_,r);return new V(n,i)}maxPost(){const e=j.EMPTY_NODE.updateChild(this.indexPath_,ds);return new V(er,e)}toString(){return Rg(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox extends cl{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Kr(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return V.MIN}maxPost(){return V.MAX}makePost(e,n){const r=Me(e);return new V(n,r)}toString(){return".value"}}const Lx=new Ox;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fg(t){return{type:"value",snapshotNode:t}}function Wr(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function qi(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Xi(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Fx(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){N(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=e.getImmediateChild(n);return l.getChild(i).equals(r.getChild(i))&&l.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(qi(n,l)):N(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?o.trackChildChange(Wr(n,r)):o.trackChildChange(Xi(n,r,l))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(ye,(i,s)=>{n.hasChild(i)||r.trackChildChange(qi(i,s))}),n.isLeafNode()||n.forEachChild(ye,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(Xi(i,s,o))}else r.trackChildChange(Wr(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?j.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e){this.indexedFilter_=new Dc(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Ji.getStartPost_(e),this.endPost_=Ji.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new V(n,r))||(r=j.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=j.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(j.EMPTY_NODE);const s=this;return n.forEachChild(ye,(o,l)=>{s.matches(new V(o,l))||(i=i.updateImmediateChild(o,j.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Ji(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new V(n,r))||(r=j.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=j.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=j.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const l=s.getNext();if(this.withinDirectionalStart(l))if(this.withinDirectionalEnd(l))i=i.updateImmediateChild(l.name,l.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(j.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){const l=s.getNext();o<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?o++:i=i.updateImmediateChild(l.name,j.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const d=this.index_.getCompare();o=(c,_)=>d(_,c)}else o=this.index_.getCompare();const l=e;N(l.numChildren()===this.limit_,"");const a=new V(n,r),u=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),h=this.rangedFilter_.matches(a);if(l.hasChild(n)){const d=l.getImmediateChild(n);let c=i.getChildAfterChild(this.index_,u,this.reverse_);for(;c!=null&&(c.name===n||l.hasChild(c.name));)c=i.getChildAfterChild(this.index_,c,this.reverse_);const _=c==null?1:o(c,a);if(h&&!r.isEmpty()&&_>=0)return s!=null&&s.trackChildChange(Xi(n,r,d)),l.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(qi(n,d));const C=l.updateImmediateChild(n,j.EMPTY_NODE);return c!=null&&this.rangedFilter_.matches(c)?(s!=null&&s.trackChildChange(Wr(c.name,c.node)),C.updateImmediateChild(c.name,c.node)):C}}else return r.isEmpty()?e:h&&o(u,a)>=0?(s!=null&&(s.trackChildChange(qi(u.name,u.node)),s.trackChildChange(Wr(n,r))),l.updateImmediateChild(n,r).updateImmediateChild(u.name,j.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ye}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return N(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return N(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Br}hasEnd(){return this.endSet_}getIndexEndValue(){return N(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return N(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:er}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return N(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ye}copy(){const e=new bc;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function jx(t){return t.loadsAllData()?new Dc(t.getIndex()):t.hasLimit()?new zx(t):new Ji(t)}function sf(t){const e={};if(t.isDefault())return e;let n;if(t.index_===ye?n="$priority":t.index_===Lx?n="$value":t.index_===Dr?n="$key":(N(t.index_ instanceof Mx,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Pe(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Pe(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Pe(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Pe(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Pe(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function of(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==ye&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo extends kg{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(N(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=cs("p:rest:"),this.listens_={}}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=Lo.getListenId_(e,r),l={};this.listens_[o]=l;const a=sf(e._queryParams);this.restRequest_(s+".json",a,(u,h)=>{let d=h;if(u===404&&(d=null,u=null),u===null&&this.onDataUpdate_(s,d,!1,r),Ur(this.listens_,o)===l){let c;u?u===401?c="permission_denied":c="rest_error:"+u:c="ok",i(c,null)}})}unlisten(e,n){const r=Lo.getListenId_(e,n);delete this.listens_[r]}get(e){const n=sf(e._queryParams),r=e._path.toString(),i=new al;return this.restRequest_(r+".json",n,(s,o)=>{let l=o;s===404&&(l=null,s=null),s===null?(this.onDataUpdate_(r,l,!1,null),i.resolve(l)):i.reject(new Error(l))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+f1(n);this.log_("Sending REST request for "+o);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(r&&l.readyState===4){this.log_("REST Response for "+o+" received. status:",l.status,"response:",l.responseText);let a=null;if(l.status>=200&&l.status<300){try{a=Gi(l.responseText)}catch{nt("Failed to parse JSON response for "+o+": "+l.responseText)}r(null,a)}else l.status!==401&&l.status!==404&&nt("Got unsuccessful REST response for "+o+" Status: "+l.status),r(l.status);r=null}},l.open("GET",o,!0),l.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(){this.rootNode_=j.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fo(){return{value:null,children:new Map}}function zg(t,e,n){if(Q(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=H(e);t.children.has(r)||t.children.set(r,Fo());const i=t.children.get(r);e=ie(e),zg(i,e,n)}}function mu(t,e,n){t.value!==null?n(e,t.value):Bx(t,(r,i)=>{const s=new ne(e.toString()+"/"+r);mu(i,s,n)})}function Bx(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&rt(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lf=10*1e3,$x=30*1e3,Hx=5*60*1e3;class Vx{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Wx(e);const r=lf+($x-lf)*Math.random();Ni(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;rt(e,(i,s)=>{s>0&&ln(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Ni(this.reportStats_.bind(this),Math.floor(Math.random()*2*Hx))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var It;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(It||(It={}));function jg(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Ac(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Mc(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=It.ACK_USER_WRITE,this.source=jg()}operationForChild(e){if(Q(this.path)){if(this.affectedTree.value!=null)return N(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new ne(e));return new zo(X(),n,this.revert)}}else return N(H(this.path)===e,"operationForChild called for unrelated child."),new zo(ie(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,n){this.source=e,this.path=n,this.type=It.LISTEN_COMPLETE}operationForChild(e){return Q(this.path)?new Zi(this.source,X()):new Zi(this.source,ie(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=It.OVERWRITE}operationForChild(e){return Q(this.path)?new tr(this.source,X(),this.snap.getImmediateChild(e)):new tr(this.source,ie(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=It.MERGE}operationForChild(e){if(Q(this.path)){const n=this.children.subtree(new ne(e));return n.isEmpty()?null:n.value?new tr(this.source,X(),n.value):new es(this.source,X(),n)}else return N(H(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new es(this.source,ie(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Q(e))return this.isFullyInitialized()&&!this.filtered_;const n=H(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Qx(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(Fx(o.childName,o.snapshotNode))}),ui(t,i,"child_removed",e,r,n),ui(t,i,"child_added",e,r,n),ui(t,i,"child_moved",s,r,n),ui(t,i,"child_changed",e,r,n),ui(t,i,"value",e,r,n),i}function ui(t,e,n,r,i,s){const o=r.filter(l=>l.type===n);o.sort((l,a)=>Yx(t,l,a)),o.forEach(l=>{const a=Kx(t,l,s);i.forEach(u=>{u.respondsTo(l.type)&&e.push(u.createEvent(a,t.query_))})})}function Kx(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Yx(t,e,n){if(e.childName==null||n.childName==null)throw Qr("Should only compare child_ events.");const r=new V(e.childName,e.snapshotNode),i=new V(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dl(t,e){return{eventCache:t,serverCache:e}}function ki(t,e,n,r){return dl(new nr(e,n,r),t.serverCache)}function Ug(t,e,n,r){return dl(t.eventCache,new nr(e,n,r))}function gu(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function rr(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aa;const qx=()=>(aa||(aa=new Je(Ow)),aa);class le{static fromObject(e){let n=new le(null);return rt(e,(r,i)=>{n=n.set(new ne(r),i)}),n}constructor(e,n=qx()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:X(),value:this.value};if(Q(e))return null;{const r=H(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(ie(e),n);return s!=null?{path:Ne(new ne(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Q(e))return this;{const n=H(e),r=this.children.get(n);return r!==null?r.subtree(ie(e)):new le(null)}}set(e,n){if(Q(e))return new le(n,this.children);{const r=H(e),s=(this.children.get(r)||new le(null)).set(ie(e),n),o=this.children.insert(r,s);return new le(this.value,o)}}remove(e){if(Q(e))return this.children.isEmpty()?new le(null):new le(null,this.children);{const n=H(e),r=this.children.get(n);if(r){const i=r.remove(ie(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new le(null):new le(this.value,s)}else return this}}get(e){if(Q(e))return this.value;{const n=H(e),r=this.children.get(n);return r?r.get(ie(e)):null}}setTree(e,n){if(Q(e))return n;{const r=H(e),s=(this.children.get(r)||new le(null)).setTree(ie(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new le(this.value,o)}}fold(e){return this.fold_(X(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Ne(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,X(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(Q(e))return null;{const s=H(e),o=this.children.get(s);return o?o.findOnPath_(ie(e),Ne(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,X(),n)}foreachOnPath_(e,n,r){if(Q(e))return this;{this.value&&r(n,this.value);const i=H(e),s=this.children.get(i);return s?s.foreachOnPath_(ie(e),Ne(n,i),r):new le(null)}}foreach(e){this.foreach_(X(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Ne(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.writeTree_=e}static empty(){return new Pt(new le(null))}}function Ii(t,e,n){if(Q(e))return new Pt(new le(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=Xe(i,e);return s=s.updateChild(o,n),new Pt(t.writeTree_.set(i,s))}else{const i=new le(n),s=t.writeTree_.setTree(e,i);return new Pt(s)}}}function af(t,e,n){let r=t;return rt(n,(i,s)=>{r=Ii(r,Ne(e,i),s)}),r}function uf(t,e){if(Q(e))return Pt.empty();{const n=t.writeTree_.setTree(e,new le(null));return new Pt(n)}}function yu(t,e){return or(t,e)!=null}function or(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Xe(n.path,e)):null}function cf(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ye,(r,i)=>{e.push(new V(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new V(r,i.value))}),e}function In(t,e){if(Q(e))return t;{const n=or(t,e);return n!=null?new Pt(new le(n)):new Pt(t.writeTree_.subtree(e))}}function _u(t){return t.writeTree_.isEmpty()}function $r(t,e){return Bg(X(),t.writeTree_,e)}function Bg(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(N(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=Bg(Ne(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Ne(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oc(t,e){return Vg(e,t)}function Xx(t,e,n,r,i){N(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Ii(t.visibleWrites,e,n)),t.lastWriteId=r}function Jx(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function Zx(t,e){const n=t.allWrites.findIndex(l=>l.writeId===e);N(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const l=t.allWrites[o];l.visible&&(o>=n&&eC(l,r.path)?i=!1:kt(r.path,l.path)&&(s=!0)),o--}if(i){if(s)return tC(t),!0;if(r.snap)t.visibleWrites=uf(t.visibleWrites,r.path);else{const l=r.children;rt(l,a=>{t.visibleWrites=uf(t.visibleWrites,Ne(r.path,a))})}return!0}else return!1}function eC(t,e){if(t.snap)return kt(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&kt(Ne(t.path,n),e))return!0;return!1}function tC(t){t.visibleWrites=Wg(t.allWrites,nC,X()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function nC(t){return t.visible}function Wg(t,e,n){let r=Pt.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let l;if(s.snap)kt(n,o)?(l=Xe(n,o),r=Ii(r,l,s.snap)):kt(o,n)&&(l=Xe(o,n),r=Ii(r,X(),s.snap.getChild(l)));else if(s.children){if(kt(n,o))l=Xe(n,o),r=af(r,l,s.children);else if(kt(o,n))if(l=Xe(o,n),Q(l))r=af(r,X(),s.children);else{const a=Ur(s.children,H(l));if(a){const u=a.getChild(ie(l));r=Ii(r,X(),u)}}}else throw Qr("WriteRecord should have .snap or .children")}}return r}function $g(t,e,n,r,i){if(!r&&!i){const s=or(t.visibleWrites,e);if(s!=null)return s;{const o=In(t.visibleWrites,e);if(_u(o))return n;if(n==null&&!yu(o,X()))return null;{const l=n||j.EMPTY_NODE;return $r(o,l)}}}else{const s=In(t.visibleWrites,e);if(!i&&_u(s))return n;if(!i&&n==null&&!yu(s,X()))return null;{const o=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(kt(u.path,e)||kt(e,u.path))},l=Wg(t.allWrites,o,e),a=n||j.EMPTY_NODE;return $r(l,a)}}}function rC(t,e,n){let r=j.EMPTY_NODE;const i=or(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ye,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=In(t.visibleWrites,e);return n.forEachChild(ye,(o,l)=>{const a=$r(In(s,new ne(o)),l);r=r.updateImmediateChild(o,a)}),cf(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=In(t.visibleWrites,e);return cf(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function iC(t,e,n,r,i){N(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Ne(e,n);if(yu(t.visibleWrites,s))return null;{const o=In(t.visibleWrites,s);return _u(o)?i.getChild(n):$r(o,i.getChild(n))}}function sC(t,e,n,r){const i=Ne(e,n),s=or(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=In(t.visibleWrites,i);return $r(o,r.getNode().getImmediateChild(n))}else return null}function oC(t,e){return or(t.visibleWrites,e)}function lC(t,e,n,r,i,s,o){let l;const a=In(t.visibleWrites,e),u=or(a,X());if(u!=null)l=u;else if(n!=null)l=$r(a,n);else return[];if(l=l.withIndex(o),!l.isEmpty()&&!l.isLeafNode()){const h=[],d=o.getCompare(),c=s?l.getReverseIteratorFrom(r,o):l.getIteratorFrom(r,o);let _=c.getNext();for(;_&&h.length<i;)d(_,r)!==0&&h.push(_),_=c.getNext();return h}else return[]}function aC(){return{visibleWrites:Pt.empty(),allWrites:[],lastWriteId:-1}}function jo(t,e,n,r){return $g(t.writeTree,t.treePath,e,n,r)}function Lc(t,e){return rC(t.writeTree,t.treePath,e)}function df(t,e,n,r){return iC(t.writeTree,t.treePath,e,n,r)}function Uo(t,e){return oC(t.writeTree,Ne(t.treePath,e))}function uC(t,e,n,r,i,s){return lC(t.writeTree,t.treePath,e,n,r,i,s)}function Fc(t,e,n){return sC(t.writeTree,t.treePath,e,n)}function Hg(t,e){return Vg(Ne(t.treePath,e),t.writeTree)}function Vg(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;N(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),N(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,Xi(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,qi(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,Wr(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,Xi(r,e.snapshotNode,i.oldSnap));else throw Qr("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const Gg=new dC;class zc{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new nr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Fc(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:rr(this.viewCache_),s=uC(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(t){return{filter:t}}function fC(t,e){N(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),N(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function pC(t,e,n,r,i){const s=new cC;let o,l;if(n.type===It.OVERWRITE){const u=n;u.source.fromUser?o=vu(t,e,u.path,u.snap,r,i,s):(N(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered()&&!Q(u.path),o=Bo(t,e,u.path,u.snap,r,i,l,s))}else if(n.type===It.MERGE){const u=n;u.source.fromUser?o=gC(t,e,u.path,u.children,r,i,s):(N(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered(),o=wu(t,e,u.path,u.children,r,i,l,s))}else if(n.type===It.ACK_USER_WRITE){const u=n;u.revert?o=vC(t,e,u.path,r,i,s):o=yC(t,e,u.path,u.affectedTree,r,i,s)}else if(n.type===It.LISTEN_COMPLETE)o=_C(t,e,n.path,r,s);else throw Qr("Unknown operation type: "+n.type);const a=s.getChanges();return mC(e,o,a),{viewCache:o,changes:a}}function mC(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=gu(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(Fg(gu(e)))}}function Qg(t,e,n,r,i,s){const o=e.eventCache;if(Uo(r,n)!=null)return e;{let l,a;if(Q(n))if(N(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=rr(e),h=u instanceof j?u:j.EMPTY_NODE,d=Lc(r,h);l=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const u=jo(r,rr(e));l=t.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{const u=H(n);if(u===".priority"){N(Pn(n)===1,"Can't have a priority with additional path components");const h=o.getNode();a=e.serverCache.getNode();const d=df(r,n,h,a);d!=null?l=t.filter.updatePriority(h,d):l=o.getNode()}else{const h=ie(n);let d;if(o.isCompleteForChild(u)){a=e.serverCache.getNode();const c=df(r,n,o.getNode(),a);c!=null?d=o.getNode().getImmediateChild(u).updateChild(h,c):d=o.getNode().getImmediateChild(u)}else d=Fc(r,u,e.serverCache);d!=null?l=t.filter.updateChild(o.getNode(),u,d,h,i,s):l=o.getNode()}}return ki(e,l,o.isFullyInitialized()||Q(n),t.filter.filtersNodes())}}function Bo(t,e,n,r,i,s,o,l){const a=e.serverCache;let u;const h=o?t.filter:t.filter.getIndexedFilter();if(Q(n))u=h.updateFullNode(a.getNode(),r,null);else if(h.filtersNodes()&&!a.isFiltered()){const _=a.getNode().updateChild(n,r);u=h.updateFullNode(a.getNode(),_,null)}else{const _=H(n);if(!a.isCompleteForPath(n)&&Pn(n)>1)return e;const v=ie(n),O=a.getNode().getImmediateChild(_).updateChild(v,r);_===".priority"?u=h.updatePriority(a.getNode(),O):u=h.updateChild(a.getNode(),_,O,v,Gg,null)}const d=Ug(e,u,a.isFullyInitialized()||Q(n),h.filtersNodes()),c=new zc(i,d,s);return Qg(t,d,n,i,c,l)}function vu(t,e,n,r,i,s,o){const l=e.eventCache;let a,u;const h=new zc(i,e,s);if(Q(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),a=ki(e,u,!0,t.filter.filtersNodes());else{const d=H(n);if(d===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),a=ki(e,u,l.isFullyInitialized(),l.isFiltered());else{const c=ie(n),_=l.getNode().getImmediateChild(d);let v;if(Q(c))v=r;else{const C=h.getCompleteChild(d);C!=null?Tg(c)===".priority"&&C.getChild(Pg(c)).isEmpty()?v=C:v=C.updateChild(c,r):v=j.EMPTY_NODE}if(_.equals(v))a=e;else{const C=t.filter.updateChild(l.getNode(),d,v,c,h,o);a=ki(e,C,l.isFullyInitialized(),t.filter.filtersNodes())}}}return a}function hf(t,e){return t.eventCache.isCompleteForChild(e)}function gC(t,e,n,r,i,s,o){let l=e;return r.foreach((a,u)=>{const h=Ne(n,a);hf(e,H(h))&&(l=vu(t,l,h,u,i,s,o))}),r.foreach((a,u)=>{const h=Ne(n,a);hf(e,H(h))||(l=vu(t,l,h,u,i,s,o))}),l}function ff(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function wu(t,e,n,r,i,s,o,l){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let a=e,u;Q(n)?u=r:u=new le(null).setTree(n,r);const h=e.serverCache.getNode();return u.children.inorderTraversal((d,c)=>{if(h.hasChild(d)){const _=e.serverCache.getNode().getImmediateChild(d),v=ff(t,_,c);a=Bo(t,a,new ne(d),v,i,s,o,l)}}),u.children.inorderTraversal((d,c)=>{const _=!e.serverCache.isCompleteForChild(d)&&c.value===null;if(!h.hasChild(d)&&!_){const v=e.serverCache.getNode().getImmediateChild(d),C=ff(t,v,c);a=Bo(t,a,new ne(d),C,i,s,o,l)}}),a}function yC(t,e,n,r,i,s,o){if(Uo(i,n)!=null)return e;const l=e.serverCache.isFiltered(),a=e.serverCache;if(r.value!=null){if(Q(n)&&a.isFullyInitialized()||a.isCompleteForPath(n))return Bo(t,e,n,a.getNode().getChild(n),i,s,l,o);if(Q(n)){let u=new le(null);return a.getNode().forEachChild(Dr,(h,d)=>{u=u.set(new ne(h),d)}),wu(t,e,n,u,i,s,l,o)}else return e}else{let u=new le(null);return r.foreach((h,d)=>{const c=Ne(n,h);a.isCompleteForPath(c)&&(u=u.set(h,a.getNode().getChild(c)))}),wu(t,e,n,u,i,s,l,o)}}function _C(t,e,n,r,i){const s=e.serverCache,o=Ug(e,s.getNode(),s.isFullyInitialized()||Q(n),s.isFiltered());return Qg(t,o,n,r,Gg,i)}function vC(t,e,n,r,i,s){let o;if(Uo(r,n)!=null)return e;{const l=new zc(r,e,i),a=e.eventCache.getNode();let u;if(Q(n)||H(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=jo(r,rr(e));else{const d=e.serverCache.getNode();N(d instanceof j,"serverChildren would be complete if leaf node"),h=Lc(r,d)}h=h,u=t.filter.updateFullNode(a,h,s)}else{const h=H(n);let d=Fc(r,h,e.serverCache);d==null&&e.serverCache.isCompleteForChild(h)&&(d=a.getImmediateChild(h)),d!=null?u=t.filter.updateChild(a,h,d,ie(n),l,s):e.eventCache.getNode().hasChild(h)?u=t.filter.updateChild(a,h,j.EMPTY_NODE,ie(n),l,s):u=a,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=jo(r,rr(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||Uo(r,X())!=null,ki(e,u,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Dc(r.getIndex()),s=jx(r);this.processor_=hC(s);const o=n.serverCache,l=n.eventCache,a=i.updateFullNode(j.EMPTY_NODE,o.getNode(),null),u=s.updateFullNode(j.EMPTY_NODE,l.getNode(),null),h=new nr(a,o.isFullyInitialized(),i.filtersNodes()),d=new nr(u,l.isFullyInitialized(),s.filtersNodes());this.viewCache_=dl(d,h),this.eventGenerator_=new Gx(this.query_)}get query(){return this.query_}}function xC(t){return t.viewCache_.serverCache.getNode()}function CC(t,e){const n=rr(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Q(e)&&!n.getImmediateChild(H(e)).isEmpty())?n.getChild(e):null}function pf(t){return t.eventRegistrations_.length===0}function SC(t,e){t.eventRegistrations_.push(e)}function mf(t,e,n){const r=[];if(n){N(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function gf(t,e,n,r){e.type===It.MERGE&&e.source.queryId!==null&&(N(rr(t.viewCache_),"We should always have a full cache before handling merges"),N(gu(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=pC(t.processor_,i,e,n,r);return fC(t.processor_,s.viewCache),N(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,Kg(t,s.changes,s.viewCache.eventCache.getNode(),null)}function EC(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ye,(s,o)=>{r.push(Wr(s,o))}),n.isFullyInitialized()&&r.push(Fg(n.getNode())),Kg(t,r,n.getNode(),e)}function Kg(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return Qx(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wo;class NC{constructor(){this.views=new Map}}function kC(t){N(!Wo,"__referenceConstructor has already been defined"),Wo=t}function IC(){return N(Wo,"Reference.ts has not been loaded"),Wo}function TC(t){return t.views.size===0}function jc(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return N(s!=null,"SyncTree gave us an op for an invalid query."),gf(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(gf(o,e,n,r));return s}}function RC(t,e,n,r,i){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let l=jo(n,i?r:null),a=!1;l?a=!0:r instanceof j?(l=Lc(n,r),a=!1):(l=j.EMPTY_NODE,a=!1);const u=dl(new nr(l,a,!1),new nr(r,i,!1));return new wC(e,u)}return o}function PC(t,e,n,r,i,s){const o=RC(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),SC(o,n),EC(o,n)}function DC(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const l=Dn(t);if(i==="default")for(const[a,u]of t.views.entries())o=o.concat(mf(u,n,r)),pf(u)&&(t.views.delete(a),u.query._queryParams.loadsAllData()||s.push(u.query));else{const a=t.views.get(i);a&&(o=o.concat(mf(a,n,r)),pf(a)&&(t.views.delete(i),a.query._queryParams.loadsAllData()||s.push(a.query)))}return l&&!Dn(t)&&s.push(new(IC())(e._repo,e._path)),{removed:s,events:o}}function Yg(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function br(t,e){let n=null;for(const r of t.views.values())n=n||CC(r,e);return n}function qg(t,e){if(e._queryParams.loadsAllData())return hl(t);{const r=e._queryIdentifier;return t.views.get(r)}}function Xg(t,e){return qg(t,e)!=null}function Dn(t){return hl(t)!=null}function hl(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $o;function bC(t){N(!$o,"__referenceConstructor has already been defined"),$o=t}function AC(){return N($o,"Reference.ts has not been loaded"),$o}let MC=1;class yf{constructor(e){this.listenProvider_=e,this.syncPointTree_=new le(null),this.pendingWriteTree_=aC(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Jg(t,e,n,r,i){return Xx(t.pendingWriteTree_,e,n,r,i),i?hs(t,new tr(jg(),e,n)):[]}function Vn(t,e,n=!1){const r=Jx(t.pendingWriteTree_,e);if(Zx(t.pendingWriteTree_,e)){let s=new le(null);return r.snap!=null?s=s.set(X(),!0):rt(r.children,o=>{s=s.set(new ne(o),!0)}),hs(t,new zo(r.path,s,n))}else return[]}function fl(t,e,n){return hs(t,new tr(Ac(),e,n))}function OC(t,e,n){const r=le.fromObject(n);return hs(t,new es(Ac(),e,r))}function LC(t,e){return hs(t,new Zi(Ac(),e))}function FC(t,e,n){const r=Bc(t,n);if(r){const i=Wc(r),s=i.path,o=i.queryId,l=Xe(s,e),a=new Zi(Mc(o),l);return $c(t,s,a)}else return[]}function xu(t,e,n,r,i=!1){const s=e._path,o=t.syncPointTree_.get(s);let l=[];if(o&&(e._queryIdentifier==="default"||Xg(o,e))){const a=DC(o,e,n,r);TC(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const u=a.removed;if(l=a.events,!i){const h=u.findIndex(c=>c._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(s,(c,_)=>Dn(_));if(h&&!d){const c=t.syncPointTree_.subtree(s);if(!c.isEmpty()){const _=UC(c);for(let v=0;v<_.length;++v){const C=_[v],O=C.query,g=t0(t,C);t.listenProvider_.startListening(Ti(O),Ho(t,O),g.hashFn,g.onComplete)}}}!d&&u.length>0&&!r&&(h?t.listenProvider_.stopListening(Ti(e),null):u.forEach(c=>{const _=t.queryToTagMap.get(pl(c));t.listenProvider_.stopListening(Ti(c),_)}))}BC(t,u)}return l}function zC(t,e,n,r){const i=Bc(t,r);if(i!=null){const s=Wc(i),o=s.path,l=s.queryId,a=Xe(o,e),u=new tr(Mc(l),a,n);return $c(t,o,u)}else return[]}function jC(t,e,n,r){const i=Bc(t,r);if(i){const s=Wc(i),o=s.path,l=s.queryId,a=Xe(o,e),u=le.fromObject(n),h=new es(Mc(l),a,u);return $c(t,o,h)}else return[]}function _f(t,e,n,r=!1){const i=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(c,_)=>{const v=Xe(c,i);s=s||br(_,v),o=o||Dn(_)});let l=t.syncPointTree_.get(i);l?(o=o||Dn(l),s=s||br(l,X())):(l=new NC,t.syncPointTree_=t.syncPointTree_.set(i,l));let a;s!=null?a=!0:(a=!1,s=j.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((_,v)=>{const C=br(v,X());C&&(s=s.updateImmediateChild(_,C))}));const u=Xg(l,e);if(!u&&!e._queryParams.loadsAllData()){const c=pl(e);N(!t.queryToTagMap.has(c),"View does not exist, but we have a tag");const _=WC();t.queryToTagMap.set(c,_),t.tagToQueryMap.set(_,c)}const h=Oc(t.pendingWriteTree_,i);let d=PC(l,e,n,h,s,a);if(!u&&!o&&!r){const c=qg(l,e);d=d.concat($C(t,e,c))}return d}function Uc(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,l)=>{const a=Xe(o,e),u=br(l,a);if(u)return u});return $g(i,e,s,n,!0)}function hs(t,e){return Zg(e,t.syncPointTree_,null,Oc(t.pendingWriteTree_,X()))}function Zg(t,e,n,r){if(Q(t.path))return e0(t,e,n,r);{const i=e.get(X());n==null&&i!=null&&(n=br(i,X()));let s=[];const o=H(t.path),l=t.operationForChild(o),a=e.children.get(o);if(a&&l){const u=n?n.getImmediateChild(o):null,h=Hg(r,o);s=s.concat(Zg(l,a,u,h))}return i&&(s=s.concat(jc(i,t,r,n))),s}}function e0(t,e,n,r){const i=e.get(X());n==null&&i!=null&&(n=br(i,X()));let s=[];return e.children.inorderTraversal((o,l)=>{const a=n?n.getImmediateChild(o):null,u=Hg(r,o),h=t.operationForChild(o);h&&(s=s.concat(e0(h,l,a,u)))}),i&&(s=s.concat(jc(i,t,r,n))),s}function t0(t,e){const n=e.query,r=Ho(t,n);return{hashFn:()=>(xC(e)||j.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?FC(t,n._path,r):LC(t,n._path);{const s=zw(i,n);return xu(t,n,null,s)}}}}function Ho(t,e){const n=pl(e);return t.queryToTagMap.get(n)}function pl(t){return t._path.toString()+"$"+t._queryIdentifier}function Bc(t,e){return t.tagToQueryMap.get(e)}function Wc(t){const e=t.indexOf("$");return N(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ne(t.substr(0,e))}}function $c(t,e,n){const r=t.syncPointTree_.get(e);N(r,"Missing sync point for query tag that we're tracking");const i=Oc(t.pendingWriteTree_,e);return jc(r,n,i,null)}function UC(t){return t.fold((e,n,r)=>{if(n&&Dn(n))return[hl(n)];{let i=[];return n&&(i=Yg(n)),rt(r,(s,o)=>{i=i.concat(o)}),i}})}function Ti(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(AC())(t._repo,t._path):t}function BC(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=pl(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function WC(){return MC++}function $C(t,e,n){const r=e._path,i=Ho(t,e),s=t0(t,n),o=t.listenProvider_.startListening(Ti(e),i,s.hashFn,s.onComplete),l=t.syncPointTree_.subtree(r);if(i)N(!Dn(l.value),"If we're adding a query, it shouldn't be shadowed");else{const a=l.fold((u,h,d)=>{if(!Q(u)&&h&&Dn(h))return[hl(h).query];{let c=[];return h&&(c=c.concat(Yg(h).map(_=>_.query))),rt(d,(_,v)=>{c=c.concat(v)}),c}});for(let u=0;u<a.length;++u){const h=a[u];t.listenProvider_.stopListening(Ti(h),Ho(t,h))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Hc(n)}node(){return this.node_}}class Vc{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Ne(this.path_,e);return new Vc(this.syncTree_,n)}node(){return Uc(this.syncTree_,this.path_)}}const HC=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},vf=function(t,e,n){if(!t||typeof t!="object")return t;if(N(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return VC(t[".sv"],e,n);if(typeof t[".sv"]=="object")return GC(t[".sv"],e);N(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},VC=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:N(!1,"Unexpected server value: "+t)}},GC=function(t,e,n){t.hasOwnProperty("increment")||N(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&N(!1,"Unexpected increment value: "+r);const i=e.node();if(N(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},QC=function(t,e,n,r){return Gc(e,new Vc(n,t),r)},n0=function(t,e,n){return Gc(t,new Hc(e),n)};function Gc(t,e,n){const r=t.getPriority().val(),i=vf(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,l=vf(o.getValue(),e,n);return l!==o.getValue()||i!==o.getPriority().val()?new Ie(l,Me(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Ie(i))),o.forEachChild(ye,(l,a)=>{const u=Gc(a,e.getImmediateChild(l),n);u!==a&&(s=s.updateImmediateChild(l,u))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function Kc(t,e){let n=e instanceof ne?e:new ne(e),r=t,i=H(n);for(;i!==null;){const s=Ur(r.node.children,i)||{children:{},childCount:0};r=new Qc(i,r,s),n=ie(n),i=H(n)}return r}function qr(t){return t.node.value}function r0(t,e){t.node.value=e,Cu(t)}function i0(t){return t.node.childCount>0}function KC(t){return qr(t)===void 0&&!i0(t)}function ml(t,e){rt(t.node.children,(n,r)=>{e(new Qc(n,t,r))})}function s0(t,e,n,r){n&&!r&&e(t),ml(t,i=>{s0(i,e,!0,r)}),n&&r&&e(t)}function YC(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function fs(t){return new ne(t.parent===null?t.name:fs(t.parent)+"/"+t.name)}function Cu(t){t.parent!==null&&qC(t.parent,t.name,t)}function qC(t,e,n){const r=KC(n),i=ln(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Cu(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,Cu(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC=/[\[\].#$\/\u0000-\u001F\u007F]/,JC=/[\[\].#$\u0000-\u001F\u007F]/,ua=10*1024*1024,o0=function(t){return typeof t=="string"&&t.length!==0&&!XC.test(t)},l0=function(t){return typeof t=="string"&&t.length!==0&&!JC.test(t)},ZC=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),l0(t)},eS=function(t,e,n,r){r&&e===void 0||Yc(Cc(t,"value"),e,n)},Yc=function(t,e,n){const r=n instanceof ne?new yx(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Un(r));if(typeof e=="function")throw new Error(t+"contains a function "+Un(r)+" with contents = "+e.toString());if(lg(e))throw new Error(t+"contains "+e.toString()+" "+Un(r));if(typeof e=="string"&&e.length>ua/3&&ul(e)>ua)throw new Error(t+"contains a string greater than "+ua+" utf8 bytes "+Un(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(rt(e,(o,l)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!o0(o)))throw new Error(t+" contains an invalid key ("+o+") "+Un(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);_x(r,o),Yc(t,l,r),vx(r)}),i&&s)throw new Error(t+' contains ".value" child '+Un(r)+" in addition to actual children.")}},a0=function(t,e,n,r){if(!(r&&n===void 0)&&!l0(n))throw new Error(Cc(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},tS=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),a0(t,e,n,r)},nS=function(t,e){if(H(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},rS=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!o0(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!ZC(n))throw new Error(Cc(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function qc(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!Tc(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function u0(t,e,n){qc(t,n),c0(t,r=>Tc(r,e))}function sn(t,e,n){qc(t,n),c0(t,r=>kt(r,e)||kt(e,r))}function c0(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(sS(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function sS(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Kn&&Ue("event: "+n.toString()),Yr(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS="repo_interrupt",lS=25;class aS{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new iS,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Fo(),this.transactionQueueTree_=new Qc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function uS(t,e,n){if(t.stats_=kc(t.repoInfo_),t.forceRestClient_||Ww())t.server_=new Lo(t.repoInfo_,(r,i,s,o)=>{wf(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>xf(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Pe(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Xt(t.repoInfo_,e,(r,i,s,o)=>{wf(t,r,i,s,o)},r=>{xf(t,r)},r=>{dS(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=Qw(t.repoInfo_,()=>new Vx(t.stats_,t.server_)),t.infoData_=new Ux,t.infoSyncTree_=new yf({startListening:(r,i,s,o)=>{let l=[];const a=t.infoData_.getNode(r._path);return a.isEmpty()||(l=fl(t.infoSyncTree_,r._path,a),setTimeout(()=>{o("ok")},0)),l},stopListening:()=>{}}),Jc(t,"connected",!1),t.serverSyncTree_=new yf({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(l,a)=>{const u=o(l,a);sn(t.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function cS(t){const n=t.infoData_.getNode(new ne(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Xc(t){return HC({timestamp:cS(t)})}function wf(t,e,n,r,i){t.dataUpdateCount++;const s=new ne(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const a=Ro(n,u=>Me(u));o=jC(t.serverSyncTree_,s,a,i)}else{const a=Me(n);o=zC(t.serverSyncTree_,s,a,i)}else if(r){const a=Ro(n,u=>Me(u));o=OC(t.serverSyncTree_,s,a)}else{const a=Me(n);o=fl(t.serverSyncTree_,s,a)}let l=s;o.length>0&&(l=gl(t,s)),sn(t.eventQueue_,l,o)}function xf(t,e){Jc(t,"connected",e),e===!1&&fS(t)}function dS(t,e){rt(e,(n,r)=>{Jc(t,n,r)})}function Jc(t,e,n){const r=new ne("/.info/"+e),i=Me(n);t.infoData_.updateSnapshot(r,i);const s=fl(t.infoSyncTree_,r,i);sn(t.eventQueue_,r,s)}function d0(t){return t.nextWriteId_++}function hS(t,e,n,r,i){Zc(t,"set",{path:e.toString(),value:n,priority:r});const s=Xc(t),o=Me(n,r),l=Uc(t.serverSyncTree_,e),a=n0(o,l,s),u=d0(t),h=Jg(t.serverSyncTree_,e,a,u,!0);qc(t.eventQueue_,h),t.server_.put(e.toString(),o.val(!0),(c,_)=>{const v=c==="ok";v||nt("set at "+e+" failed: "+c);const C=Vn(t.serverSyncTree_,u,!v);sn(t.eventQueue_,e,C),gS(t,i,c,_)});const d=g0(t,e);gl(t,d),sn(t.eventQueue_,d,[])}function fS(t){Zc(t,"onDisconnectEvents");const e=Xc(t),n=Fo();mu(t.onDisconnect_,X(),(i,s)=>{const o=QC(i,s,t.serverSyncTree_,e);zg(n,i,o)});let r=[];mu(n,X(),(i,s)=>{r=r.concat(fl(t.serverSyncTree_,i,s));const o=g0(t,i);gl(t,o)}),t.onDisconnect_=Fo(),sn(t.eventQueue_,X(),r)}function pS(t,e,n){let r;H(e._path)===".info"?r=_f(t.infoSyncTree_,e,n):r=_f(t.serverSyncTree_,e,n),u0(t.eventQueue_,e._path,r)}function Su(t,e,n){let r;H(e._path)===".info"?r=xu(t.infoSyncTree_,e,n):r=xu(t.serverSyncTree_,e,n),u0(t.eventQueue_,e._path,r)}function mS(t){t.persistentConnection_&&t.persistentConnection_.interrupt(oS)}function Zc(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Ue(n,...e)}function gS(t,e,n,r){e&&Yr(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function h0(t,e,n){return Uc(t.serverSyncTree_,e,n)||j.EMPTY_NODE}function ed(t,e=t.transactionQueueTree_){if(e||yl(t,e),qr(e)){const n=p0(t,e);N(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&yS(t,fs(e),n)}else i0(e)&&ml(e,n=>{ed(t,n)})}function yS(t,e,n){const r=n.map(u=>u.currentWriteId),i=h0(t,e,r);let s=i;const o=i.hash();for(let u=0;u<n.length;u++){const h=n[u];N(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const d=Xe(e,h.path);s=s.updateChild(d,h.currentOutputSnapshotRaw)}const l=s.val(!0),a=e;t.server_.put(a.toString(),l,u=>{Zc(t,"transaction put response",{path:a.toString(),status:u});let h=[];if(u==="ok"){const d=[];for(let c=0;c<n.length;c++)n[c].status=2,h=h.concat(Vn(t.serverSyncTree_,n[c].currentWriteId)),n[c].onComplete&&d.push(()=>n[c].onComplete(null,!0,n[c].currentOutputSnapshotResolved)),n[c].unwatcher();yl(t,Kc(t.transactionQueueTree_,e)),ed(t,t.transactionQueueTree_),sn(t.eventQueue_,e,h);for(let c=0;c<d.length;c++)Yr(d[c])}else{if(u==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{nt("transaction at "+a.toString()+" failed: "+u);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=u}gl(t,e)}},o)}function gl(t,e){const n=f0(t,e),r=fs(n),i=p0(t,n);return _S(t,i,r),r}function _S(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<e.length;l++){const a=e[l],u=Xe(n,a.path);let h=!1,d;if(N(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===4)h=!0,d=a.abortReason,i=i.concat(Vn(t.serverSyncTree_,a.currentWriteId,!0));else if(a.status===0)if(a.retryCount>=lS)h=!0,d="maxretry",i=i.concat(Vn(t.serverSyncTree_,a.currentWriteId,!0));else{const c=h0(t,a.path,o);a.currentInputSnapshot=c;const _=e[l].update(c.val());if(_!==void 0){Yc("transaction failed: Data returned ",_,a.path);let v=Me(_);typeof _=="object"&&_!=null&&ln(_,".priority")||(v=v.updatePriority(c.getPriority()));const O=a.currentWriteId,g=Xc(t),f=n0(v,c,g);a.currentOutputSnapshotRaw=v,a.currentOutputSnapshotResolved=f,a.currentWriteId=d0(t),o.splice(o.indexOf(O),1),i=i.concat(Jg(t.serverSyncTree_,a.path,f,a.currentWriteId,a.applyLocally)),i=i.concat(Vn(t.serverSyncTree_,O,!0))}else h=!0,d="nodata",i=i.concat(Vn(t.serverSyncTree_,a.currentWriteId,!0))}sn(t.eventQueue_,n,i),i=[],h&&(e[l].status=2,function(c){setTimeout(c,Math.floor(0))}(e[l].unwatcher),e[l].onComplete&&(d==="nodata"?r.push(()=>e[l].onComplete(null,!1,e[l].currentInputSnapshot)):r.push(()=>e[l].onComplete(new Error(d),!1,null))))}yl(t,t.transactionQueueTree_);for(let l=0;l<r.length;l++)Yr(r[l]);ed(t,t.transactionQueueTree_)}function f0(t,e){let n,r=t.transactionQueueTree_;for(n=H(e);n!==null&&qr(r)===void 0;)r=Kc(r,n),e=ie(e),n=H(e);return r}function p0(t,e){const n=[];return m0(t,e,n),n.sort((r,i)=>r.order-i.order),n}function m0(t,e,n){const r=qr(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);ml(e,i=>{m0(t,i,n)})}function yl(t,e){const n=qr(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,r0(e,n.length>0?n:void 0)}ml(e,r=>{yl(t,r)})}function g0(t,e){const n=fs(f0(t,e)),r=Kc(t.transactionQueueTree_,e);return YC(r,i=>{ca(t,i)}),ca(t,r),s0(r,i=>{ca(t,i)}),n}function ca(t,e){const n=qr(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(N(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(N(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Vn(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?r0(e,void 0):n.length=s+1,sn(t.eventQueue_,fs(e),i);for(let o=0;o<r.length;o++)Yr(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vS(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function wS(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):nt(`Invalid query segment '${n}' in query '${t}'`)}return e}const Cf=function(t,e){const n=xS(t),r=n.namespace;n.domain==="firebase.com"&&rn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&rn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Aw();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new vg(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new ne(n.pathString)}},xS=function(t){let e="",n="",r="",i="",s="",o=!0,l="https",a=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(l=t.substring(0,u-1),t=t.substring(u+2));let h=t.indexOf("/");h===-1&&(h=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(i=vS(t.substring(h,d)));const c=wS(t.substring(Math.min(t.length,d)));u=e.indexOf(":"),u>=0?(o=l==="https"||l==="wss",a=parseInt(e.substring(u+1),10)):u=e.length;const _=e.slice(0,u);if(_.toLowerCase()==="localhost")n="localhost";else if(_.split(".").length<=2)n=_;else{const v=e.indexOf(".");r=e.substring(0,v).toLowerCase(),n=e.substring(v+1),s=r}"ns"in c&&(s=c.ns)}return{host:e,port:a,domain:n,subdomain:r,secure:o,scheme:l,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Pe(this.snapshot.exportVal())}}class _0{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return N(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return Q(this._path)?null:Tg(this._path)}get ref(){return new an(this._repo,this._path)}get _queryIdentifier(){const e=of(this._queryParams),n=Ec(e);return n==="{}"?"default":n}get _queryObject(){return of(this._queryParams)}isEqual(e){if(e=as(e),!(e instanceof td))return!1;const n=this._repo===e._repo,r=Tc(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+gx(this._path)}}class an extends td{constructor(e,n){super(e,n,new bc,!1)}get parent(){const e=Pg(this._path);return e===null?null:new an(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class ts{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new ne(e),r=Vo(this.ref,e);return new ts(this._node.getChild(n),r,ye)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new ts(i,Vo(this.ref,r),ye)))}hasChild(e){const n=new ne(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Sf(t,e){return t=as(t),t._checkNotDeleted("ref"),e!==void 0?Vo(t._root,e):t._root}function Vo(t,e){return t=as(t),H(t._path)===null?tS("child","path",e,!1):a0("child","path",e,!1),new an(t._repo,Ne(t._path,e))}function CS(t,e){t=as(t),nS("set",t._path),eS("set",e,t._path,!1);const n=new al;return hS(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}class _l{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new y0("value",this,new ts(e.snapshotNode,new an(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new _0(this,e,n):null}matches(e){return e instanceof _l?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class vl{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new _0(this,e,n):null}createEvent(e,n){N(e.childName!=null,"Child events should have a childName.");const r=Vo(new an(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new y0(e.type,this,new ts(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof vl?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function SS(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){const a=n,u=(h,d)=>{Su(t._repo,t,l),a(h,d)};u.userCallback=n.userCallback,u.context=n.context,n=u}const o=new v0(n,s||void 0),l=e==="value"?new _l(o):new vl(e,o);return pS(t._repo,t,l),()=>Su(t._repo,t,l)}function ES(t,e,n,r){return SS(t,"value",e,n,r)}function NS(t,e,n){let r=null;const i=n?new v0(n):null;e==="value"?r=new _l(i):e&&(r=new vl(e,i)),Su(t._repo,t,r)}kC(an);bC(an);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS="FIREBASE_DATABASE_EMULATOR_HOST",Eu={};let IS=!1;function TS(t,e,n,r){const i=e.lastIndexOf(":"),s=e.substring(0,i),o=xc(s);t.repoInfo_=new vg(e,o,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(t.authTokenProvider_=r)}function RS(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||rn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ue("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=Cf(s,i),l=o.repoInfo,a,u;typeof process<"u"&&process.env&&(u=process.env[kS]),u?(a=!0,s=`http://${u}?ns=${l.namespace}`,o=Cf(s,i),l=o.repoInfo):a=!o.repoInfo.secure;const h=i&&a?new Pr(Pr.OWNER):new Hw(t.name,t.options,e);rS("Invalid Firebase Database URL",o),Q(o.path)||rn("Database URL must point to the root of a Firebase Database (not including a child path).");const d=DS(l,t,h,new $w(t,n));return new bS(d,t)}function PS(t,e){const n=Eu[e];(!n||n[t.key]!==t)&&rn(`Database ${e}(${t.repoInfo_}) has already been deleted.`),mS(t),delete n[t.key]}function DS(t,e,n,r){let i=Eu[e.name];i||(i={},Eu[e.name]=i);let s=i[t.toURLString()];return s&&rn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new aS(t,IS,n,r),i[t.toURLString()]=s,s}class bS{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(uS(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new an(this._repo,X())),this._rootInternal}_delete(){return this._rootInternal!==null&&(PS(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&rn("Cannot call "+e+" on a deleted database.")}}function AS(t=yw(),e){const n=hw(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=Jv("database");r&&MS(n,...r)}return n}function MS(t,e,n,r={}){t=as(t),t._checkNotDeleted("useEmulator");const i=`${e}:${n}`,s=t._repoInternal;if(t._instanceStarted){if(i===t._repoInternal.repoInfo_.host&&Po(r,s.repoInfo_.emulatorOptions))return;rn("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&rn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Pr(Pr.OWNER);else if(r.mockUserToken){const l=typeof r.mockUserToken=="string"?r.mockUserToken:e1(r.mockUserToken,t.app.options.projectId);o=new Pr(l)}xc(e)&&(Zv(e),r1("Database",!0)),TS(s,i,r,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OS(t){Tw(gw),bo(new Qi("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return RS(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),Tr(Wh,$h,t),Tr(Wh,$h,"esm2020")}Xt.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Xt.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};OS();var LS="firebase",FS="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tr(LS,FS,"app");const zS={apiKey:"AIzaSyBNQmI2IzVAsEiQO1XOB7LQzFWGFbr-bPg",authDomain:"scorix-46bd1.firebaseapp.com",projectId:"scorix-46bd1",databaseURL:"https://scorix-46bd1-default-rtdb.asia-southeast1.firebasedatabase.app",storageBucket:"scorix-46bd1.firebasestorage.app",messagingSenderId:"46571770435",appId:"1:46571770435:web:0c8264485212c927833af6",measurementId:"G-X4658CX56T"},jS=tg(zS),Ef=AS(jS),US=["","","",""],BS=["2","3","4","5","6","7","8","9","10","J","Q","K","A"],Nf=()=>{const t=[];return US.forEach((e,n)=>{BS.forEach((r,i)=>{t.push({value:r,suit:e,numeric:i+2,suitRank:n})})}),t.push({value:"JOKER",suit:"",numeric:1,suitRank:-1}),t},kf=()=>Math.random().toString(36).substring(2,10)+Date.now().toString(36),WS=({players:t,onSubmit:e,disabled:n=!1,playerCards:r={},getPlayerTotal:i=()=>0,rejoinCounts:s={}})=>{const[o,l]=F.useState({}),a=()=>{e(o),l({})};if(n||t.length<=1)return null;const u=d=>{const c=r[d];if(!c)return"";const _=c.suit===""||c.suit===""?"text-red-500":"text-gray-800";return y("span",{className:`${_} font-bold`,children:[c.value,c.suit]})},h=d=>{const c=s[d];return c?y("span",{className:"ml-1 px-1.5 py-0.5 bg-emerald-500 text-white text-xs rounded-full flex items-center",children:["",c]}):null};return y("div",{className:"mb-6 bg-gradient-to-r from-indigo-50 to-purple-50 p-4 rounded-xl border border-indigo-100 shadow-sm",children:[y("h3",{className:"font-bold text-lg mb-3 flex items-center gap-2",children:[p(no,{className:"w-5 h-5 text-indigo-600"}),"Enter Scores"]}),p("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 mb-4",children:t.map(d=>y("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-gray-100",children:[y("label",{className:"block text-sm font-medium mb-2 flex items-center flex-wrap",children:[p("span",{className:"text-indigo-700 font-medium",children:d}),u(d)&&p("span",{className:"ml-2 px-2 py-0.5 bg-gray-100 rounded-md text-xs",children:u(d)}),p("span",{className:"ml-2 px-2 py-0.5 bg-amber-100 text-amber-800 rounded-md text-xs font-bold",children:i(d)}),h(d)]}),p("input",{type:"number",value:o[d]||"",onChange:c=>l({...o,[d]:Number(c.target.value)||0}),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"0"})]},d))}),y("button",{onClick:a,className:"w-full bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-3 rounded-xl hover:from-indigo-700 hover:to-purple-700 transition-all duration-300 shadow-md hover:shadow-lg flex items-center justify-center gap-2 font-medium",children:[p(iu,{className:"w-5 h-5"}),"Add Scores"]})]})},If=({players:t,scores:e,maxScore:n,getPlayerTotal:r,readonly:i=!1,onEditScore:s,editedRows:o=[],rejoinCounts:l={}})=>{const[a,u]=F.useState(null),[h,d]=F.useState({}),c=f=>{u(f),d(e[f])},_=()=>{s(a,h),u(null),d({})},v=()=>{u(null),d({})},C=f=>{const m=l[f];return m?y("span",{className:"text-[8px] text-emerald-600 font-bold ml-0.5",children:["",m]}):null},O=f=>{const m=r(f);return m>=n-24?"text-red-600 font-bold":m>=n-48&&m<n-24?"text-orange-500 font-bold":"text-gray-700"},g=f=>f>=n?"bg-red-100 text-red-700":f>=n-24?"text-red-600 font-bold":f>=n-48&&f<n-24?"text-orange-500 font-bold":"text-gray-800";return p("div",{className:"overflow-x-auto rounded-xl border border-gray-200 shadow-sm",children:y("table",{className:"w-full",children:[p("thead",{children:y("tr",{className:"bg-gradient-to-r from-gray-100 to-gray-200",children:[t.map((f,m)=>p("th",{className:"p-0.5 text-center relative",style:{minWidth:"36px"},children:p("div",{className:"h-20 flex items-center justify-center",children:y("div",{className:"flex items-start gap-0.5",style:{writingMode:"vertical-rl",textOrientation:"mixed",transform:"rotate(180deg)"},children:[p("span",{className:`text-[11px] font-medium whitespace-nowrap ${O(f)}`,children:f}),C(f)]})})},f)),!i&&p("th",{className:"p-0.5 text-center text-gray-700",style:{minWidth:"45px"},children:p("div",{className:"h-20 flex items-center justify-center",children:p("span",{className:"text-[10px] font-medium",children:"Edit"})})})]})}),y("tbody",{children:[e.map((f,m)=>y("tr",{className:`${o.includes(m)?"bg-amber-50":"hover:bg-gray-50"} border-b border-gray-100`,children:[t.map(x=>p("td",{className:"p-0.5 text-center",style:{minWidth:"36px"},children:a===m?p("input",{type:"number",value:h[x]||0,onChange:T=>d({...h,[x]:Number(T.target.value)||0}),className:"w-full px-0.5 py-0.5 border border-gray-300 rounded text-center text-xs focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",style:{minWidth:"32px"}}):p("span",{className:"font-medium text-sm",children:f[x]||0})},x)),!i&&p("td",{className:"p-0.5 text-center",style:{minWidth:"45px"},children:a===m?y("div",{className:"flex gap-0.5 justify-center flex-col items-center",children:[p("button",{onClick:_,className:"bg-green-500 text-white px-1.5 py-0.5 rounded text-[10px] hover:bg-green-600 transition-colors w-full",children:""}),p("button",{onClick:v,className:"bg-gray-500 text-white px-1.5 py-0.5 rounded text-[10px] hover:bg-gray-600 transition-colors w-full",children:""})]}):p("button",{onClick:()=>c(m),className:"bg-indigo-500 text-white px-1.5 py-0.5 rounded text-[10px] hover:bg-indigo-600 transition-colors",children:""})})]},m)),y("tr",{className:"bg-gradient-to-r from-amber-50 to-amber-100 font-bold",children:[t.map(f=>{const m=r(f),x=m>=n;return p("td",{className:`p-0.5 text-center text-sm ${g(m)}`,style:{minWidth:"36px"},children:y("div",{className:"flex items-center justify-center gap-0.5",children:[m,x&&p(pi,{className:"w-3 h-3"})]})},f)}),!i&&p("td",{className:"p-0.5",style:{minWidth:"45px"}})]})]})]})})},$S=()=>{const[t,e]=F.useState("setup"),[n,r]=F.useState([]),[i,s]=F.useState(""),[o,l]=F.useState(201),[a,u]=F.useState([]),[h,d]=F.useState(0),[c,_]=F.useState(!0),[v,C]=F.useState([]),[O,g]=F.useState(0),[f,m]=F.useState([]),[x,T]=F.useState([]),[b,P]=F.useState([]),[D,ue]=F.useState(0),[$,Qe]=F.useState([]),[On,gt]=F.useState(!1),[xe,$t]=F.useState([]),[yt,bt]=F.useState(""),[I,z]=F.useState(""),[B,ee]=F.useState(""),[pe,At]=F.useState({}),[Ke,un]=F.useState([]),[Se,Mt]=F.useState(""),[wl,nd]=F.useState(!1),[w0,ps]=F.useState(!1),[Xr,ms]=F.useState([]),[gs,ys]=F.useState({}),[Ot,_s]=F.useState({}),[Ht,vs]=F.useState("");F.useState(24);const[xl,ws]=F.useState(!1),[be,rd]=F.useState(null),[xs,Cl]=F.useState(null),[Cs,Ss]=F.useState(!1),[Sl,id]=F.useState(!1),[Lt,sd]=F.useState({start:"",end:""}),[Ln,El]=F.useState([]);F.useEffect(()=>{const E=new URLSearchParams(window.location.search).get("game");if(E)Mt(E),nd(!0),e("readonly"),C0(E);else{const A=localStorage.getItem("rummyGame");if(A)try{const k=JSON.parse(A);if(k.gameState==="drawing"){localStorage.removeItem("rummyGame");return}r(k.players||[]),$t(k.allGamePlayers||[]),u(k.scores||[]),d(k.currentRound||0),l(k.maxScore||201),bt(k.currentDealerName||""),z(k.pickerName||""),ee(k.splitterName||""),At(k.playerCards||{}),un(k.editedRows||[]),Mt(k.gameId||""),ms(k.permanentlyEliminated||[]),ys(k.eliminationRounds||{}),_s(k.rejoinCounts||{}),vs(k.entryFee??""),k.gameState&&k.gameState!=="setup"&&e(k.gameState)}catch(k){console.error("Error loading from localStorage:",k),localStorage.removeItem("rummyGame")}}},[]),F.useEffect(()=>{if(!wl&&t!=="setup"&&Se){const w={players:n,allGamePlayers:xe,scores:a,currentRound:h,maxScore:o,currentDealerName:yt,pickerName:I,splitterName:B,playerCards:pe,editedRows:Ke,gameId:Se,gameState:t,permanentlyEliminated:Xr,eliminationRounds:gs,rejoinCounts:Ot,entryFee:Ht,timestamp:Date.now()};localStorage.setItem("rummyGame",JSON.stringify(w)),x0(w)}},[n,xe,a,h,o,yt,pe,Ke,Se,t,wl,Xr,gs,Ot,Ht]);const x0=w=>{try{const E=Sf(Ef,`games/${Se}`);CS(E,w).catch(A=>{console.error("Error saving to Firebase:",A)})}catch(E){console.error("Firebase save error:",E)}},C0=w=>{try{const E=Sf(Ef,`games/${w}`);return ES(E,A=>{const k=A.val();k?(r(k.players||[]),$t(k.allGamePlayers||[]),u(k.scores||[]),d(k.currentRound||0),l(k.maxScore||201),bt(k.currentDealerName||""),z(k.pickerName||""),ee(k.splitterName||""),At(k.playerCards||{}),un(k.editedRows||[]),_s(k.rejoinCounts||{}),vs(k.entryFee??"")):alert("Game not found.")},A=>{console.error("Error loading from Firebase:",A),alert("Could not load game.")}),()=>NS(E)}catch(E){console.error("Firebase load error:",E)}},od=()=>{i.trim()&&!n.includes(i.trim())&&(r([...n,i.trim()]),s(""))},S0=w=>{r(n.filter(E=>E!==w))},E0=(w,E)=>{Cl(E),w.dataTransfer.effectAllowed="move"},N0=w=>{w.preventDefault(),w.dataTransfer.dropEffect="move"},k0=(w,E)=>{if(w.preventDefault(),xs===E)return;const A=n.indexOf(xs),k=n.indexOf(E),G=[...n];G.splice(A,1),G.splice(k,0,xs),r(G),Cl(null)},I0=()=>{Cl(null)},T0=()=>{if(n.length<2){alert("Need at least 2 players!");return}const w=kf();Mt(w),$t([...n]);const E=n[0],A=n[n.length-1],k=n[(n.length-2+n.length)%n.length];z(E),bt(A),ee(k);const G={};n.forEach(M=>{G[M]={value:"-",suit:"",numeric:0,suitRank:0}}),At(G),e("playing")},R0=()=>{if(n.length<2){alert("Need at least 2 players!");return}const w=kf();Mt(w),m(Nf().sort(()=>Math.random()-.5)),C([]),g(0),e("drawing")},P0=()=>{if(O<n.length&&f.length>0){const w=f[0],E=[...v,{player:n[O],card:w}];if(C(E),m(f.slice(1)),g(O+1),O+1===n.length){const A=[...E].sort((L,ve)=>L.card.numeric!==ve.card.numeric?ve.card.numeric-L.card.numeric:L.card.suitRank-ve.card.suitRank),k=A.map(L=>L.player),G={};A.forEach(L=>{G[L.player]=L.card}),At(G),r(k),$t(k);const M=A[0].player,te=A[A.length-1].player,_e=k.indexOf(te),U=k[(_e-1+k.length)%k.length];z(M),bt(te),ee(U),setTimeout(()=>e("playing"),2e3)}}},D0=()=>{const w=prompt('Type "rummy" to confirm starting a new game:');if(w===null||w.trim().toLowerCase()!=="rummy")return;localStorage.removeItem("rummyGame");const E=xe.length>0?[...xe]:[];r(E),$t([]),u([]),d(0),e("setup"),C([]),bt(""),z(""),ee(""),At({}),un([]),Mt(""),nd(!1),ms([]),ys({}),_s({}),gt(!1),T([]),P([]),ps(!1),vs(0),ws(!1),rd(null)},b0=w=>{const E=Object.values(w).map(W=>Number(W)||0);if(E.some(W=>!Number.isFinite(W)||W<0)){alert("Scores must be non-negative numbers");return}const A=80;if(E.some(W=>W>A)){alert(`Each player's score cannot exceed ${A}`);return}if(E.filter(W=>W===0).length!==1){alert("Exactly one player must have a score of 0 in a round");return}const G=[...a,w];u(G),xe.indexOf(yt);const M=[],te=[];xe.forEach(W=>{const J=G.reduce((me,wt)=>me+(wt[W]||0),0);J>=o&&n.includes(W)?M.push(W):J<o&&te.push(W)});const _e={...gs};M.forEach(W=>{_e[W]||(_e[W]=h)}),ys(_e);const U=[...Xr];Object.keys(_e).forEach(W=>{const J=_e[W];h-J>=1&&!te.includes(W)&&!U.includes(W)&&U.push(W)}),ms(U);const L=[...xe];let ve=I&&L.includes(I)?I:te[0]||"";if(L.length>0&&I&&L.includes(I)){const W=L.indexOf(I);let J=null;for(let me=1;me<=L.length;me++){const wt=L[(W+me)%L.length];if(te.includes(wt)){J=wt;break}}J?ve=J:ve=te[0]||ve}let Ft="",Y="";if(ve){const W=L.indexOf(ve);for(let J=1;J<=L.length;J++){const me=L[(W-J+L.length)%L.length];if(te.includes(me)){Ft=me;break}}if(Ft){const J=L.indexOf(Ft);for(let me=1;me<=L.length;me++){const wt=L[(J-me+L.length)%L.length];if(te.includes(wt)){Y=wt;break}}}}if(z(ve),bt(Ft),ee(Y),M.length>0){const J=[...xe.filter(me=>!n.includes(me)),...M,...te];$t(J),r(te)}else{const W=xe.filter(J=>G.reduce((wt,kl)=>wt+(kl[J]||0),0)<o);r(W)}d(h+1)},A0=(w,E)=>{const A=[...a];A[w]=E,u(A),Ke.includes(w)||un([...Ke,w]);const k=xe.filter(G=>A.reduce((te,_e)=>te+(_e[G]||0),0)<o);r(k)},ld=()=>yt,_t=w=>a.reduce((E,A)=>E+(A[w]||0),0),vt=()=>n.filter(w=>_t(w)<o),ad=()=>{if(a.length===0)return 0;const w=vt().map(E=>_t(E));return w.length>0?Math.max(...w):0},ud=()=>xe.filter(w=>_t(w)>=o&&!Xr.includes(w)),M0=()=>{const w=vt(),E=ud(),A=w.some(k=>_t(k)>=o-25);return w.length>=2&&E.length>0&&!A},O0=()=>{gt(!0),T([]),P([]),ps(!1)},L0=w=>{x.includes(w)?T(x.filter(E=>E!==w)):T([...x,w])},F0=()=>{if(x.length===0){alert("Add at least one player to rejoin!");return}const w=Nf().sort(()=>Math.random()-.5);Qe(w),P([]),ue(0),ps(!0)},z0=()=>{if(D<x.length&&$.length>0){const w=$[0],E=[...b,{player:x[D],card:w}];if(P(E),Qe($.slice(1)),ue(D+1),D+1===x.length){const A=[...E].sort((k,G)=>k.card.numeric!==G.card.numeric?G.card.numeric-k.card.numeric:k.card.suitRank-G.card.suitRank);setTimeout(()=>{cd(A.map(k=>k.player))},2e3)}}},cd=w=>{const E=ad(),A=ld(),k=n.indexOf(A),G=[...n];G.splice(k,0,...w),r(G);const M={...Ot};w.forEach(Y=>{M[Y]=(M[Y]||0)+1}),_s(M);const te=Xr.filter(Y=>!w.includes(Y));ms(te);const _e={...gs};w.forEach(Y=>{delete _e[Y]}),ys(_e);const ve=[...xe.filter(Y=>!n.includes(Y)).filter(Y=>!w.includes(Y)),...G];$t(ve);const Ft=a.map((Y,W)=>{const J={...Y};return w.forEach(me=>{W===a.length-1?J[me]=E+1:J[me]=0}),J});u(Ft),gt(!1),T([]),P([]),ps(!1)},j0=()=>{if(!Se){alert("Game ID not generated yet. Start playing first!");return}const w=`${window.location.origin}${window.location.pathname}?game=${Se}`;navigator.clipboard.writeText(w),alert(` Share link copied!
 Others can view scores in read-only mode.
 Enable Firebase for real-time sync.`)},dd=()=>{const w=vt();if(w.length<2){alert("Need at least 2 active players to split the prize.");return}const E=Number(Ht)||0;if(E<=0){alert("Entry fee must be set to calculate prize split.");return}const A=24,k={};w.forEach(Y=>{const W=_t(Y),J=o-W,me=Math.floor(J/A);k[Y]=me});const G=Math.min(...Object.values(k));let M=0,te=0;xe.forEach(Y=>{const W=1+(Ot[Y]||0);M+=E*W,te+=W});let _e=0;const U={};for(const Y of w){const W=k[Y]-G;if(W>0){const J=W*Ht;U[Y]=J,_e+=J}else U[Y]=0}if(_e>M){alert(" Error: Excess payout exceeds total pot. Please verify calculations.");return}const L=M-_e,ve=L/w.length,Ft=w.map(Y=>{const W=_t(Y),J=o-W,me=k[Y]-G,wt=U[Y]+ve,kl=1+(Ot[Y]||0);return{player:Y,currentScore:W,remainingPoints:J,dropsLeft:k[Y],excess:me,excessPayout:U[Y],equalShare:ve,totalPayout:wt,entryCount:kl,rejoinCount:Ot[Y]||0}});rd({totalPlayers:xe.length,entryFee:E,totalPot:M,dropValue:A,maxScore:o,minDrops:G,excessPayout:_e,remainingPot:L,equalShare:ve,playerPayouts:Ft,totalEntries:te}),ws(!0),Ss(!1)};F.useEffect(()=>{if(xl&&Se){const E=JSON.parse(localStorage.getItem("splitRecords")||"[]").some(A=>A.gameId===Se);Ss(E)}},[xl,Se]);const U0=()=>{if(!be||Cs)return;const w=JSON.parse(localStorage.getItem("splitRecords")||"[]");if(w.some(G=>G.gameId===Se)){Ss(!0);return}const A=prompt('Type "settle" to confirm recording this split:');if(A===null||A.trim().toLowerCase()!=="settle")return;const k={gameId:Se,timestamp:Date.now(),date:new Date().toISOString(),players:xe,activePlayers:vt(),entryFee:Number(Ht)||0,splitData:be,totalPot:be.totalPot,playerPayouts:be.playerPayouts,rejoinCounts:Ot};w.push(k),localStorage.setItem("splitRecords",JSON.stringify(w)),Ss(!0),alert(" Split record saved successfully!")},hd=()=>JSON.parse(localStorage.getItem("splitRecords")||"[]"),B0=()=>{const w=hd();return!Lt.start&&!Lt.end?w:w.filter(E=>{const A=new Date(E.timestamp),k=Lt.start?new Date(Lt.start+"T00:00:00"):null,G=Lt.end?new Date(Lt.end+"T23:59:59"):null;return!(k&&A<k||G&&A>G)})},W0=()=>{const w=hd().filter(U=>Ln.includes(U.gameId));if(w.length===0)return alert("Please select at least one game for settlement"),null;const E={};w.forEach(U=>{U.players.forEach(L=>{E[L]||(E[L]={paid:0,received:0,games:0});const Ft=1+(U.rejoinCounts&&U.rejoinCounts[L]?U.rejoinCounts[L]:0);E[L].paid+=U.entryFee*Ft,E[L].games+=1}),U.playerPayouts&&U.playerPayouts.forEach(L=>{E[L.player]||(E[L.player]={paid:0,received:0,games:0}),E[L.player].received+=L.totalPayout})});const A=Object.keys(E).map(U=>({player:U,paid:E[U].paid,received:E[U].received,net:E[U].received-E[U].paid,games:E[U].games})).sort((U,L)=>L.net-U.net),k=A.filter(U=>U.net>.01),G=A.filter(U=>U.net<-.01),M=[];let te=k.map(U=>({...U,remaining:U.net})),_e=G.map(U=>({...U,remaining:Math.abs(U.net)}));for(;te.length>0&&_e.length>0;){const U=te[0],L=_e[0],ve=Math.min(U.remaining,L.remaining);M.push({from:L.player,to:U.player,amount:ve}),U.remaining-=ve,L.remaining-=ve,U.remaining<.01&&te.shift(),L.remaining<.01&&_e.shift()}return{playerNets:A,transactions:M,totalGames:w.length,totalPot:w.reduce((U,L)=>U+L.totalPot,0)}},Nl=()=>{const w=B0(),[E,A]=F.useState(null),k=M=>{Ln.includes(M)?El(Ln.filter(te=>te!==M)):El([...Ln,M]),A(null)},G=()=>{const M=W0();A(M)};return p("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4 overflow-y-auto",children:y("div",{className:"bg-white rounded-2xl p-5 sm:p-6 w-full max-w-5xl max-h-[90vh] overflow-y-auto",children:[y("div",{className:"flex justify-between items-center mb-4",children:[y("h2",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[p(Nh,{className:"w-7 h-7 text-green-600"}),"Settlement Calculator"]}),p("button",{onClick:()=>{id(!1),El([]),A(null)},className:"text-gray-500 hover:text-gray-700",children:p(pi,{className:"w-6 h-6"})})]}),y("div",{className:"mb-6 p-4 bg-gradient-to-r from-blue-50 to-cyan-50 rounded-xl border border-blue-200",children:[y("h3",{className:"font-bold text-lg mb-3 text-blue-800 flex items-center gap-2",children:[p(Cv,{className:"w-5 h-5"})," Filter by Date Range"]}),y("div",{className:"grid grid-cols-2 gap-3",children:[y("div",{children:[p("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),p("input",{type:"date",value:Lt.start,onChange:M=>sd({...Lt,start:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),y("div",{children:[p("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),p("input",{type:"date",value:Lt.end,onChange:M=>sd({...Lt,end:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]})]}),y("div",{className:"mb-6",children:[y("h3",{className:"font-bold text-lg mb-3 text-gray-800 flex items-center gap-2",children:[p(kh,{className:"w-5 h-5"})," Select Games (",Ln.length," selected)"]}),p("div",{className:"space-y-2 max-h-64 overflow-y-auto border border-gray-200 rounded-xl p-3",children:w.length===0?p("p",{className:"text-gray-500 text-center py-4",children:"No recorded games found"}):w.map(M=>y("label",{className:"flex items-center gap-3 p-3 hover:bg-gray-50 rounded-lg cursor-pointer border border-gray-100",children:[p("input",{type:"checkbox",checked:Ln.includes(M.gameId),onChange:()=>k(M.gameId),className:"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500"}),y("div",{className:"flex-1",children:[y("div",{className:"font-medium text-gray-800",children:[new Date(M.date).toLocaleDateString()," - ",new Date(M.date).toLocaleTimeString()]}),y("div",{className:"text-sm text-gray-600",children:["Players: ",M.players.join(", "),"  Entry: ",M.entryFee,"  Pot: ",M.totalPot]})]}),y("div",{className:"text-right",children:[p("div",{className:"text-sm text-gray-500",children:"Game ID"}),y("div",{className:"text-xs text-gray-400 font-mono",children:[M.gameId.substring(0,8),"..."]})]})]},M.gameId))})]}),y("button",{onClick:G,disabled:Ln.length===0,className:"w-full bg-gradient-to-r from-green-500 to-emerald-600 text-white py-3 rounded-xl hover:from-green-600 hover:to-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 font-medium mb-6",children:[p(Nh,{className:"w-5 h-5"})," Calculate Settlement"]}),E&&y("div",{className:"space-y-6",children:[y("div",{className:"p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl border border-green-200",children:[p("h3",{className:"font-bold text-lg mb-3 text-green-800",children:"Summary"}),y("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[y("div",{className:"bg-white p-3 rounded-lg",children:[p("span",{className:"text-gray-600",children:"Total Games:"}),p("span",{className:"font-bold text-gray-800 ml-2",children:E.totalGames})]}),y("div",{className:"bg-white p-3 rounded-lg",children:[p("span",{className:"text-gray-600",children:"Total Pot:"}),y("span",{className:"font-bold text-green-600 ml-2",children:["",E.totalPot.toFixed(2)]})]})]})]}),y("div",{children:[p("h3",{className:"font-bold text-lg mb-3 text-gray-800",children:"Player Balances"}),p("div",{className:"space-y-2",children:E.playerNets.map(M=>y("div",{className:`p-3 rounded-lg border ${M.net>0?"bg-green-50 border-green-200":M.net<0?"bg-red-50 border-red-200":"bg-gray-50 border-gray-200"}`,children:[y("div",{className:"flex justify-between items-center",children:[p("span",{className:"font-medium text-gray-800",children:M.player}),y("span",{className:`font-bold ${M.net>0?"text-green-600":M.net<0?"text-red-600":"text-gray-600"}`,children:[M.net>0?"+":"","",M.net.toFixed(2)]})]}),y("div",{className:"text-xs text-gray-600 mt-1",children:["Paid: ",M.paid.toFixed(2),"  Received: ",M.received.toFixed(2),"  Games: ",M.games]})]},M.player))})]}),y("div",{children:[y("h3",{className:"font-bold text-lg mb-3 text-gray-800",children:["Optimized Transactions (",E.transactions.length,")"]}),p("div",{className:"space-y-2",children:E.transactions.map((M,te)=>p("div",{className:"p-3 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200",children:y("div",{className:"flex items-center justify-between",children:[y("div",{className:"flex items-center gap-3",children:[p("span",{className:"font-medium text-gray-800",children:M.from}),p("span",{className:"text-gray-500",children:""}),p("span",{className:"font-medium text-gray-800",children:M.to})]}),y("span",{className:"font-bold text-green-600",children:["",M.amount.toFixed(2)]})]})},te))})]})]})]})})},fd=()=>!xl||!be?null:p("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4 overflow-y-auto",children:y("div",{className:"bg-white rounded-2xl p-5 sm:p-6 w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[y("div",{className:"flex justify-between items-center mb-4",children:[y("h2",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[p("span",{className:"text-green-600",children:""}),"Split Prize"]}),p("button",{onClick:()=>ws(!1),className:"text-gray-500 hover:text-gray-700",children:p(pi,{className:"w-6 h-6"})})]}),y("div",{className:"mb-6 p-4 bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl border border-indigo-200",children:[p("h3",{className:"font-bold text-lg mb-3 text-indigo-800",children:" Pool Details"}),y("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[y("div",{className:"bg-white p-3 rounded-lg",children:[p("span",{className:"text-gray-600",children:"Total Players:"}),p("span",{className:"font-bold text-gray-800 ml-2",children:be.totalPlayers})]}),y("div",{className:"bg-white p-3 rounded-lg",children:[p("span",{className:"text-gray-600",children:"Entry Fee:"}),y("span",{className:"font-bold text-green-600 ml-2",children:["",be.entryFee]})]}),y("div",{className:"bg-white p-3 rounded-lg",children:[p("span",{className:"text-gray-600",children:"Total Entries Paid:"}),p("span",{className:"font-bold text-blue-600 ml-2",children:be.totalEntries})]}),y("div",{className:"bg-white p-3 rounded-lg",children:[p("span",{className:"text-gray-600",children:"Total Prize Pool:"}),y("span",{className:"font-bold text-green-600 ml-2",children:["",be.totalPot]})]}),y("div",{className:"bg-white p-3 rounded-lg",children:[p("span",{className:"text-gray-600",children:"Drop Value:"}),y("span",{className:"font-bold text-gray-800 ml-2",children:[be.dropValue," pts"]})]}),y("div",{className:"bg-white p-3 rounded-lg",children:[p("span",{className:"text-gray-600",children:"Max Score:"}),p("span",{className:"font-bold text-gray-800 ml-2",children:be.maxScore})]}),y("div",{className:"bg-white p-3 rounded-lg col-span-2",children:[p("span",{className:"text-gray-600",children:"Minimum Drops:"}),p("span",{className:"font-bold text-amber-600 ml-2",children:be.minDrops})]})]})]}),y("div",{className:"mb-6 p-4 bg-gradient-to-r from-amber-50 to-orange-50 rounded-xl border border-amber-200",children:[p("h3",{className:"font-bold text-lg mb-3 text-amber-800",children:" Split Summary"}),y("div",{className:"space-y-2 text-sm",children:[y("div",{className:"flex justify-between p-2 bg-white rounded-lg",children:[p("span",{className:"text-gray-600",children:"Excess Drops Payout:"}),y("span",{className:"font-bold text-orange-600",children:["",be.excessPayout.toFixed(2)]})]}),y("div",{className:"flex justify-between p-2 bg-white rounded-lg",children:[p("span",{className:"text-gray-600",children:"Remaining Pool to Split:"}),y("span",{className:"font-bold text-green-600",children:["",be.remainingPot.toFixed(2)]})]}),y("div",{className:"flex justify-between p-2 bg-white rounded-lg",children:[p("span",{className:"text-gray-600",children:"Equal Share (per player):"}),y("span",{className:"font-bold text-blue-600",children:["",be.equalShare.toFixed(2)]})]})]})]}),y("div",{className:"mb-4",children:[p("h3",{className:"font-bold text-lg mb-3 text-gray-800",children:" Individual Payouts"}),p("div",{className:"space-y-3",children:be.playerPayouts.map((w,E)=>y("div",{className:"p-4 bg-gradient-to-r from-gray-50 to-gray-100 rounded-xl border border-gray-200",children:[y("div",{className:"flex justify-between items-center mb-3",children:[p("h4",{className:"font-bold text-lg text-indigo-700",children:w.player}),y("div",{className:"text-right",children:[y("div",{className:"text-2xl font-bold text-green-600",children:["",w.totalPayout.toFixed(2)]}),p("div",{className:"text-xs text-gray-500",children:"Total Payout"})]})]}),y("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 text-xs",children:[y("div",{className:"bg-white p-2 rounded",children:[p("div",{className:"text-gray-500",children:"Current Score"}),p("div",{className:"font-bold text-gray-800",children:w.currentScore})]}),y("div",{className:"bg-white p-2 rounded",children:[p("div",{className:"text-gray-500",children:"Remaining Points"}),p("div",{className:"font-bold text-gray-800",children:w.remainingPoints})]}),y("div",{className:"bg-white p-2 rounded",children:[p("div",{className:"text-gray-500",children:"Drops Left"}),p("div",{className:"font-bold text-amber-600",children:w.dropsLeft})]}),y("div",{className:"bg-white p-2 rounded",children:[p("div",{className:"text-gray-500",children:"Rejoins"}),p("div",{className:"font-bold text-purple-600",children:w.rejoinCount})]}),y("div",{className:"bg-white p-2 rounded",children:[p("div",{className:"text-gray-500",children:"Entry Fees Paid"}),y("div",{className:"font-bold text-green-600",children:[w.entryCount," ",be.entryFee]})]}),y("div",{className:"bg-white p-2 rounded",children:[p("div",{className:"text-gray-500",children:"Excess Drops"}),p("div",{className:"font-bold text-orange-600",children:w.excess})]}),y("div",{className:"bg-white p-2 rounded",children:[p("div",{className:"text-gray-500",children:"Excess Payout"}),y("div",{className:"font-bold text-orange-600",children:["",w.excessPayout.toFixed(2)]})]}),y("div",{className:"bg-white p-2 rounded col-span-2",children:[p("div",{className:"text-gray-500",children:"Equal Share"}),y("div",{className:"font-bold text-blue-600",children:["",w.equalShare.toFixed(2)]})]})]})]},E))})]}),y("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200 gap-3",children:[p("button",{onClick:U0,disabled:Cs,className:`flex-1 ${Cs?"bg-gray-300 cursor-not-allowed":"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700"} text-white px-6 py-3 rounded-xl flex items-center justify-center gap-2 font-medium`,children:Cs?y(Ns,{children:[p(Zl,{className:"w-5 h-5"}),"Recorded"]}):y(Ns,{children:[p(Mv,{className:"w-5 h-5"}),"Record Split"]})}),p("button",{onClick:()=>ws(!1),className:"flex-1 bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-6 py-3 rounded-xl hover:from-indigo-700 hover:to-purple-700",children:"Close"})]})]})});return wl?y("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 to-purple-100 p-2 sm:p-4",children:[p("div",{className:"max-w-4xl mx-auto",children:y("div",{className:"bg-white rounded-2xl shadow-xl p-4 sm:p-6",children:[y("div",{className:"flex justify-between items-center mb-6 flex-wrap gap-2",children:[y("h1",{className:"text-2xl sm:text-3xl font-bold text-indigo-800 flex items-center gap-2",children:[p(no,{className:"w-7 h-7 text-amber-500"}),"Scorix - Viewer"]}),Ht>0&&n.filter(w=>a.reduce((A,k)=>A+(k[w]||0),0)<o).length>=2&&y("button",{onClick:dd,className:"bg-gradient-to-r from-amber-500 to-orange-600 text-white px-4 py-2 rounded-xl hover:from-amber-600 hover:to-orange-700 flex items-center gap-2 shadow-md",title:"View prize split calculation",children:[" ",p("span",{children:"Split"})]})]}),(I||yt||B)&&p("div",{className:"mb-6 p-4 bg-gradient-to-r from-amber-50 to-amber-100 rounded-xl border border-amber-200",children:p("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:y("div",{className:"flex flex-col gap-3 items-start text-sm",children:[y("div",{className:"flex items-center gap-2",children:[p(Ih,{className:"w-4 h-4 text-indigo-700"}),p("span",{className:"font-medium",children:"Picker:"}),p("span",{className:"text-indigo-700 ml-1",children:I||""})]}),y("div",{className:"flex items-center gap-2",children:[p(Eh,{className:"w-4 h-4 text-indigo-700"}),p("span",{className:"font-medium",children:"Dealer:"}),p("span",{className:"text-indigo-700 ml-1",children:yt||""})]}),y("div",{className:"flex items-center gap-2",children:[p(Th,{className:"w-4 h-4 text-indigo-700"}),p("span",{className:"font-medium",children:"Splitter:"}),p("span",{className:"text-indigo-700 ml-1",children:B||""})]})]})})}),p(If,{players:xe,scores:a,maxScore:o,getPlayerTotal:_t,readonly:!0,editedRows:Ke,rejoinCounts:Ot})]})}),p(fd,{}),Sl&&p(Nl,{})]}):t==="setup"?p("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 to-purple-100 p-2 sm:p-4",children:p("div",{className:"max-w-2xl mx-auto",children:y("div",{className:"bg-white rounded-2xl shadow-xl p-4 sm:p-6",children:[y("div",{className:"text-center mb-6",children:[p("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-r from-indigo-500 to-purple-500 mb-4",children:p(Ph,{className:"w-8 h-8 text-white"})}),p("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800",children:"Scorix"}),p("p",{className:"text-gray-600 mt-2",children:"Rummy Score Tracker"})]}),y("div",{className:"mb-6",children:[p("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maximum Score"}),y("div",{className:"relative",children:[p("input",{type:"number",value:o,onChange:w=>l(Number(w.target.value)),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}),p("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:p("span",{className:"text-gray-500",children:"points"})})]})]}),y("div",{className:"mb-6",children:[p("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Entry Fee ()"}),p("input",{type:"number",value:Ht,onChange:w=>vs(w.target.value===""?"":Math.max(0,Number(w.target.value))),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g. 100",min:"0"}),p("p",{className:"text-xs text-gray-500 mt-1",children:"Optional: Set entry fee for prize pool calculation"})]}),y("div",{className:"mb-6",children:[p("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Add Players"}),y("div",{className:"flex gap-2",children:[p("input",{type:"text",value:i,onChange:w=>s(w.target.value),onKeyPress:w=>w.key==="Enter"&&od(),placeholder:"Player name",className:"flex-1 px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}),p("button",{onClick:od,className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-4 py-3 rounded-xl hover:from-indigo-700 hover:to-purple-700 flex items-center gap-2 shadow-md",children:p(iu,{className:"w-5 h-5"})})]})]}),n.length>0&&y("div",{className:"mb-6",children:[y("div",{className:"flex justify-between items-center mb-3",children:[y("h3",{className:"font-medium text-gray-700",children:["Players (",n.length,")"]}),p("p",{className:"text-xs text-gray-500",children:" Drag to reorder"})]}),p("div",{className:"flex flex-wrap gap-2",children:n.map((w,E)=>y("div",{draggable:!0,onDragStart:A=>E0(A,w),onDragOver:N0,onDrop:A=>k0(A,w),onDragEnd:I0,className:`bg-gradient-to-r from-indigo-50 to-purple-50 pl-2 pr-3 py-2 rounded-xl flex items-center gap-2 border-2 border-indigo-200 cursor-move hover:shadow-lg hover:scale-105 transition-all ${xs===w?"opacity-40 scale-95 rotate-2":""}`,children:[y("div",{className:"flex items-center gap-2",children:[p("div",{className:"w-7 h-7 rounded-full bg-indigo-500 flex items-center justify-center text-white font-bold text-sm shadow-md",children:E+1}),p("span",{className:"font-medium text-gray-800",children:w}),E===n.length-1&&p("span",{className:"px-1.5 py-0.5 bg-amber-400 text-amber-900 text-xs rounded font-bold",children:""})]}),p("button",{onClick:A=>{A.stopPropagation(),S0(w)},className:"text-red-500 hover:text-red-700 hover:bg-red-100 p-1 rounded-full transition-colors ml-1",title:"Remove player",children:p(pi,{className:"w-4 h-4"})})]},w))}),y("p",{className:"text-xs text-gray-500 mt-3 flex items-center gap-1",children:[p("span",{className:"px-1.5 py-0.5 bg-amber-400 text-amber-900 text-xs rounded font-bold",children:""}),"= Dealer (last in order)"]})]}),p("div",{className:"mb-6",children:y("button",{onClick:()=>id(!0),className:"w-full bg-gradient-to-r from-purple-500 to-pink-600 text-white py-3 rounded-xl hover:from-purple-600 hover:to-pink-700 flex items-center justify-center gap-2 font-medium shadow-lg",children:[p(kh,{className:"w-5 h-5"}),"View Settlement History"]})}),Sl&&p(Nl,{}),y("div",{className:"space-y-3",children:[y("button",{onClick:R0,disabled:n.length<2,className:"w-full bg-gradient-to-r from-green-500 to-emerald-600 text-white py-4 rounded-xl hover:from-green-600 hover:to-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-lg font-medium shadow-lg",children:[p(Rh,{className:"w-6 h-6"}),"Start Game - Draw Cards"]}),y("button",{onClick:T0,disabled:n.length<2,className:"w-full bg-gradient-to-r from-blue-500 to-indigo-600 text-white py-4 rounded-xl hover:from-blue-600 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-lg font-medium shadow-lg border-2 border-blue-300",children:[p(Ph,{className:"w-6 h-6"}),"Start Game - Keep Order"]})]}),p("div",{className:"mt-4 p-3 bg-blue-50 rounded-xl border border-blue-200",children:y("p",{className:"text-xs text-blue-800",children:[p("strong",{children:" Draw Cards:"})," Players draw cards to determine play order randomly",p("br",{}),p("strong",{children:" Keep Order:"})," Start game with the current player order (drag to arrange)"]})})]})})}):t==="drawing"?p("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 to-purple-100 p-2 sm:p-4",children:p("div",{className:"max-w-2xl mx-auto",children:y("div",{className:"bg-white rounded-2xl shadow-xl p-4 sm:p-6",children:[p("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-6 text-center",children:"Draw Cards to Determine Order"}),O<n.length?y("div",{className:"text-center mb-6",children:[p("div",{className:"inline-flex items-center justify-center w-14 h-14 rounded-full bg-gradient-to-r from-indigo-500 to-purple-500 mb-4",children:p("span",{className:"text-white font-bold text-lg",children:n[O][0]})}),y("p",{className:"text-lg mb-4",children:[p("strong",{className:"text-indigo-700",children:n[O]}),", draw your card!"]}),p("button",{onClick:P0,className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-8 py-4 rounded-xl hover:from-indigo-700 hover:to-purple-700 text-xl shadow-lg",children:"Draw Card"})]}):y("div",{className:"text-center mb-6",children:[p(Zl,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),p("p",{className:"text-lg text-green-600 font-bold",children:"All cards drawn! Starting game..."})]}),p("div",{className:"space-y-3",children:v.map((w,E)=>y("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 p-4 rounded-xl flex justify-between items-center border border-gray-200",children:[p("span",{className:"font-medium text-gray-800",children:w.player}),y("span",{className:`text-3xl ${w.card.suit===""||w.card.suit===""?"text-red-500":"text-gray-800"}`,children:[w.card.value,w.card.suit]})]},E))})]})})}):p("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 to-purple-100 p-2 sm:p-4",children:p("div",{className:"max-w-4xl mx-auto",children:y("div",{className:"bg-white rounded-2xl shadow-xl p-4 sm:p-6",children:[y("div",{className:"flex justify-between items-center mb-6 flex-wrap gap-2",children:[y("h1",{className:"text-2xl sm:text-3xl font-bold text-indigo-800 flex items-center gap-2",children:[p(no,{className:"w-7 h-7 text-amber-500"}),"Scorix - Round ",h+1]}),y("div",{className:"flex gap-2 flex-wrap",children:[p("button",{onClick:()=>_(!c),className:"bg-gray-100 text-gray-700 px-3 py-2 rounded-xl hover:bg-gray-200 flex items-center gap-1",children:c?p(Iv,{className:"w-4 h-4"}):p(Rv,{className:"w-4 h-4"})}),y("button",{onClick:O0,disabled:!M0(),className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white px-3 py-2 rounded-xl hover:from-green-600 hover:to-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1",children:[p(iu,{className:"w-4 h-4"}),p("span",{className:"hidden sm:inline",children:"Rejoin"})]}),y("button",{onClick:j0,className:"bg-gradient-to-r from-blue-500 to-cyan-600 text-white px-3 py-2 rounded-xl hover:from-blue-600 hover:to-cyan-700 flex items-center gap-1",children:[p(Fv,{className:"w-4 h-4"}),p("span",{className:"hidden sm:inline",children:"Share"})]}),Ht>0&&vt().length>=2&&y("button",{onClick:dd,className:"bg-gradient-to-r from-amber-500 to-orange-600 text-white px-3 py-2 rounded-xl hover:from-amber-600 hover:to-orange-700 flex items-center gap-1 shadow-md",title:"Split prize based on remaining drops",children:[" ",p("span",{className:"hidden sm:inline",children:"Split"})]}),p("button",{onClick:D0,className:"bg-gradient-to-r from-red-500 to-rose-600 text-white px-3 py-2 rounded-xl hover:from-red-600 hover:to-rose-700",children:"New"})]})]}),vt().length>1?p("div",{className:"mb-6 p-4 bg-gradient-to-r from-amber-50 to-amber-100 rounded-xl border border-amber-200",children:p("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:y("div",{className:"flex flex-col gap-3 items-start text-sm",children:[y("div",{className:"flex items-center gap-2",children:[p(Ih,{className:"w-4 h-4 text-indigo-700"}),p("span",{className:"font-medium",children:"Picker:"}),p("span",{className:"text-indigo-700 ml-1",children:I||""})]}),y("div",{className:"flex items-center gap-2",children:[p(Eh,{className:"w-4 h-4 text-indigo-700"}),p("span",{className:"font-medium",children:"Dealer:"}),p("span",{className:"text-indigo-700 ml-1",children:yt||""})]}),y("div",{className:"flex items-center gap-2",children:[p(Th,{className:"w-4 h-4 text-indigo-700"}),p("span",{className:"font-medium",children:"Splitter:"}),p("span",{className:"text-indigo-700 ml-1",children:B||""})]})]})})}):vt().length===1?p("div",{className:"mb-6 p-5 sm:p-6 bg-gradient-to-r from-green-50 to-emerald-50 rounded-2xl border-2 border-green-300 shadow-lg",children:y("div",{className:"text-center",children:[p("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-gradient-to-r from-green-500 to-emerald-600 mb-4",children:p(no,{className:"w-10 h-10 text-white"})}),p("p",{className:"text-2xl font-bold text-green-700 mb-2",children:"Congratulations!"}),p("p",{className:"text-3xl font-bold text-gray-800 mb-2",children:vt()[0]}),p("p",{className:"text-lg text-gray-700 mb-1",children:"You are the Winner!"}),y("p",{className:"text-md text-gray-600",children:["Final Score: ",p("strong",{children:_t(vt()[0])})]})]})}):null,p(WS,{players:vt(),onSubmit:b0,disabled:vt().length<=1,playerCards:pe,getPlayerTotal:_t,rejoinCounts:Ot}),c&&p(If,{players:xe,scores:a,maxScore:o,getPlayerTotal:_t,onEditScore:A0,editedRows:Ke,rejoinCounts:Ot}),On&&p("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:y("div",{className:"bg-white rounded-2xl p-5 sm:p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[y("div",{className:"flex justify-between items-center mb-4",children:[p("h2",{className:"text-xl font-bold text-gray-800",children:"Player Rejoin"}),p("button",{onClick:()=>gt(!1),className:"text-gray-500 hover:text-gray-700",children:p(pi,{className:"w-6 h-6"})})]}),w0?y(Ns,{children:[p("h3",{className:"text-lg font-bold mb-4",children:"Draw Cards for Rejoin Order"}),D<x.length?y("div",{className:"text-center mb-6",children:[p("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-gradient-to-r from-indigo-500 to-purple-500 mb-4",children:p("span",{className:"text-white font-bold text-lg",children:x[D][0]})}),y("p",{className:"text-lg mb-4",children:[p("strong",{className:"text-indigo-700",children:x[D]}),", draw your card!"]}),p("button",{onClick:z0,className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-6 py-3 rounded-xl hover:from-indigo-700 hover:to-purple-700 text-lg shadow-md",children:"Draw Card"})]}):y("div",{className:"text-center mb-6",children:[p(Zl,{className:"w-12 h-12 text-green-500 mx-auto mb-4"}),p("p",{className:"text-lg text-green-600 font-bold",children:"All cards drawn! Adding players..."})]}),p("div",{className:"space-y-3",children:b.map((w,E)=>y("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 p-3 rounded-xl flex justify-between items-center border border-gray-200",children:[p("span",{className:"font-medium text-gray-800",children:w.player}),y("span",{className:`text-2xl ${w.card.suit===""||w.card.suit===""?"text-red-500":"text-gray-800"}`,children:[w.card.value,w.card.suit]})]},E))})]}):y(Ns,{children:[p("div",{className:"mb-4 p-3 bg-blue-50 rounded-xl border border-blue-200",children:y("p",{className:"text-sm text-blue-800",children:[p("strong",{children:"Rejoining players will:"}),p("br",{})," Pay entry fee again (",Ht,")",p("br",{})," Start with score = Highest current score + 1 (",ad()+1,")",p("br",{})," Be placed before the current dealer (",ld(),")",p("br",{})," Draw cards to determine order among themselves (if multiple)"]})}),y("div",{className:"mb-4",children:[p("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Eliminated Player(s) to Rejoin"}),p("div",{className:"space-y-2 max-h-48 overflow-y-auto border border-gray-200 rounded-xl p-3",children:ud().map(w=>y("label",{className:"flex items-center gap-3 p-2 hover:bg-gray-50 rounded-lg cursor-pointer",children:[p("input",{type:"checkbox",checked:x.includes(w),onChange:()=>L0(w),className:"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500"}),p("span",{className:"flex-1 font-medium text-gray-800",children:w}),y("span",{className:"text-sm text-gray-500",children:["Score: ",_t(w)]})]},w))})]}),x.length>0&&y("div",{className:"mb-4",children:[y("h3",{className:"font-medium text-gray-700 mb-2",children:["Selected Players (",x.length,")"]}),p("div",{className:"flex flex-wrap gap-2",children:x.map(w=>p("div",{className:"bg-gradient-to-r from-emerald-100 to-teal-100 px-3 py-1.5 rounded-lg",children:p("span",{className:"text-emerald-800 font-medium",children:w})},w))})]}),y("div",{className:"flex gap-2",children:[x.length===1?p("button",{onClick:()=>cd(x),className:"flex-1 bg-gradient-to-r from-green-500 to-emerald-600 text-white py-2.5 rounded-xl hover:from-green-600 hover:to-emerald-700 font-medium",children:"Add Player"}):x.length>1?y("button",{onClick:F0,className:"flex-1 bg-gradient-to-r from-indigo-500 to-purple-600 text-white py-2.5 rounded-xl hover:from-indigo-600 hover:to-purple-700 flex items-center justify-center gap-2 font-medium",children:[p(Rh,{className:"w-4 h-4"}),"Draw Cards"]}):p("button",{disabled:!0,className:"flex-1 bg-gray-200 text-gray-500 py-2.5 rounded-xl cursor-not-allowed font-medium",children:"Select Players First"}),p("button",{onClick:()=>gt(!1),className:"flex-1 bg-gray-200 text-gray-700 py-2.5 rounded-xl hover:bg-gray-300 font-medium",children:"Cancel"})]})]})]})}),p(fd,{}),Sl&&p(Nl,{})]})})})};function HS(){return p("div",{className:"App",children:p($S,{})})}da.createRoot(document.getElementById("root")).render(p(sy.StrictMode,{children:p(HS,{})}));
